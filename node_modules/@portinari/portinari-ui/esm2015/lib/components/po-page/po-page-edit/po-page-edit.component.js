import * as tslib_1 from "tslib";
import { Component, ViewContainerRef } from '@angular/core';
import { PoPageEditBaseComponent } from './po-page-edit-base.component';
import { callAction, hasAction } from '../po-page-util/po-page-util';
/**
 * @docsExtends PoPageEditBaseComponent
 *
 * @example
 *
 * <example name="po-page-edit-basic" title="Portinari Page Edit Basic">
 *  <file name="sample-po-page-edit-basic/sample-po-page-edit-basic.component.html"> </file>
 *  <file name="sample-po-page-edit-basic/sample-po-page-edit-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-page-edit-labs" title="Portinari Page Edit Labs">
 *  <file name="sample-po-page-edit-labs/sample-po-page-edit-labs.component.html"> </file>
 *  <file name="sample-po-page-edit-labs/sample-po-page-edit-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-page-edit-user" title="Portinari Page Edit - User">
 *  <file name="sample-po-page-edit-user/sample-po-page-edit-user.component.html"> </file>
 *  <file name="sample-po-page-edit-user/sample-po-page-edit-user.component.ts"> </file>
 * </example>
 */
let PoPageEditComponent = class PoPageEditComponent extends PoPageEditBaseComponent {
    constructor(viewRef) {
        super();
        this.hasAction = hasAction;
        this.callAction = callAction;
        this.parentContext = viewRef['_view']['component'];
    }
    getIcon(icon) {
        if (icon === 'cancel') {
            return this.isPrimaryAction('cancel') ? 'po-icon-close' : '';
        }
        if (icon === 'saveNew') {
            return this.isPrimaryAction('saveNew') ? 'po-icon-ok' : '';
        }
        return '';
    }
    getType(type) {
        const isCancelPrimaryAction = type === 'cancel' && this.isPrimaryAction('cancel');
        const isSaveNewPrimaryAction = type === 'saveNew' && this.isPrimaryAction('saveNew');
        return isCancelPrimaryAction || isSaveNewPrimaryAction ? 'primary' : 'default';
    }
    hasAnyAction() {
        return hasAction('cancel', this.parentContext) || hasAction('saveNew', this.parentContext) || hasAction('save', this.parentContext);
    }
    hasPageHeader() {
        return !!(this.title || this.hasAnyAction() || (this.breadcrumb && this.breadcrumb.items.length));
    }
    isPrimaryAction(action) {
        const hasSaveAction = !hasAction('save', this.parentContext);
        if (action === 'saveNew') {
            return hasSaveAction;
        }
        if (action === 'cancel') {
            return !hasAction('saveNew', this.parentContext) && hasSaveAction;
        }
        return false;
    }
};
PoPageEditComponent.ctorParameters = () => [
    { type: ViewContainerRef }
];
PoPageEditComponent = tslib_1.__decorate([
    Component({
        selector: 'po-page-edit',
        template: "<po-page>\n  <!-- HEADER -->\n  <po-page-header\n    *ngIf=\"hasPageHeader()\"\n    [p-breadcrumb]=\"breadcrumb\"\n    [p-title]=\"title\">\n\n    <!-- OPERATIONS -->\n    <div *ngIf=\"hasAnyAction()\" class=\"po-page-header-actions\">\n      <po-button\n        *ngIf=\"hasAction('cancel', parentContext)\"\n        [p-icon]=\"getIcon('cancel')\"\n        [p-label]=\"literals.cancel\"\n        [p-type]=\"getType('cancel')\"\n        (p-click)=\"callAction('cancel', parentContext)\">\n      </po-button>\n\n      <po-button\n        *ngIf=\"hasAction('saveNew', parentContext)\"\n        [p-disabled]=\"disableSubmit\"\n        [p-icon]=\"getIcon('saveNew')\"\n        [p-label]=\"literals.saveNew\"\n        [p-type]=\"getType('saveNew')\"\n        (p-click)=\"callAction('saveNew', parentContext)\">\n      </po-button>\n\n      <po-button\n        *ngIf=\"hasAction('save', parentContext)\"\n        p-icon=\"po-icon-ok\"\n        p-type=\"primary\"\n        [p-disabled]=\"disableSubmit\"\n        [p-label]=\"literals.save\"\n        (p-click)=\"callAction('save', parentContext)\">\n      </po-button>\n    </div>\n\n  </po-page-header>\n\n  <!-- CONTENT -->\n  <po-page-content>\n    <ng-content>\n    </ng-content>\n  </po-page-content>\n\n</po-page>\n"
    }),
    tslib_1.__metadata("design:paramtypes", [ViewContainerRef])
], PoPageEditComponent);
export { PoPageEditComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1lZGl0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS9wby1wYWdlLWVkaXQvcG8tcGFnZS1lZGl0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU1RCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN4RSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBbUJHO0FBS0gsSUFBYSxtQkFBbUIsR0FBaEMsTUFBYSxtQkFBb0IsU0FBUSx1QkFBdUI7SUFLOUQsWUFBWSxPQUF5QjtRQUNuQyxLQUFLLEVBQUUsQ0FBQztRQUxWLGNBQVMsR0FBYSxTQUFTLENBQUM7UUFDaEMsZUFBVSxHQUFhLFVBQVUsQ0FBQztRQUtoQyxJQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUNyRCxDQUFDO0lBRUQsT0FBTyxDQUFDLElBQVk7UUFDbEIsSUFBSSxJQUFJLEtBQUssUUFBUSxFQUFFO1lBQ3JCLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7U0FDOUQ7UUFFRCxJQUFJLElBQUksS0FBSyxTQUFTLEVBQUU7WUFDdEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUM1RDtRQUVELE9BQU8sRUFBRSxDQUFDO0lBQ1osQ0FBQztJQUVELE9BQU8sQ0FBQyxJQUFZO1FBQ2xCLE1BQU0scUJBQXFCLEdBQUcsSUFBSSxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ2xGLE1BQU0sc0JBQXNCLEdBQUcsSUFBSSxLQUFLLFNBQVMsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBRXJGLE9BQU8scUJBQXFCLElBQUksc0JBQXNCLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ2pGLENBQUM7SUFFRCxZQUFZO1FBQ1YsT0FBTyxTQUFTLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxTQUFTLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN0SSxDQUFDO0lBRUQsYUFBYTtRQUNYLE9BQU8sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDcEcsQ0FBQztJQUVPLGVBQWUsQ0FBQyxNQUFjO1FBQ3BDLE1BQU0sYUFBYSxHQUFHLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFN0QsSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQ3hCLE9BQU8sYUFBYSxDQUFDO1NBQ3RCO1FBRUQsSUFBSSxNQUFNLEtBQUssUUFBUSxFQUFFO1lBQ3ZCLE9BQU8sQ0FBQyxTQUFTLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxhQUFhLENBQUM7U0FDbkU7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUNmLENBQUM7Q0FFRixDQUFBOztZQTlDc0IsZ0JBQWdCOztBQUwxQixtQkFBbUI7SUFKL0IsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLGNBQWM7UUFDeEIsMnZDQUE0QztLQUM3QyxDQUFDOzZDQU1xQixnQkFBZ0I7R0FMMUIsbUJBQW1CLENBbUQvQjtTQW5EWSxtQkFBbUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIFZpZXdDb250YWluZXJSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9QYWdlRWRpdEJhc2VDb21wb25lbnQgfSBmcm9tICcuL3BvLXBhZ2UtZWRpdC1iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBjYWxsQWN0aW9uLCBoYXNBY3Rpb24gfSBmcm9tICcuLi9wby1wYWdlLXV0aWwvcG8tcGFnZS11dGlsJztcblxuLyoqXG4gKiBAZG9jc0V4dGVuZHMgUG9QYWdlRWRpdEJhc2VDb21wb25lbnRcbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJwby1wYWdlLWVkaXQtYmFzaWNcIiB0aXRsZT1cIlBvcnRpbmFyaSBQYWdlIEVkaXQgQmFzaWNcIj5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXBhZ2UtZWRpdC1iYXNpYy9zYW1wbGUtcG8tcGFnZS1lZGl0LWJhc2ljLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXBhZ2UtZWRpdC1iYXNpYy9zYW1wbGUtcG8tcGFnZS1lZGl0LWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXBhZ2UtZWRpdC1sYWJzXCIgdGl0bGU9XCJQb3J0aW5hcmkgUGFnZSBFZGl0IExhYnNcIj5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXBhZ2UtZWRpdC1sYWJzL3NhbXBsZS1wby1wYWdlLWVkaXQtbGFicy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wYWdlLWVkaXQtbGFicy9zYW1wbGUtcG8tcGFnZS1lZGl0LWxhYnMuY29tcG9uZW50LnRzXCI+IDwvZmlsZT5cbiAqIDwvZXhhbXBsZT5cbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8tcGFnZS1lZGl0LXVzZXJcIiB0aXRsZT1cIlBvcnRpbmFyaSBQYWdlIEVkaXQgLSBVc2VyXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wYWdlLWVkaXQtdXNlci9zYW1wbGUtcG8tcGFnZS1lZGl0LXVzZXIuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tcGFnZS1lZGl0LXVzZXIvc2FtcGxlLXBvLXBhZ2UtZWRpdC11c2VyLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3BvLXBhZ2UtZWRpdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby1wYWdlLWVkaXQuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFBvUGFnZUVkaXRDb21wb25lbnQgZXh0ZW5kcyBQb1BhZ2VFZGl0QmFzZUNvbXBvbmVudCB7XG4gIGhhc0FjdGlvbjogRnVuY3Rpb24gPSBoYXNBY3Rpb247XG4gIGNhbGxBY3Rpb246IEZ1bmN0aW9uID0gY2FsbEFjdGlvbjtcbiAgcGFyZW50Q29udGV4dDogVmlld0NvbnRhaW5lclJlZjtcblxuICBjb25zdHJ1Y3Rvcih2aWV3UmVmOiBWaWV3Q29udGFpbmVyUmVmKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnBhcmVudENvbnRleHQgPSB2aWV3UmVmWydfdmlldyddWydjb21wb25lbnQnXTtcbiAgfVxuXG4gIGdldEljb24oaWNvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoaWNvbiA9PT0gJ2NhbmNlbCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzUHJpbWFyeUFjdGlvbignY2FuY2VsJykgPyAncG8taWNvbi1jbG9zZScgOiAnJztcbiAgICB9XG5cbiAgICBpZiAoaWNvbiA9PT0gJ3NhdmVOZXcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ByaW1hcnlBY3Rpb24oJ3NhdmVOZXcnKSA/ICdwby1pY29uLW9rJyA6ICcnO1xuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGdldFR5cGUodHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBpc0NhbmNlbFByaW1hcnlBY3Rpb24gPSB0eXBlID09PSAnY2FuY2VsJyAmJiB0aGlzLmlzUHJpbWFyeUFjdGlvbignY2FuY2VsJyk7XG4gICAgY29uc3QgaXNTYXZlTmV3UHJpbWFyeUFjdGlvbiA9IHR5cGUgPT09ICdzYXZlTmV3JyAmJiB0aGlzLmlzUHJpbWFyeUFjdGlvbignc2F2ZU5ldycpO1xuXG4gICAgcmV0dXJuIGlzQ2FuY2VsUHJpbWFyeUFjdGlvbiB8fCBpc1NhdmVOZXdQcmltYXJ5QWN0aW9uID8gJ3ByaW1hcnknIDogJ2RlZmF1bHQnO1xuICB9XG5cbiAgaGFzQW55QWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBoYXNBY3Rpb24oJ2NhbmNlbCcsIHRoaXMucGFyZW50Q29udGV4dCkgfHwgaGFzQWN0aW9uKCdzYXZlTmV3JywgdGhpcy5wYXJlbnRDb250ZXh0KSB8fCBoYXNBY3Rpb24oJ3NhdmUnLCB0aGlzLnBhcmVudENvbnRleHQpO1xuICB9XG5cbiAgaGFzUGFnZUhlYWRlcigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISEodGhpcy50aXRsZSB8fCB0aGlzLmhhc0FueUFjdGlvbigpIHx8ICh0aGlzLmJyZWFkY3J1bWIgJiYgdGhpcy5icmVhZGNydW1iLml0ZW1zLmxlbmd0aCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1ByaW1hcnlBY3Rpb24oYWN0aW9uOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBoYXNTYXZlQWN0aW9uID0gIWhhc0FjdGlvbignc2F2ZScsIHRoaXMucGFyZW50Q29udGV4dCk7XG5cbiAgICBpZiAoYWN0aW9uID09PSAnc2F2ZU5ldycpIHtcbiAgICAgIHJldHVybiBoYXNTYXZlQWN0aW9uO1xuICAgIH1cblxuICAgIGlmIChhY3Rpb24gPT09ICdjYW5jZWwnKSB7XG4gICAgICByZXR1cm4gIWhhc0FjdGlvbignc2F2ZU5ldycsIHRoaXMucGFyZW50Q29udGV4dCkgJiYgaGFzU2F2ZUFjdGlvbjtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxufVxuIl19