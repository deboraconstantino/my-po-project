import * as tslib_1 from "tslib";
import { Component, ViewContainerRef } from '@angular/core';
import { PoPageEditBaseComponent } from './po-page-edit-base.component';
import { callAction, hasAction } from '../po-page-util/po-page-util';
/**
 * @docsExtends PoPageEditBaseComponent
 *
 * @example
 *
 * <example name="po-page-edit-basic" title="Portinari Page Edit Basic">
 *  <file name="sample-po-page-edit-basic/sample-po-page-edit-basic.component.html"> </file>
 *  <file name="sample-po-page-edit-basic/sample-po-page-edit-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-page-edit-labs" title="Portinari Page Edit Labs">
 *  <file name="sample-po-page-edit-labs/sample-po-page-edit-labs.component.html"> </file>
 *  <file name="sample-po-page-edit-labs/sample-po-page-edit-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-page-edit-user" title="Portinari Page Edit - User">
 *  <file name="sample-po-page-edit-user/sample-po-page-edit-user.component.html"> </file>
 *  <file name="sample-po-page-edit-user/sample-po-page-edit-user.component.ts"> </file>
 * </example>
 */
var PoPageEditComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PoPageEditComponent, _super);
    function PoPageEditComponent(viewRef) {
        var _this = _super.call(this) || this;
        _this.hasAction = hasAction;
        _this.callAction = callAction;
        _this.parentContext = viewRef['_view']['component'];
        return _this;
    }
    PoPageEditComponent.prototype.getIcon = function (icon) {
        if (icon === 'cancel') {
            return this.isPrimaryAction('cancel') ? 'po-icon-close' : '';
        }
        if (icon === 'saveNew') {
            return this.isPrimaryAction('saveNew') ? 'po-icon-ok' : '';
        }
        return '';
    };
    PoPageEditComponent.prototype.getType = function (type) {
        var isCancelPrimaryAction = type === 'cancel' && this.isPrimaryAction('cancel');
        var isSaveNewPrimaryAction = type === 'saveNew' && this.isPrimaryAction('saveNew');
        return isCancelPrimaryAction || isSaveNewPrimaryAction ? 'primary' : 'default';
    };
    PoPageEditComponent.prototype.hasAnyAction = function () {
        return hasAction('cancel', this.parentContext) || hasAction('saveNew', this.parentContext) || hasAction('save', this.parentContext);
    };
    PoPageEditComponent.prototype.hasPageHeader = function () {
        return !!(this.title || this.hasAnyAction() || (this.breadcrumb && this.breadcrumb.items.length));
    };
    PoPageEditComponent.prototype.isPrimaryAction = function (action) {
        var hasSaveAction = !hasAction('save', this.parentContext);
        if (action === 'saveNew') {
            return hasSaveAction;
        }
        if (action === 'cancel') {
            return !hasAction('saveNew', this.parentContext) && hasSaveAction;
        }
        return false;
    };
    PoPageEditComponent.ctorParameters = function () { return [
        { type: ViewContainerRef }
    ]; };
    PoPageEditComponent = tslib_1.__decorate([
        Component({
            selector: 'po-page-edit',
            template: "<po-page>\n  <!-- HEADER -->\n  <po-page-header\n    *ngIf=\"hasPageHeader()\"\n    [p-breadcrumb]=\"breadcrumb\"\n    [p-title]=\"title\">\n\n    <!-- OPERATIONS -->\n    <div *ngIf=\"hasAnyAction()\" class=\"po-page-header-actions\">\n      <po-button\n        *ngIf=\"hasAction('cancel', parentContext)\"\n        [p-icon]=\"getIcon('cancel')\"\n        [p-label]=\"literals.cancel\"\n        [p-type]=\"getType('cancel')\"\n        (p-click)=\"callAction('cancel', parentContext)\">\n      </po-button>\n\n      <po-button\n        *ngIf=\"hasAction('saveNew', parentContext)\"\n        [p-disabled]=\"disableSubmit\"\n        [p-icon]=\"getIcon('saveNew')\"\n        [p-label]=\"literals.saveNew\"\n        [p-type]=\"getType('saveNew')\"\n        (p-click)=\"callAction('saveNew', parentContext)\">\n      </po-button>\n\n      <po-button\n        *ngIf=\"hasAction('save', parentContext)\"\n        p-icon=\"po-icon-ok\"\n        p-type=\"primary\"\n        [p-disabled]=\"disableSubmit\"\n        [p-label]=\"literals.save\"\n        (p-click)=\"callAction('save', parentContext)\">\n      </po-button>\n    </div>\n\n  </po-page-header>\n\n  <!-- CONTENT -->\n  <po-page-content>\n    <ng-content>\n    </ng-content>\n  </po-page-content>\n\n</po-page>\n"
        }),
        tslib_1.__metadata("design:paramtypes", [ViewContainerRef])
    ], PoPageEditComponent);
    return PoPageEditComponent;
}(PoPageEditBaseComponent));
export { PoPageEditComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1lZGl0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS9wby1wYWdlLWVkaXQvcG8tcGFnZS1lZGl0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU1RCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUN4RSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBRXJFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBbUJHO0FBS0g7SUFBeUMsK0NBQXVCO0lBSzlELDZCQUFZLE9BQXlCO1FBQXJDLFlBQ0UsaUJBQU8sU0FFUjtRQVBELGVBQVMsR0FBYSxTQUFTLENBQUM7UUFDaEMsZ0JBQVUsR0FBYSxVQUFVLENBQUM7UUFLaEMsS0FBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUM7O0lBQ3JELENBQUM7SUFFRCxxQ0FBTyxHQUFQLFVBQVEsSUFBWTtRQUNsQixJQUFJLElBQUksS0FBSyxRQUFRLEVBQUU7WUFDckIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztTQUM5RDtRQUVELElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtZQUN0QixPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1NBQzVEO1FBRUQsT0FBTyxFQUFFLENBQUM7SUFDWixDQUFDO0lBRUQscUNBQU8sR0FBUCxVQUFRLElBQVk7UUFDbEIsSUFBTSxxQkFBcUIsR0FBRyxJQUFJLEtBQUssUUFBUSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDbEYsSUFBTSxzQkFBc0IsR0FBRyxJQUFJLEtBQUssU0FBUyxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFckYsT0FBTyxxQkFBcUIsSUFBSSxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7SUFDakYsQ0FBQztJQUVELDBDQUFZLEdBQVo7UUFDRSxPQUFPLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3RJLENBQUM7SUFFRCwyQ0FBYSxHQUFiO1FBQ0UsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRyxDQUFDO0lBRU8sNkNBQWUsR0FBdkIsVUFBd0IsTUFBYztRQUNwQyxJQUFNLGFBQWEsR0FBRyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRTdELElBQUksTUFBTSxLQUFLLFNBQVMsRUFBRTtZQUN4QixPQUFPLGFBQWEsQ0FBQztTQUN0QjtRQUVELElBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtZQUN2QixPQUFPLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksYUFBYSxDQUFDO1NBQ25FO1FBRUQsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDOztnQkE1Q29CLGdCQUFnQjs7SUFMMUIsbUJBQW1CO1FBSi9CLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxjQUFjO1lBQ3hCLDJ2Q0FBNEM7U0FDN0MsQ0FBQztpREFNcUIsZ0JBQWdCO09BTDFCLG1CQUFtQixDQW1EL0I7SUFBRCwwQkFBQztDQUFBLEFBbkRELENBQXlDLHVCQUF1QixHQW1EL0Q7U0FuRFksbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBWaWV3Q29udGFpbmVyUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvUGFnZUVkaXRCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi9wby1wYWdlLWVkaXQtYmFzZS5jb21wb25lbnQnO1xuaW1wb3J0IHsgY2FsbEFjdGlvbiwgaGFzQWN0aW9uIH0gZnJvbSAnLi4vcG8tcGFnZS11dGlsL3BvLXBhZ2UtdXRpbCc7XG5cbi8qKlxuICogQGRvY3NFeHRlbmRzIFBvUGFnZUVkaXRCYXNlQ29tcG9uZW50XG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiA8ZXhhbXBsZSBuYW1lPVwicG8tcGFnZS1lZGl0LWJhc2ljXCIgdGl0bGU9XCJQb3J0aW5hcmkgUGFnZSBFZGl0IEJhc2ljXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wYWdlLWVkaXQtYmFzaWMvc2FtcGxlLXBvLXBhZ2UtZWRpdC1iYXNpYy5jb21wb25lbnQuaHRtbFwiPiA8L2ZpbGU+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wYWdlLWVkaXQtYmFzaWMvc2FtcGxlLXBvLXBhZ2UtZWRpdC1iYXNpYy5jb21wb25lbnQudHNcIj4gPC9maWxlPlxuICogPC9leGFtcGxlPlxuICpcbiAqIDxleGFtcGxlIG5hbWU9XCJwby1wYWdlLWVkaXQtbGFic1wiIHRpdGxlPVwiUG9ydGluYXJpIFBhZ2UgRWRpdCBMYWJzXCI+XG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1wYWdlLWVkaXQtbGFicy9zYW1wbGUtcG8tcGFnZS1lZGl0LWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tcGFnZS1lZGl0LWxhYnMvc2FtcGxlLXBvLXBhZ2UtZWRpdC1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XG4gKiA8L2V4YW1wbGU+XG4gKlxuICogPGV4YW1wbGUgbmFtZT1cInBvLXBhZ2UtZWRpdC11c2VyXCIgdGl0bGU9XCJQb3J0aW5hcmkgUGFnZSBFZGl0IC0gVXNlclwiPlxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tcGFnZS1lZGl0LXVzZXIvc2FtcGxlLXBvLXBhZ2UtZWRpdC11c2VyLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLXBhZ2UtZWRpdC11c2VyL3NhbXBsZS1wby1wYWdlLWVkaXQtdXNlci5jb21wb25lbnQudHNcIj4gPC9maWxlPlxuICogPC9leGFtcGxlPlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1wYWdlLWVkaXQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tcGFnZS1lZGl0LmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBQb1BhZ2VFZGl0Q29tcG9uZW50IGV4dGVuZHMgUG9QYWdlRWRpdEJhc2VDb21wb25lbnQge1xuICBoYXNBY3Rpb246IEZ1bmN0aW9uID0gaGFzQWN0aW9uO1xuICBjYWxsQWN0aW9uOiBGdW5jdGlvbiA9IGNhbGxBY3Rpb247XG4gIHBhcmVudENvbnRleHQ6IFZpZXdDb250YWluZXJSZWY7XG5cbiAgY29uc3RydWN0b3Iodmlld1JlZjogVmlld0NvbnRhaW5lclJlZikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wYXJlbnRDb250ZXh0ID0gdmlld1JlZlsnX3ZpZXcnXVsnY29tcG9uZW50J107XG4gIH1cblxuICBnZXRJY29uKGljb246IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGljb24gPT09ICdjYW5jZWwnKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc1ByaW1hcnlBY3Rpb24oJ2NhbmNlbCcpID8gJ3BvLWljb24tY2xvc2UnIDogJyc7XG4gICAgfVxuXG4gICAgaWYgKGljb24gPT09ICdzYXZlTmV3Jykge1xuICAgICAgcmV0dXJuIHRoaXMuaXNQcmltYXJ5QWN0aW9uKCdzYXZlTmV3JykgPyAncG8taWNvbi1vaycgOiAnJztcbiAgICB9XG5cbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBnZXRUeXBlKHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgaXNDYW5jZWxQcmltYXJ5QWN0aW9uID0gdHlwZSA9PT0gJ2NhbmNlbCcgJiYgdGhpcy5pc1ByaW1hcnlBY3Rpb24oJ2NhbmNlbCcpO1xuICAgIGNvbnN0IGlzU2F2ZU5ld1ByaW1hcnlBY3Rpb24gPSB0eXBlID09PSAnc2F2ZU5ldycgJiYgdGhpcy5pc1ByaW1hcnlBY3Rpb24oJ3NhdmVOZXcnKTtcblxuICAgIHJldHVybiBpc0NhbmNlbFByaW1hcnlBY3Rpb24gfHwgaXNTYXZlTmV3UHJpbWFyeUFjdGlvbiA/ICdwcmltYXJ5JyA6ICdkZWZhdWx0JztcbiAgfVxuXG4gIGhhc0FueUFjdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaGFzQWN0aW9uKCdjYW5jZWwnLCB0aGlzLnBhcmVudENvbnRleHQpIHx8IGhhc0FjdGlvbignc2F2ZU5ldycsIHRoaXMucGFyZW50Q29udGV4dCkgfHwgaGFzQWN0aW9uKCdzYXZlJywgdGhpcy5wYXJlbnRDb250ZXh0KTtcbiAgfVxuXG4gIGhhc1BhZ2VIZWFkZXIoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICEhKHRoaXMudGl0bGUgfHwgdGhpcy5oYXNBbnlBY3Rpb24oKSB8fCAodGhpcy5icmVhZGNydW1iICYmIHRoaXMuYnJlYWRjcnVtYi5pdGVtcy5sZW5ndGgpKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNQcmltYXJ5QWN0aW9uKGFjdGlvbjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaGFzU2F2ZUFjdGlvbiA9ICFoYXNBY3Rpb24oJ3NhdmUnLCB0aGlzLnBhcmVudENvbnRleHQpO1xuXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3NhdmVOZXcnKSB7XG4gICAgICByZXR1cm4gaGFzU2F2ZUFjdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoYWN0aW9uID09PSAnY2FuY2VsJykge1xuICAgICAgcmV0dXJuICFoYXNBY3Rpb24oJ3NhdmVOZXcnLCB0aGlzLnBhcmVudENvbnRleHQpICYmIGhhc1NhdmVBY3Rpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbn1cbiJdfQ==