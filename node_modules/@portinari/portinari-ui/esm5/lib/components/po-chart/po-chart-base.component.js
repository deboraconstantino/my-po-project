import * as tslib_1 from "tslib";
import { EventEmitter, Input, Output } from '@angular/core';
import { convertToInt, isTypeof } from '../../utils/util';
import { PoChartType } from './enums/po-chart-type.enum';
var poChartDefaultHeight = 400;
var poChartMinHeight = 200;
var poChartTypeDefault = PoChartType.Pie;
/**
 * @description
 *
 * O `po-chart` é um componente para renderização de dados através de gráficos, com isso facilitando a compreensão e tornando a
 * visualização destes dados mais agradável.
 *
 * Através de suas principais propriedades é possível definir o tipo de gráfico, uma altura e um título.
 *
 * Além disso, também é possível definir uma ação que será executada ao clicar em determinado elemento do gráfico
 * e outra que será executada ao passar o *mouse* sobre o elemento.
 *
 * #### Boas práticas
 *
 * - Para que o gráfico não fique ilegível e incompreensível, evite uma quantia excessiva de séries.
 * - Para exibir a intensidade de um único dado dê preferência ao tipo `gauge`.
 */
var PoChartBaseComponent = /** @class */ (function () {
    function PoChartBaseComponent() {
        this._type = poChartTypeDefault;
        this.poChartType = PoChartType;
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário clicar sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesClick = new EventEmitter();
        /**
         * @optional
         *
         * @description
         *
         * Evento executado quando o usuário passar o *mouse* sobre um elemento do gráfico.
         *
         * > Será passado por parâmetro um objeto contendo a categoria e valor da série.
         */
        this.seriesHover = new EventEmitter();
    }
    Object.defineProperty(PoChartBaseComponent.prototype, "height", {
        get: function () {
            return this._height || this.setDefaultHeight();
        },
        /**
         * @optional
         *
         * @description
         *
         * Define a altura do gráfico.
         *
         * O valor padrão dos gráficos são:
         * - para o tipo *gauge*: `200px`;
         * - para os demais tipos: `400px`.
         *
         * > O valor mínimo aceito nesta propriedade é 200.
         *
         * @default `400px`
         */
        set: function (value) {
            var intValue = convertToInt(value);
            var height;
            if (isTypeof(value, 'number')) {
                height = intValue <= poChartMinHeight ? poChartMinHeight : intValue;
            }
            else {
                height = this.setDefaultHeight();
            }
            this._height = height;
            this.rebuildComponent();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoChartBaseComponent.prototype, "series", {
        get: function () {
            return this._series;
        },
        /**
         * @description
         *
         * Define os elementos do gráfico que serão criados dinamicamente.
         *
         * > A coleção de objetos deve implementar alguma das interfaces abaixo:
         * - `PoDonutChartSeries`
         * - `PoPieChartSeries`
         * - `PoChartGaugeSerie`
         */
        set: function (value) {
            this._series = value || [];
            this.chartSeries = Array.isArray(this._series) ? tslib_1.__spread(this._series) : this.transformObjectToArrayObject(this._series);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoChartBaseComponent.prototype, "type", {
        get: function () {
            return this._type;
        },
        /**
         * @optional
         *
         * @description
         *
         * Define o tipo de gráfico.
         *
         * > Veja os valores válidos no *enum* `PoChartType`.
         *
         * @default `PoChartType.Pie`
         */
        set: function (value) {
            this._type = Object.values(PoChartType).includes(value) ? value : poChartTypeDefault;
            this.rebuildComponent();
        },
        enumerable: true,
        configurable: true
    });
    PoChartBaseComponent.prototype.onSeriesClick = function (event) {
        this.seriesClick.emit(event);
    };
    PoChartBaseComponent.prototype.onSeriesHover = function (event) {
        this.seriesHover.emit(event);
    };
    PoChartBaseComponent.prototype.setDefaultHeight = function () {
        return this.type === PoChartType.Gauge ? poChartMinHeight : poChartDefaultHeight;
    };
    PoChartBaseComponent.prototype.transformObjectToArrayObject = function (serie) {
        return typeof serie === 'object' && Object.keys(serie).length ? [tslib_1.__assign({}, serie)] : [];
    };
    tslib_1.__decorate([
        Input('p-height'),
        tslib_1.__metadata("design:type", Number),
        tslib_1.__metadata("design:paramtypes", [Number])
    ], PoChartBaseComponent.prototype, "height", null);
    tslib_1.__decorate([
        Input('p-series'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], PoChartBaseComponent.prototype, "series", null);
    tslib_1.__decorate([
        Input('p-title'),
        tslib_1.__metadata("design:type", String)
    ], PoChartBaseComponent.prototype, "title", void 0);
    tslib_1.__decorate([
        Input('p-type'),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], PoChartBaseComponent.prototype, "type", null);
    tslib_1.__decorate([
        Output('p-series-click'),
        tslib_1.__metadata("design:type", Object)
    ], PoChartBaseComponent.prototype, "seriesClick", void 0);
    tslib_1.__decorate([
        Output('p-series-hover'),
        tslib_1.__metadata("design:type", Object)
    ], PoChartBaseComponent.prototype, "seriesHover", void 0);
    return PoChartBaseComponent;
}());
export { PoChartBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS11aS8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFNUQsT0FBTyxFQUFFLFlBQVksRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUcxRCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFJekQsSUFBTSxvQkFBb0IsR0FBRyxHQUFHLENBQUM7QUFDakMsSUFBTSxnQkFBZ0IsR0FBRyxHQUFHLENBQUM7QUFDN0IsSUFBTSxrQkFBa0IsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDO0FBSTNDOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUNIO0lBQUE7UUFJVSxVQUFLLEdBQWdCLGtCQUFrQixDQUFDO1FBS2hDLGdCQUFXLEdBQUcsV0FBVyxDQUFDO1FBZ0YxQzs7Ozs7Ozs7V0FRRztRQUVILGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQTZELENBQUM7UUFFNUY7Ozs7Ozs7O1dBUUc7UUFFSCxnQkFBVyxHQUFHLElBQUksWUFBWSxFQUE2RCxDQUFDO0lBb0I5RixDQUFDO0lBekdvQixzQkFBSSx3Q0FBTTthQWU3QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUNqRCxDQUFDO1FBaENEOzs7Ozs7Ozs7Ozs7OztXQWNHO2FBQ2dCLFVBQVcsS0FBYTtZQUN6QyxJQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckMsSUFBSSxNQUFjLENBQUM7WUFFbkIsSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxFQUFFO2dCQUM3QixNQUFNLEdBQUcsUUFBUSxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDO2FBQ3JFO2lCQUFNO2dCQUNMLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQzthQUNsQztZQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1lBRXRCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQzFCLENBQUM7OztPQUFBO0lBZ0JrQixzQkFBSSx3Q0FBTTthQU03QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDO1FBbEJEOzs7Ozs7Ozs7V0FTRzthQUNnQixVQUFXLEtBQXVFO1lBQ25HLElBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztZQUUzQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsa0JBQUssSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDRCQUE0QixDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN2SCxDQUFDOzs7T0FBQTtJQW9CZ0Isc0JBQUksc0NBQUk7YUFNekI7WUFDRSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQztRQW5CRDs7Ozs7Ozs7OztXQVVHO2FBQ2MsVUFBUyxLQUFrQjtZQUMxQyxJQUFJLENBQUMsS0FBSyxHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDO1lBRTVGLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQzFCLENBQUM7OztPQUFBO0lBOEJELDRDQUFhLEdBQWIsVUFBYyxLQUFVO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUM7SUFFRCw0Q0FBYSxHQUFiLFVBQWMsS0FBVTtRQUN0QixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRU8sK0NBQWdCLEdBQXhCO1FBQ0UsT0FBTyxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQztJQUNuRixDQUFDO0lBRU8sMkRBQTRCLEdBQXBDLFVBQXFDLEtBQXdCO1FBQzNELE9BQU8sT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxzQkFBSyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0lBQ3BGLENBQUM7SUFyR2tCO1FBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7OztzREFhakI7SUFnQmtCO1FBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7OztzREFJakI7SUFPaUI7UUFBakIsS0FBSyxDQUFDLFNBQVMsQ0FBQzs7dURBQWdCO0lBYWhCO1FBQWhCLEtBQUssQ0FBQyxRQUFRLENBQUM7OztvREFJZjtJQWdCRDtRQURDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQzs7NkRBQ21FO0lBWTVGO1FBREMsTUFBTSxDQUFDLGdCQUFnQixDQUFDOzs2REFDbUU7SUFvQjlGLDJCQUFDO0NBQUEsQUFuSUQsSUFtSUM7U0FuSXFCLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBjb252ZXJ0VG9JbnQsIGlzVHlwZW9mIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFBvQ2hhcnRHYXVnZVNlcmllIH0gZnJvbSAnLi9wby1jaGFydC10eXBlcy9wby1jaGFydC1nYXVnZS9wby1jaGFydC1nYXVnZS1zZXJpZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvQ2hhcnRUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby1jaGFydC10eXBlLmVudW0nO1xuaW1wb3J0IHsgUG9Eb251dENoYXJ0U2VyaWVzIH0gZnJvbSAnLi9wby1jaGFydC10eXBlcy9wby1jaGFydC1kb251dC9wby1jaGFydC1kb251dC1zZXJpZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvUGllQ2hhcnRTZXJpZXMgfSBmcm9tICcuL3BvLWNoYXJ0LXR5cGVzL3BvLWNoYXJ0LXBpZS9wby1jaGFydC1waWUtc2VyaWVzLmludGVyZmFjZSc7XG5cbmNvbnN0IHBvQ2hhcnREZWZhdWx0SGVpZ2h0ID0gNDAwO1xuY29uc3QgcG9DaGFydE1pbkhlaWdodCA9IDIwMDtcbmNvbnN0IHBvQ2hhcnRUeXBlRGVmYXVsdCA9IFBvQ2hhcnRUeXBlLlBpZTtcblxuZXhwb3J0IHR5cGUgUG9DaGFydFNlcmllcyA9IEFycmF5PFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXMgfCBQb0NoYXJ0R2F1Z2VTZXJpZT47XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBgcG8tY2hhcnRgIMOpIHVtIGNvbXBvbmVudGUgcGFyYSByZW5kZXJpemHDp8OjbyBkZSBkYWRvcyBhdHJhdsOpcyBkZSBncsOhZmljb3MsIGNvbSBpc3NvIGZhY2lsaXRhbmRvIGEgY29tcHJlZW5zw6NvIGUgdG9ybmFuZG8gYVxuICogdmlzdWFsaXphw6fDo28gZGVzdGVzIGRhZG9zIG1haXMgYWdyYWTDoXZlbC5cbiAqXG4gKiBBdHJhdsOpcyBkZSBzdWFzIHByaW5jaXBhaXMgcHJvcHJpZWRhZGVzIMOpIHBvc3PDrXZlbCBkZWZpbmlyIG8gdGlwbyBkZSBncsOhZmljbywgdW1hIGFsdHVyYSBlIHVtIHTDrXR1bG8uXG4gKlxuICogQWzDqW0gZGlzc28sIHRhbWLDqW0gw6kgcG9zc8OtdmVsIGRlZmluaXIgdW1hIGHDp8OjbyBxdWUgc2Vyw6EgZXhlY3V0YWRhIGFvIGNsaWNhciBlbSBkZXRlcm1pbmFkbyBlbGVtZW50byBkbyBncsOhZmljb1xuICogZSBvdXRyYSBxdWUgc2Vyw6EgZXhlY3V0YWRhIGFvIHBhc3NhciBvICptb3VzZSogc29icmUgbyBlbGVtZW50by5cbiAqXG4gKiAjIyMjIEJvYXMgcHLDoXRpY2FzXG4gKlxuICogLSBQYXJhIHF1ZSBvIGdyw6FmaWNvIG7Do28gZmlxdWUgaWxlZ8OtdmVsIGUgaW5jb21wcmVlbnPDrXZlbCwgZXZpdGUgdW1hIHF1YW50aWEgZXhjZXNzaXZhIGRlIHPDqXJpZXMuXG4gKiAtIFBhcmEgZXhpYmlyIGEgaW50ZW5zaWRhZGUgZGUgdW0gw7puaWNvIGRhZG8gZMOqIHByZWZlcsOqbmNpYSBhbyB0aXBvIGBnYXVnZWAuXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb0NoYXJ0QmFzZUNvbXBvbmVudCB7XG5cbiAgcHJpdmF0ZSBfaGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgX3NlcmllczogQXJyYXk8UG9Eb251dENoYXJ0U2VyaWVzIHwgUG9QaWVDaGFydFNlcmllcz4gfCBQb0NoYXJ0R2F1Z2VTZXJpZTtcbiAgcHJpdmF0ZSBfdHlwZTogUG9DaGFydFR5cGUgPSBwb0NoYXJ0VHlwZURlZmF1bHQ7XG5cbiAgLy8gbWFuaXB1bGHDp8OjbyBkYXMgc8OpcmllcyB0cmF0YWRhcyBpbnRlcm5hbWVudGUgcGFyYSBwcmVzZXJ2YXIgJ3Atc2VyaWVzJztcbiAgcHJvdGVjdGVkIGNoYXJ0U2VyaWVzOiBQb0NoYXJ0U2VyaWVzO1xuXG4gIHB1YmxpYyByZWFkb25seSBwb0NoYXJ0VHlwZSA9IFBvQ2hhcnRUeXBlO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluZSBhIGFsdHVyYSBkbyBncsOhZmljby5cbiAgICpcbiAgICogTyB2YWxvciBwYWRyw6NvIGRvcyBncsOhZmljb3Mgc8OjbzpcbiAgICogLSBwYXJhIG8gdGlwbyAqZ2F1Z2UqOiBgMjAwcHhgO1xuICAgKiAtIHBhcmEgb3MgZGVtYWlzIHRpcG9zOiBgNDAwcHhgLlxuICAgKlxuICAgKiA+IE8gdmFsb3IgbcOtbmltbyBhY2VpdG8gbmVzdGEgcHJvcHJpZWRhZGUgw6kgMjAwLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgNDAwcHhgXG4gICAqL1xuICBASW5wdXQoJ3AtaGVpZ2h0Jykgc2V0IGhlaWdodCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgY29uc3QgaW50VmFsdWUgPSBjb252ZXJ0VG9JbnQodmFsdWUpO1xuICAgIGxldCBoZWlnaHQ6IG51bWJlcjtcblxuICAgIGlmIChpc1R5cGVvZih2YWx1ZSwgJ251bWJlcicpKSB7XG4gICAgICBoZWlnaHQgPSBpbnRWYWx1ZSA8PSBwb0NoYXJ0TWluSGVpZ2h0ID8gcG9DaGFydE1pbkhlaWdodCA6IGludFZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWlnaHQgPSB0aGlzLnNldERlZmF1bHRIZWlnaHQoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB0aGlzLnJlYnVpbGRDb21wb25lbnQoKTtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0IHx8IHRoaXMuc2V0RGVmYXVsdEhlaWdodCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgb3MgZWxlbWVudG9zIGRvIGdyw6FmaWNvIHF1ZSBzZXLDo28gY3JpYWRvcyBkaW5hbWljYW1lbnRlLlxuICAgKlxuICAgKiA+IEEgY29sZcOnw6NvIGRlIG9iamV0b3MgZGV2ZSBpbXBsZW1lbnRhciBhbGd1bWEgZGFzIGludGVyZmFjZXMgYWJhaXhvOlxuICAgKiAtIGBQb0RvbnV0Q2hhcnRTZXJpZXNgXG4gICAqIC0gYFBvUGllQ2hhcnRTZXJpZXNgXG4gICAqIC0gYFBvQ2hhcnRHYXVnZVNlcmllYFxuICAgKi9cbiAgQElucHV0KCdwLXNlcmllcycpIHNldCBzZXJpZXModmFsdWU6IFBvQ2hhcnRHYXVnZVNlcmllIHwgQXJyYXk8UG9Eb251dENoYXJ0U2VyaWVzIHwgUG9QaWVDaGFydFNlcmllcz4pIHtcbiAgICB0aGlzLl9zZXJpZXMgPSB2YWx1ZSB8fCBbXTtcblxuICAgIHRoaXMuY2hhcnRTZXJpZXMgPSBBcnJheS5pc0FycmF5KHRoaXMuX3NlcmllcykgPyBbLi4udGhpcy5fc2VyaWVzXSA6IHRoaXMudHJhbnNmb3JtT2JqZWN0VG9BcnJheU9iamVjdCh0aGlzLl9zZXJpZXMpO1xuICB9XG5cbiAgZ2V0IHNlcmllcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc2VyaWVzO1xuICB9XG5cbiAgLyoqIERlZmluZSBvIHTDrXR1bG8gZG8gZ3LDoWZpY28uICovXG4gIEBJbnB1dCgncC10aXRsZScpIHRpdGxlPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluZSBvIHRpcG8gZGUgZ3LDoWZpY28uXG4gICAqXG4gICAqID4gVmVqYSBvcyB2YWxvcmVzIHbDoWxpZG9zIG5vICplbnVtKiBgUG9DaGFydFR5cGVgLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgUG9DaGFydFR5cGUuUGllYFxuICAgKi9cbiAgQElucHV0KCdwLXR5cGUnKSBzZXQgdHlwZSh2YWx1ZTogUG9DaGFydFR5cGUpIHtcbiAgICB0aGlzLl90eXBlID0gKDxhbnk+T2JqZWN0KS52YWx1ZXMoUG9DaGFydFR5cGUpLmluY2x1ZGVzKHZhbHVlKSA/IHZhbHVlIDogcG9DaGFydFR5cGVEZWZhdWx0O1xuXG4gICAgdGhpcy5yZWJ1aWxkQ29tcG9uZW50KCk7XG4gIH1cblxuICBnZXQgdHlwZSgpOiBQb0NoYXJ0VHlwZSB7XG4gICAgcmV0dXJuIHRoaXMuX3R5cGU7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFdmVudG8gZXhlY3V0YWRvIHF1YW5kbyBvIHVzdcOhcmlvIGNsaWNhciBzb2JyZSB1bSBlbGVtZW50byBkbyBncsOhZmljby5cbiAgICpcbiAgICogPiBTZXLDoSBwYXNzYWRvIHBvciBwYXLDom1ldHJvIHVtIG9iamV0byBjb250ZW5kbyBhIGNhdGVnb3JpYSBlIHZhbG9yIGRhIHPDqXJpZS5cbiAgICovXG4gIEBPdXRwdXQoJ3Atc2VyaWVzLWNsaWNrJylcbiAgc2VyaWVzQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPFBvRG9udXRDaGFydFNlcmllcyB8IFBvUGllQ2hhcnRTZXJpZXMgfCBQb0NoYXJ0R2F1Z2VTZXJpZT4oKTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBFdmVudG8gZXhlY3V0YWRvIHF1YW5kbyBvIHVzdcOhcmlvIHBhc3NhciBvICptb3VzZSogc29icmUgdW0gZWxlbWVudG8gZG8gZ3LDoWZpY28uXG4gICAqXG4gICAqID4gU2Vyw6EgcGFzc2FkbyBwb3IgcGFyw6JtZXRybyB1bSBvYmpldG8gY29udGVuZG8gYSBjYXRlZ29yaWEgZSB2YWxvciBkYSBzw6lyaWUuXG4gICAqL1xuICBAT3V0cHV0KCdwLXNlcmllcy1ob3ZlcicpXG4gIHNlcmllc0hvdmVyID0gbmV3IEV2ZW50RW1pdHRlcjxQb0RvbnV0Q2hhcnRTZXJpZXMgfCBQb1BpZUNoYXJ0U2VyaWVzIHwgUG9DaGFydEdhdWdlU2VyaWU+KCk7XG5cbiAgb25TZXJpZXNDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZXJpZXNDbGljay5lbWl0KGV2ZW50KTtcbiAgfVxuXG4gIG9uU2VyaWVzSG92ZXIoZXZlbnQ6IGFueSk6IHZvaWQge1xuICAgIHRoaXMuc2VyaWVzSG92ZXIuZW1pdChldmVudCk7XG4gIH1cblxuICBwcml2YXRlIHNldERlZmF1bHRIZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gUG9DaGFydFR5cGUuR2F1Z2UgPyBwb0NoYXJ0TWluSGVpZ2h0IDogcG9DaGFydERlZmF1bHRIZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybU9iamVjdFRvQXJyYXlPYmplY3Qoc2VyaWU6IFBvQ2hhcnRHYXVnZVNlcmllKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBzZXJpZSA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmtleXMoc2VyaWUpLmxlbmd0aCA/IFt7Li4uc2VyaWV9XSA6IFtdO1xuICB9XG5cbiAgYWJzdHJhY3QgcmVidWlsZENvbXBvbmVudCgpOiB2b2lkO1xuXG59XG4iXX0=