import * as tslib_1 from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, convertToBoolean, isTypeof, poLocaleDefault } from './../../../utils/util';
import { PoStepperOrientation } from '../enums/po-stepper-orientation.enum';
import { PoStepperStatus } from '../enums/po-stepper-status.enum';
var poStepperStepSizeDefault = 24;
var poStepperStepSizeMax = 64;
var poStepLiteralsDefault = {
    en: { label: 'Step' },
    es: { label: 'Paso' },
    pt: { label: 'Passo' }
};
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente que representa um *step* contendo as ligações das laterais (`po-stepper-step-bar`) e a label.
 */
var PoStepperStepComponent = /** @class */ (function () {
    function PoStepperStepComponent() {
        this._stepIcons = false;
        this._stepSize = poStepperStepSizeDefault;
        this.literals = tslib_1.__assign({}, poStepLiteralsDefault[poLocaleDefault], poStepLiteralsDefault[browserLanguage()]);
        // Evento que será emitido quando o status do *step* estiver ativo (`PoStepperStatus.Active`).
        this.activated = new EventEmitter();
        // Evento que será emitido ao clicar no *step*.
        this.click = new EventEmitter();
        // Evento que será emitido ao focar no *step* e pressionar a tecla *enter*.
        this.enter = new EventEmitter();
    }
    Object.defineProperty(PoStepperStepComponent.prototype, "label", {
        get: function () {
            return this._label;
        },
        // Label do *step*.
        set: function (value) {
            this._label = isTypeof(value, 'string') ? value : this.literals.label + " " + this.circleContent;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "status", {
        get: function () {
            return this._status;
        },
        // Define o estado de exibição.
        set: function (value) {
            this._status = value ? value : undefined;
            if (this.status === PoStepperStatus.Active) {
                this.activated.emit();
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "stepIcons", {
        get: function () {
            return this._stepIcons;
        },
        set: function (stepIcons) {
            this._stepIcons = convertToBoolean(stepIcons);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "stepSize", {
        get: function () {
            return this._stepSize;
        },
        // Tamanho do `step` em *pixels*, possibilitando um maior destaque.
        // O valor informado deve ser entre `24` e `64`.
        set: function (value) {
            this._stepSize = (value >= poStepperStepSizeDefault && value <= poStepperStepSizeMax) ? value : poStepperStepSizeDefault;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "halfStepSize", {
        get: function () {
            return this.stepSize / 2;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "isVerticalOrientation", {
        get: function () {
            return this.orientation === PoStepperOrientation.Vertical;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoStepperStepComponent.prototype, "marginHorizontalBar", {
        get: function () {
            return this.isVerticalOrientation ? undefined : this.halfStepSize;
        },
        enumerable: true,
        configurable: true
    });
    PoStepperStepComponent.prototype.getStatusClass = function (status) {
        switch (status) {
            case PoStepperStatus.Active:
                return 'po-stepper-step-active';
            case PoStepperStatus.Disabled:
                return 'po-stepper-step-disabled';
            case PoStepperStatus.Done:
                return 'po-stepper-step-done';
            case PoStepperStatus.Error:
                return 'po-stepper-step-error';
            default:
                return 'po-stepper-step-default';
        }
    };
    PoStepperStepComponent.prototype.onClick = function () {
        if (this.status !== PoStepperStatus.Disabled) {
            this.click.emit();
        }
    };
    PoStepperStepComponent.prototype.onEnter = function () {
        if (this.status !== PoStepperStatus.Disabled) {
            this.enter.emit();
        }
    };
    tslib_1.__decorate([
        Input('p-circle-content'),
        tslib_1.__metadata("design:type", Object)
    ], PoStepperStepComponent.prototype, "circleContent", void 0);
    tslib_1.__decorate([
        Input('p-label'),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], PoStepperStepComponent.prototype, "label", null);
    tslib_1.__decorate([
        Input('p-orientation'),
        tslib_1.__metadata("design:type", String)
    ], PoStepperStepComponent.prototype, "orientation", void 0);
    tslib_1.__decorate([
        Input('p-status'),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], PoStepperStepComponent.prototype, "status", null);
    tslib_1.__decorate([
        Input('p-step-icons'),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], PoStepperStepComponent.prototype, "stepIcons", null);
    tslib_1.__decorate([
        Input('p-step-size'),
        tslib_1.__metadata("design:type", Number),
        tslib_1.__metadata("design:paramtypes", [Number])
    ], PoStepperStepComponent.prototype, "stepSize", null);
    tslib_1.__decorate([
        Output('p-activated'),
        tslib_1.__metadata("design:type", Object)
    ], PoStepperStepComponent.prototype, "activated", void 0);
    tslib_1.__decorate([
        Output('p-click'),
        tslib_1.__metadata("design:type", Object)
    ], PoStepperStepComponent.prototype, "click", void 0);
    tslib_1.__decorate([
        Output('p-enter'),
        tslib_1.__metadata("design:type", Object)
    ], PoStepperStepComponent.prototype, "enter", void 0);
    PoStepperStepComponent = tslib_1.__decorate([
        Component({
            selector: 'po-stepper-step',
            template: "<div class=\"po-stepper-step\"\n  [ngClass]=\"getStatusClass(status)\"\n  (click)=\"onClick()\"\n  (keydown.enter)=\"onEnter()\">\n\n  <div class=\"po-stepper-step-container\" [style.width.px]=\"isVerticalOrientation ? stepSize : undefined\">\n\n    <div\n      [class.po-stepper-step-bar-top]=\"isVerticalOrientation\"\n      [class.po-stepper-step-bar-left]=\"!isVerticalOrientation\"\n      [style.margin-right.px]=\"marginHorizontalBar\">\n    </div>\n\n    <po-stepper-circle\n      [p-content]=\"circleContent\"\n      [p-icons]=\"stepIcons\"\n      [p-size]=\"stepSize\"\n      [p-status]=\"status\">\n    </po-stepper-circle>\n\n    <div\n      [class.po-stepper-step-bar-bottom]=\"isVerticalOrientation\"\n      [class.po-stepper-step-bar-right]=\"!isVerticalOrientation\"\n      [style.margin-left.px]=\"marginHorizontalBar\">\n    </div>\n\n  </div>\n\n  <po-stepper-label\n    class=\"po-stepper-step-label-position\"\n    [p-content]=\"label\">\n  </po-stepper-label>\n</div>\n"
        })
    ], PoStepperStepComponent);
    return PoStepperStepComponent;
}());
export { PoStepperStepComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tc3RlcHBlci1zdGVwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tc3RlcHBlci9wby1zdGVwcGVyLXN0ZXAvcG8tc3RlcHBlci1zdGVwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV2RSxPQUFPLEVBQUUsZUFBZSxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVyRyxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUM1RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFFbEUsSUFBTSx3QkFBd0IsR0FBRyxFQUFFLENBQUM7QUFDcEMsSUFBTSxvQkFBb0IsR0FBRyxFQUFFLENBQUM7QUFDaEMsSUFBTSxxQkFBcUIsR0FBRztJQUM1QixFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQ3JCLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDckIsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTtDQUN2QixDQUFDO0FBRUY7Ozs7OztHQU1HO0FBS0g7SUFKQTtRQVFVLGVBQVUsR0FBYSxLQUFLLENBQUM7UUFDN0IsY0FBUyxHQUFXLHdCQUF3QixDQUFDO1FBRTVDLGFBQVEsd0JBQ1oscUJBQXFCLENBQUMsZUFBZSxDQUFDLEVBQ3RDLHFCQUFxQixDQUFDLGVBQWUsRUFBRSxDQUFDLEVBQzNDO1FBZ0RGLDhGQUE4RjtRQUN2RSxjQUFTLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUzRCwrQ0FBK0M7UUFDNUIsVUFBSyxHQUFHLElBQUks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QUksQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDbkI7SUFDSCxDQUFDO0lBM0YwQjtRQUExQixLQUFLLENBQUMsa0JBQWtCLENBQUM7O2lFQUFvQjtJQUc1QjtRQUFqQixLQUFLLENBQUMsU0FBUyxDQUFDOzs7dURBRWhCO0lBT3VCO1FBQXZCLEtBQUssQ0FBQyxlQUFlLENBQUM7OytEQUFtQztJQUd2QztRQUFsQixLQUFLLENBQUMsVUFBVSxDQUFDOzs7d0RBTWpCO0lBTXNCO1FBQXRCLEtBQUssQ0FBQyxjQUFjLENBQUM7OzsyREFFckI7SUFRcUI7UUFBckIsS0FBSyxDQUFDLGFBQWEsQ0FBQzs7OzBEQUVwQjtJQU9zQjtRQUF0QixNQUFNLENBQUMsYUFBYSxDQUFDOzs2REFBcUM7SUFHeEM7UUFBbEIsTUFBTSxDQUFDLFNBQVMsQ0FBQzs7eURBQWlDO0lBR2hDO1FBQWxCLE1BQU0sQ0FBQyxTQUFTLENBQUM7O3lEQUFpQztJQWpFeEMsc0JBQXNCO1FBSmxDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxpQkFBaUI7WUFDM0IsMCtCQUE2QztTQUM5QyxDQUFDO09BQ1csc0JBQXNCLENBMEdsQztJQUFELDZCQUFDO0NBQUEsQUExR0QsSUEwR0M7U0ExR1ksc0JBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgYnJvd3Nlckxhbmd1YWdlLCBjb252ZXJ0VG9Cb29sZWFuLCBpc1R5cGVvZiwgcG9Mb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi8uLi8uLi8uLi91dGlscy91dGlsJztcblxuaW1wb3J0IHsgUG9TdGVwcGVyT3JpZW50YXRpb24gfSBmcm9tICcuLi9lbnVtcy9wby1zdGVwcGVyLW9yaWVudGF0aW9uLmVudW0nO1xuaW1wb3J0IHsgUG9TdGVwcGVyU3RhdHVzIH0gZnJvbSAnLi4vZW51bXMvcG8tc3RlcHBlci1zdGF0dXMuZW51bSc7XG5cbmNvbnN0IHBvU3RlcHBlclN0ZXBTaXplRGVmYXVsdCA9IDI0O1xuY29uc3QgcG9TdGVwcGVyU3RlcFNpemVNYXggPSA2NDtcbmNvbnN0IHBvU3RlcExpdGVyYWxzRGVmYXVsdCA9IHtcbiAgZW46IHsgbGFiZWw6ICdTdGVwJyB9LFxuICBlczogeyBsYWJlbDogJ1Bhc28nIH0sXG4gIHB0OiB7IGxhYmVsOiAnUGFzc28nIH1cbn07XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogQ29tcG9uZW50ZSBxdWUgcmVwcmVzZW50YSB1bSAqc3RlcCogY29udGVuZG8gYXMgbGlnYcOnw7VlcyBkYXMgbGF0ZXJhaXMgKGBwby1zdGVwcGVyLXN0ZXAtYmFyYCkgZSBhIGxhYmVsLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1zdGVwcGVyLXN0ZXAnLFxuICB0ZW1wbGF0ZVVybDogJ3BvLXN0ZXBwZXItc3RlcC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgUG9TdGVwcGVyU3RlcENvbXBvbmVudCB7XG5cbiAgcHJpdmF0ZSBfbGFiZWw6IHN0cmluZztcbiAgcHJpdmF0ZSBfc3RhdHVzOiBQb1N0ZXBwZXJTdGF0dXM7XG4gIHByaXZhdGUgX3N0ZXBJY29ucz86IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfc3RlcFNpemU6IG51bWJlciA9IHBvU3RlcHBlclN0ZXBTaXplRGVmYXVsdDtcblxuICByZWFkb25seSBsaXRlcmFscyA9IHtcbiAgICAuLi5wb1N0ZXBMaXRlcmFsc0RlZmF1bHRbcG9Mb2NhbGVEZWZhdWx0XSxcbiAgICAuLi5wb1N0ZXBMaXRlcmFsc0RlZmF1bHRbYnJvd3Nlckxhbmd1YWdlKCldXG4gIH07XG5cbiAgLy8gQ29udGXDumRvIHF1ZSBzZXLDoSByZXBhc3NhZG8gcGFyYSBvIGNvbXBvbmVudGUgYHAtY2lyY2xlLWNvbnRlbnRgIGF0cmF2w6lzIGRhIHByb3ByaWVkYWRlIGBwLWNvbnRlbnRgLlxuICBASW5wdXQoJ3AtY2lyY2xlLWNvbnRlbnQnKSBjaXJjbGVDb250ZW50OiBhbnk7XG5cbiAgLy8gTGFiZWwgZG8gKnN0ZXAqLlxuICBASW5wdXQoJ3AtbGFiZWwnKSBzZXQgbGFiZWwodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2xhYmVsID0gaXNUeXBlb2YodmFsdWUsICdzdHJpbmcnKSA/IHZhbHVlIDogYCR7dGhpcy5saXRlcmFscy5sYWJlbH0gJHt0aGlzLmNpcmNsZUNvbnRlbnR9YDtcbiAgfVxuXG4gIGdldCBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgfVxuXG4gIC8vIERlZmluZSBhIG9yaWVudGHDp8OjbyBkZSBleGliacOnw6NvLlxuICBASW5wdXQoJ3Atb3JpZW50YXRpb24nKSBvcmllbnRhdGlvbjogUG9TdGVwcGVyT3JpZW50YXRpb247XG5cbiAgLy8gRGVmaW5lIG8gZXN0YWRvIGRlIGV4aWJpw6fDo28uXG4gIEBJbnB1dCgncC1zdGF0dXMnKSBzZXQgc3RhdHVzKHZhbHVlOiBQb1N0ZXBwZXJTdGF0dXMpIHtcbiAgICB0aGlzLl9zdGF0dXMgPSAodmFsdWUgYXMgc3RyaW5nKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzID09PSBQb1N0ZXBwZXJTdGF0dXMuQWN0aXZlKSB7XG4gICAgICB0aGlzLmFjdGl2YXRlZC5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHN0YXR1cygpOiBQb1N0ZXBwZXJTdGF0dXMge1xuICAgIHJldHVybiB0aGlzLl9zdGF0dXM7XG4gIH1cblxuICBASW5wdXQoJ3Atc3RlcC1pY29ucycpIHNldCBzdGVwSWNvbnMoc3RlcEljb25zOiBib29sZWFuKSB7XG4gICAgdGhpcy5fc3RlcEljb25zID0gY29udmVydFRvQm9vbGVhbihzdGVwSWNvbnMpO1xuICB9XG5cbiAgZ2V0IHN0ZXBJY29ucygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5fc3RlcEljb25zO1xuICB9XG5cbiAgLy8gVGFtYW5obyBkbyBgc3RlcGAgZW0gKnBpeGVscyosIHBvc3NpYmlsaXRhbmRvIHVtIG1haW9yIGRlc3RhcXVlLlxuICAvLyBPIHZhbG9yIGluZm9ybWFkbyBkZXZlIHNlciBlbnRyZSBgMjRgIGUgYDY0YC5cbiAgQElucHV0KCdwLXN0ZXAtc2l6ZScpIHNldCBzdGVwU2l6ZSh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fc3RlcFNpemUgPSAodmFsdWUgPj0gcG9TdGVwcGVyU3RlcFNpemVEZWZhdWx0ICYmIHZhbHVlIDw9IHBvU3RlcHBlclN0ZXBTaXplTWF4KSA/IHZhbHVlIDogcG9TdGVwcGVyU3RlcFNpemVEZWZhdWx0O1xuICB9XG5cbiAgZ2V0IHN0ZXBTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBTaXplO1xuICB9XG5cbiAgLy8gRXZlbnRvIHF1ZSBzZXLDoSBlbWl0aWRvIHF1YW5kbyBvIHN0YXR1cyBkbyAqc3RlcCogZXN0aXZlciBhdGl2byAoYFBvU3RlcHBlclN0YXR1cy5BY3RpdmVgKS5cbiAgQE91dHB1dCgncC1hY3RpdmF0ZWQnKSBhY3RpdmF0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAvLyBFdmVudG8gcXVlIHNlcsOhIGVtaXRpZG8gYW8gY2xpY2FyIG5vICpzdGVwKi5cbiAgQE91dHB1dCgncC1jbGljaycpIGNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLy8gRXZlbnRvIHF1ZSBzZXLDoSBlbWl0aWRvIGFvIGZvY2FyIG5vICpzdGVwKiBlIHByZXNzaW9uYXIgYSB0ZWNsYSAqZW50ZXIqLlxuICBAT3V0cHV0KCdwLWVudGVyJykgZW50ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBnZXQgaGFsZlN0ZXBTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc3RlcFNpemUgLyAyO1xuICB9XG5cbiAgZ2V0IGlzVmVydGljYWxPcmllbnRhdGlvbigpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gUG9TdGVwcGVyT3JpZW50YXRpb24uVmVydGljYWw7XG4gIH1cblxuICBnZXQgbWFyZ2luSG9yaXpvbnRhbEJhcigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmlzVmVydGljYWxPcmllbnRhdGlvbiA/IHVuZGVmaW5lZCA6IHRoaXMuaGFsZlN0ZXBTaXplO1xuICB9XG5cbiAgZ2V0U3RhdHVzQ2xhc3Moc3RhdHVzOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICBjYXNlIFBvU3RlcHBlclN0YXR1cy5BY3RpdmU6XG4gICAgICAgIHJldHVybiAncG8tc3RlcHBlci1zdGVwLWFjdGl2ZSc7XG4gICAgICBjYXNlIFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZDpcbiAgICAgICAgcmV0dXJuICdwby1zdGVwcGVyLXN0ZXAtZGlzYWJsZWQnO1xuICAgICAgY2FzZSBQb1N0ZXBwZXJTdGF0dXMuRG9uZTpcbiAgICAgICAgcmV0dXJuICdwby1zdGVwcGVyLXN0ZXAtZG9uZSc7XG4gICAgICBjYXNlIFBvU3RlcHBlclN0YXR1cy5FcnJvcjpcbiAgICAgICAgcmV0dXJuICdwby1zdGVwcGVyLXN0ZXAtZXJyb3InO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdwby1zdGVwcGVyLXN0ZXAtZGVmYXVsdCc7XG4gICAgfVxuICB9XG5cbiAgb25DbGljaygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZCkge1xuICAgICAgdGhpcy5jbGljay5lbWl0KCk7XG4gICAgfVxuICB9XG5cbiAgb25FbnRlcigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZCkge1xuICAgICAgdGhpcy5lbnRlci5lbWl0KCk7XG4gICAgfVxuICB9XG5cbn1cbiJdfQ==