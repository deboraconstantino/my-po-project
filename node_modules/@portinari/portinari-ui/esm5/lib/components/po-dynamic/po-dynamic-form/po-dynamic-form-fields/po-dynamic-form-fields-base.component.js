import * as tslib_1 from "tslib";
import { Input, EventEmitter, Output } from '@angular/core';
import { isTypeof } from '../../../../utils/util';
import { getGridColumnsClasses, isVisibleField } from '../../po-dynamic.util';
import { PoDynamicFieldType } from '../../po-dynamic-field-type.enum';
var PoDynamicFormFieldsBaseComponent = /** @class */ (function () {
    function PoDynamicFormFieldsBaseComponent(titleCasePipe) {
        this.titleCasePipe = titleCasePipe;
        this._value = {};
        this.visibleFields = [];
        this.fieldsChange = new EventEmitter();
        this.formValidate = new EventEmitter();
    }
    Object.defineProperty(PoDynamicFormFieldsBaseComponent.prototype, "fields", {
        get: function () {
            return this._fields;
        },
        // array de objetos que implementam a interface PoDynamicFormField, que serão exibidos no componente.
        set: function (value) {
            this._fields = Array.isArray(value) ? tslib_1.__spread(value) : [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoDynamicFormFieldsBaseComponent.prototype, "value", {
        get: function () {
            return this._value;
        },
        // valor que será utilizado para iniciar valor no componente.
        set: function (value) {
            this._value = value && isTypeof(value, 'object') ? value : {};
        },
        enumerable: true,
        configurable: true
    });
    PoDynamicFormFieldsBaseComponent.prototype.compareTo = function (value, compareTo) {
        return value === compareTo;
    };
    // retorna um array com os objetos configurados e visiveis.
    PoDynamicFormFieldsBaseComponent.prototype.getVisibleFields = function () {
        var _this = this;
        var visibleFields = [];
        this.fields.forEach(function (field) {
            if (_this.existsProperty(visibleFields, field.property)) {
                _this.printError("\"po-dynamic-form\" property \"" + field.property + "\" est\u00E1 duplicado. Interface: PoDynamicFormField.");
                return;
            }
            if (!field['property']) {
                _this.printError('"po-dynamic-form" É obrigatório ser especificado um property.');
                return;
            }
            if (isVisibleField(field)) {
                visibleFields.push(_this.createField(field));
            }
        });
        return visibleFields;
    };
    // converte um array em string para um array de objetos que contem label e value.
    PoDynamicFormFieldsBaseComponent.prototype.convertOptions = function (options) {
        var everyOptionString = options.every(function (option) { return typeof option === 'string'; });
        if (everyOptionString) {
            return options.map(function (value) { return ({ label: value, value: value }); });
        }
        return options;
    };
    // cria um novo objeto com as classes de grid system, com control (tipo do componente) e label default.
    PoDynamicFormFieldsBaseComponent.prototype.createField = function (field) {
        var control = this.getComponentControl(field);
        var options = !!field.options ? this.convertOptions(field.options) : undefined;
        var focus = this.hasFocus(field);
        var componentClass = getGridColumnsClasses(field.gridSmColumns, field.gridMdColumns, field.gridLgColumns, field.gridXlColumns, field.gridColumns);
        return tslib_1.__assign({ label: this.titleCasePipe.transform(field.property) }, field, { componentClass: componentClass,
            control: control,
            focus: focus,
            options: options });
    };
    PoDynamicFormFieldsBaseComponent.prototype.existsProperty = function (fields, property) {
        return fields.some(function (field) {
            return field.property === property;
        });
    };
    // recupera o componente de acordo com algumas regras do field.
    PoDynamicFormFieldsBaseComponent.prototype.getComponentControl = function (field) {
        if (field === void 0) { field = {}; }
        var type = field && field.type ? field.type.toLocaleLowerCase() : 'string';
        if (this.isNumberType(field, type)) {
            return 'number';
        }
        else if (this.isCurrencyType(field, type)) {
            return 'decimal';
        }
        else if (this.isSelect(field)) {
            return 'select';
        }
        else if (this.isRadioGroup(field)) {
            return 'radioGroup';
        }
        else if (this.isCheckboxGroup(field)) {
            return 'checkboxGroup';
        }
        else if (this.isMultiselect(field)) {
            return 'multiselect';
        }
        else if (this.compareTo(type, PoDynamicFieldType.Boolean)) {
            return 'switch';
        }
        else if (this.compareTo(type, PoDynamicFieldType.Date) || this.compareTo(type, PoDynamicFieldType.DateTime)) {
            return 'datepicker';
        }
        else if (this.compareTo(type, PoDynamicFieldType.Time)) {
            field.mask = field.mask || '99:99';
            return 'input';
        }
        else if (this.isCombo(field)) {
            return 'combo';
        }
        else if (this.isLookup(field)) {
            return 'lookup';
        }
        else if (this.isTextarea(field)) {
            return 'textarea';
        }
        else if (this.isPassword(field)) {
            return 'password';
        }
        return 'input';
    };
    PoDynamicFormFieldsBaseComponent.prototype.hasFocus = function (field) {
        return !!this.autoFocus && this.autoFocus === field.property;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isCheckboxGroup = function (field) {
        var optionsService = field.optionsService, optionsMulti = field.optionsMulti, options = field.options;
        return !optionsService && optionsMulti && !!options && options.length <= 3;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isCombo = function (field) {
        var optionsService = field.optionsService;
        return !!optionsService && isTypeof(optionsService, 'string');
    };
    PoDynamicFormFieldsBaseComponent.prototype.isCurrencyType = function (field, type) {
        var mask = field.mask, pattern = field.pattern;
        return this.compareTo(type, PoDynamicFieldType.Currency) && (!mask && !pattern);
    };
    PoDynamicFormFieldsBaseComponent.prototype.isLookup = function (field) {
        var searchService = field.searchService;
        return !!searchService && isTypeof(searchService, 'string');
    };
    PoDynamicFormFieldsBaseComponent.prototype.isMultiselect = function (field) {
        var optionsService = field.optionsService, optionsMulti = field.optionsMulti, options = field.options;
        return !optionsService && optionsMulti && !!options && options.length > 3;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isNumberType = function (field, type) {
        var mask = field.mask, pattern = field.pattern;
        return this.compareTo(type, PoDynamicFieldType.Number) && (!mask && !pattern);
    };
    PoDynamicFormFieldsBaseComponent.prototype.isPassword = function (field) {
        var secret = field.secret;
        return secret;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isRadioGroup = function (field) {
        var optionsMulti = field.optionsMulti, options = field.options;
        return !optionsMulti && !!options && options.length <= 3;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isSelect = function (field) {
        var optionsMulti = field.optionsMulti, options = field.options;
        return !optionsMulti && !!options && options.length > 3;
    };
    PoDynamicFormFieldsBaseComponent.prototype.isTextarea = function (field) {
        var rows = field.rows;
        return rows && rows >= 3;
    };
    PoDynamicFormFieldsBaseComponent.prototype.printError = function (error) {
        console.error(error);
    };
    tslib_1.__decorate([
        Input('p-auto-focus'),
        tslib_1.__metadata("design:type", String)
    ], PoDynamicFormFieldsBaseComponent.prototype, "autoFocus", void 0);
    tslib_1.__decorate([
        Input('p-fields'),
        tslib_1.__metadata("design:type", Array),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], PoDynamicFormFieldsBaseComponent.prototype, "fields", null);
    tslib_1.__decorate([
        Output('p-fieldsChange'),
        tslib_1.__metadata("design:type", Object)
    ], PoDynamicFormFieldsBaseComponent.prototype, "fieldsChange", void 0);
    tslib_1.__decorate([
        Input('p-value'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], PoDynamicFormFieldsBaseComponent.prototype, "value", null);
    tslib_1.__decorate([
        Input('p-disabled-form'),
        tslib_1.__metadata("design:type", Boolean)
    ], PoDynamicFormFieldsBaseComponent.prototype, "disabledForm", void 0);
    tslib_1.__decorate([
        Input('p-validate'),
        tslib_1.__metadata("design:type", Object)
    ], PoDynamicFormFieldsBaseComponent.prototype, "validate", void 0);
    tslib_1.__decorate([
        Output('p-form-validate'),
        tslib_1.__metadata("design:type", Object)
    ], PoDynamicFormFieldsBaseComponent.prototype, "formValidate", void 0);
    return PoDynamicFormFieldsBaseComponent;
}());
export { PoDynamicFormFieldsBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZHluYW1pYy1mb3JtLWZpZWxkcy1iYXNlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tZHluYW1pYy9wby1keW5hbWljLWZvcm0vcG8tZHluYW1pYy1mb3JtLWZpZWxkcy9wby1keW5hbWljLWZvcm0tZmllbGRzLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHNUQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRWxELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxjQUFjLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUM5RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQztBQUl0RTtJQW1DRSwwQ0FBb0IsYUFBNEI7UUFBNUIsa0JBQWEsR0FBYixhQUFhLENBQWU7UUFoQ3hDLFdBQU0sR0FBUyxFQUFFLENBQUM7UUFFMUIsa0JBQWEsR0FBc0MsRUFBRSxDQUFDO1FBYTVCLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQWV0QyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7SUFFZixDQUFDO0lBekJqQyxzQkFBSSxvREFBTTthQUk3QjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDO1FBUEQscUdBQXFHO2FBQ2xGLFVBQVcsS0FBZ0M7WUFDNUQsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsa0JBQUssS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDeEQsQ0FBQzs7O09BQUE7SUFTaUIsc0JBQUksbURBQUs7YUFJM0I7WUFDRSxPQUFPLElBQUks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LE9BQU8sQ0FBQyxNQUFNLElBQUksQ0FBQyxDQUFDO0lBQzNELENBQUM7SUFFTyxtREFBUSxHQUFoQixVQUFpQixLQUF5QjtRQUNoQyxJQUFBLGlDQUFZLEVBQUUsdUJBQU8sQ0FBVztRQUV4QyxPQUFPLENBQUMsWUFBWSxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDMUQsQ0FBQztJQUVPLHFEQUFVLEdBQWxCLFVBQW1CLEtBQXlCO1FBQ2xDLElBQUEsaUJBQUksQ0FBVztRQUV2QixPQUFPLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFFTyxxREFBVSxHQUFsQixVQUFtQixLQUFhO1FBQzlCLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdkIsQ0FBQztJQXZNc0I7UUFBdEIsS0FBSyxDQUFDLGNBQWMsQ0FBQzs7dUVBQW9CO0lBR3ZCO1FBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7MENBQW1CLEtBQUs7aURBQUwsS0FBSztrRUFFekM7SUFNeUI7UUFBekIsTUFBTSxDQUFDLGdCQUFnQixDQUFDOzswRUFBd0M7SUFHL0M7UUFBakIsS0FBSyxDQUFDLFNBQVMsQ0FBQzs7O2lFQUVoQjtJQU15QjtRQUF6QixLQUFLLENBQUMsaUJBQWlCLENBQUM7OzBFQUF1QjtJQUUzQjtRQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOztzRUFBOEI7SUFFdkI7UUFBMUIsTUFBTSxDQUFDLGlCQUFpQixDQUFDOzswRUFBd0M7SUErS3BFLHVDQUFDO0NBQUEsQUFoTkQsSUFnTkM7U0FoTlksZ0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFRpdGxlQ2FzZVBpcGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5cclxuaW1wb3J0IHsgaXNUeXBlb2YgfSBmcm9tICcuLi8uLi8uLi8uLi91dGlscy91dGlsJztcclxuXHJcbmltcG9ydCB7IGdldEdyaWRDb2x1bW5zQ2xhc3NlcywgaXNWaXNpYmxlRmllbGQgfSBmcm9tICcuLi8uLi9wby1keW5hbWljLnV0aWwnO1xyXG5pbXBvcnQgeyBQb0R5bmFtaWNGaWVsZFR5cGUgfSBmcm9tICcuLi8uLi9wby1keW5hbWljLWZpZWxkLXR5cGUuZW51bSc7XHJcbmltcG9ydCB7IFBvRHluYW1pY0Zvcm1GaWVsZCB9IGZyb20gJy4uL3BvLWR5bmFtaWMtZm9ybS1maWVsZC5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb0R5bmFtaWNGb3JtRmllbGRJbnRlcm5hbCB9IGZyb20gJy4vcG8tZHluYW1pYy1mb3JtLWZpZWxkLWludGVybmFsLmludGVyZmFjZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9EeW5hbWljRm9ybUZpZWxkc0Jhc2VDb21wb25lbnQge1xyXG5cclxuICBwcml2YXRlIF9maWVsZHM6IEFycmF5PFBvRHluYW1pY0Zvcm1GaWVsZD47XHJcbiAgcHJpdmF0ZSBfdmFsdWU/OiBhbnkgPSB7fTtcclxuXHJcbiAgdmlzaWJsZUZpZWxkczogQXJyYXk8UG9EeW5hbWljRm9ybUZpZWxkSW50ZXJuYWw+ID0gW107XHJcblxyXG4gIEBJbnB1dCgncC1hdXRvLWZvY3VzJykgYXV0b0ZvY3VzPzogc3RyaW5nO1xyXG5cclxuICAvLyBhcnJheSBkZSBvYmpldG9zIHF1ZSBpbXBsZW1lbnRhbSBhIGludGVyZmFjZSBQb0R5bmFtaWNGb3JtRmllbGQsIHF1ZSBzZXLDo28gZXhpYmlkb3Mgbm8gY29tcG9uZW50ZS5cclxuICBASW5wdXQoJ3AtZmllbGRzJykgc2V0IGZpZWxkcyh2YWx1ZTogQXJyYXk8UG9EeW5hbWljRm9ybUZpZWxkPikge1xyXG4gICAgdGhpcy5fZmllbGRzID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyBbLi4udmFsdWVdIDogW107XHJcbiAgfVxyXG5cclxuICBnZXQgZmllbGRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkcztcclxuICB9XHJcblxyXG4gIEBPdXRwdXQoJ3AtZmllbGRzQ2hhbmdlJykgZmllbGRzQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIC8vIHZhbG9yIHF1ZSBzZXLDoSB1dGlsaXphZG8gcGFyYSBpbmljaWFyIHZhbG9yIG5vIGNvbXBvbmVudGUuXHJcbiAgQElucHV0KCdwLXZhbHVlJykgc2V0IHZhbHVlKHZhbHVlOiBhbnkpIHtcclxuICAgIHRoaXMuX3ZhbHVlID0gdmFsdWUgJiYgaXNUeXBlb2YodmFsdWUsICdvYmplY3QnKSA/IHZhbHVlIDoge307XHJcbiAgfVxyXG5cclxuICBnZXQgdmFsdWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ3AtZGlzYWJsZWQtZm9ybScpIGRpc2FibGVkRm9ybTogYm9vbGVhbjtcclxuXHJcbiAgQElucHV0KCdwLXZhbGlkYXRlJykgdmFsaWRhdGU/OiBzdHJpbmcgfCBGdW5jdGlvbjtcclxuXHJcbiAgQE91dHB1dCgncC1mb3JtLXZhbGlkYXRlJykgZm9ybVZhbGlkYXRlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgdGl0bGVDYXNlUGlwZTogVGl0bGVDYXNlUGlwZSkge31cclxuXHJcbiAgY29tcGFyZVRvKHZhbHVlLCBjb21wYXJlVG8pIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gY29tcGFyZVRvO1xyXG4gIH1cclxuXHJcbiAgLy8gcmV0b3JuYSB1bSBhcnJheSBjb20gb3Mgb2JqZXRvcyBjb25maWd1cmFkb3MgZSB2aXNpdmVpcy5cclxuICBwcm90ZWN0ZWQgZ2V0VmlzaWJsZUZpZWxkcygpIHtcclxuICAgIGNvbnN0IHZpc2libGVGaWVsZHMgPSBbXTtcclxuXHJcbiAgICB0aGlzLmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcclxuICAgICAgaWYgKHRoaXMuZXhpc3RzUHJvcGVydHkodmlzaWJsZUZpZWxkcywgZmllbGQucHJvcGVydHkpKSB7XHJcbiAgICAgICAgdGhpcy5wcmludEVycm9yKGBcInBvLWR5bmFtaWMtZm9ybVwiIHByb3BlcnR5IFwiJHtmaWVsZC5wcm9wZXJ0eX1cIiBlc3TDoSBkdXBsaWNhZG8uIEludGVyZmFjZTogUG9EeW5hbWljRm9ybUZpZWxkLmApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKCFmaWVsZFsncHJvcGVydHknXSkge1xyXG4gICAgICAgIHRoaXMucHJpbnRFcnJvcignXCJwby1keW5hbWljLWZvcm1cIiDDiSBvYnJpZ2F0w7NyaW8gc2VyIGVzcGVjaWZpY2FkbyB1bSBwcm9wZXJ0eS4nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChpc1Zpc2libGVGaWVsZChmaWVsZCkpIHtcclxuICAgICAgICB2aXNpYmxlRmllbGRzLnB1c2godGhpcy5jcmVhdGVGaWVsZChmaWVsZCkpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gdmlzaWJsZUZpZWxkcztcclxuICB9XHJcblxyXG4gIC8vIGNvbnZlcnRlIHVtIGFycmF5IGVtIHN0cmluZyBwYXJhIHVtIGFycmF5IGRlIG9iamV0b3MgcXVlIGNvbnRlbSBsYWJlbCBlIHZhbHVlLlxyXG4gIHByaXZhdGUgY29udmVydE9wdGlvbnMob3B0aW9uczogQXJyYXk8YW55Pik6IEFycmF5PHsgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZyB9PiB7XHJcbiAgICBjb25zdCBldmVyeU9wdGlvblN0cmluZyA9IG9wdGlvbnMuZXZlcnkob3B0aW9uID0+IHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnKTtcclxuXHJcbiAgICBpZiAoZXZlcnlPcHRpb25TdHJpbmcpIHtcclxuICAgICAgcmV0dXJuIG9wdGlvbnMubWFwKHZhbHVlID0+ICh7bGFiZWw6IHZhbHVlLCB2YWx1ZX0pKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIC8vIGNyaWEgdW0gbm92byBvYmpldG8gY29tIGFzIGNsYXNzZXMgZGUgZ3JpZCBzeXN0ZW0sIGNvbSBjb250cm9sICh0aXBvIGRvIGNvbXBvbmVudGUpIGUgbGFiZWwgZGVmYXVsdC5cclxuICBwcml2YXRlIGNyZWF0ZUZpZWxkKGZpZWxkOiBQb0R5bmFtaWNGb3JtRmllbGQpOiBQb0R5bmFtaWNGb3JtRmllbGRJbnRlcm5hbCB7XHJcbiAgICBjb25zdCBjb250cm9sID0gdGhpcy5nZXRDb21wb25lbnRDb250cm9sKGZpZWxkKTtcclxuICAgIGNvbnN0IG9wdGlvbnMgPSAhIWZpZWxkLm9wdGlvbnMgPyB0aGlzLmNvbnZlcnRPcHRpb25zKGZpZWxkLm9wdGlvbnMpIDogdW5kZWZpbmVkO1xyXG4gICAgY29uc3QgZm9jdXMgPSB0aGlzLmhhc0ZvY3VzKGZpZWxkKTtcclxuXHJcbiAgICBjb25zdCBjb21wb25lbnRDbGFzcyA9IGdldEdyaWRDb2x1bW5zQ2xhc3NlcyhmaWVsZC5ncmlkU21Db2x1bW5zLFxyXG4gICAgICBmaWVsZC5ncmlkTWRDb2x1bW5zLFxyXG4gICAgICBmaWVsZC5ncmlkTGdDb2x1bW5zLFxyXG4gICAgICBmaWVsZC5ncmlkWGxDb2x1bW5zLFxyXG4gICAgICBmaWVsZC5ncmlkQ29sdW1ucyk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbGFiZWw6IHRoaXMudGl0bGVDYXNlUGlwZS50cmFuc2Zvcm0oZmllbGQucHJvcGVydHkpLFxyXG4gICAgICAuLi5maWVsZCxcclxuICAgICAgY29tcG9uZW50Q2xhc3MsXHJcbiAgICAgIGNvbnRyb2wsXHJcbiAgICAgIGZvY3VzLFxyXG4gICAgICBvcHRpb25zXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBleGlzdHNQcm9wZXJ0eShmaWVsZHM6IEFycmF5PFBvRHluYW1pY0Zvcm1GaWVsZD4sIHByb3BlcnR5OiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBmaWVsZHMuc29tZShmaWVsZCA9PiB7XHJcbiAgICAgIHJldHVybiBmaWVsZC5wcm9wZXJ0eSA9PT0gcHJvcGVydHk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIHJlY3VwZXJhIG8gY29tcG9uZW50ZSBkZSBhY29yZG8gY29tIGFsZ3VtYXMgcmVncmFzIGRvIGZpZWxkLlxyXG4gIHByaXZhdGUgZ2V0Q29tcG9uZW50Q29udHJvbChmaWVsZDogUG9EeW5hbWljRm9ybUZpZWxkID0gPGFueT4ge30pIHtcclxuICAgIGNvbnN0IHR5cGUgPSBmaWVsZCAmJiBmaWVsZC50eXBlID8gZmllbGQudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpIDogJ3N0cmluZyc7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNOdW1iZXJUeXBlKGZpZWxkLCB0eXBlKSkge1xyXG4gICAgICByZXR1cm4gJ251bWJlcic7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDdXJyZW5jeVR5cGUoZmllbGQsIHR5cGUpKSB7XHJcbiAgICAgIHJldHVybiAnZGVjaW1hbCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNTZWxlY3QoZmllbGQpKSB7XHJcbiAgICAgIHJldHVybiAnc2VsZWN0JztcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pc1JhZGlvR3JvdXAoZmllbGQpKSB7XHJcbiAgICAgIHJldHVybiAncmFkaW9Hcm91cCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNDaGVja2JveEdyb3VwKGZpZWxkKSkge1xyXG4gICAgICByZXR1cm4gJ2NoZWNrYm94R3JvdXAnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTXVsdGlzZWxlY3QoZmllbGQpKSB7XHJcbiAgICAgIHJldHVybiAnbXVsdGlzZWxlY3QnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBhcmVUbyh0eXBlLCBQb0R5bmFtaWNGaWVsZFR5cGUuQm9vbGVhbikpIHtcclxuICAgICAgcmV0dXJuICdzd2l0Y2gnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBhcmVUbyh0eXBlLCBQb0R5bmFtaWNGaWVsZFR5cGUuRGF0ZSkgfHwgdGhpcy5jb21wYXJlVG8odHlwZSwgUG9EeW5hbWljRmllbGRUeXBlLkRhdGVUaW1lKSkge1xyXG4gICAgICByZXR1cm4gJ2RhdGVwaWNrZXInO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbXBhcmVUbyh0eXBlLCBQb0R5bmFtaWNGaWVsZFR5cGUuVGltZSkpIHtcclxuICAgICAgZmllbGQubWFzayA9IGZpZWxkLm1hc2sgfHwgJzk5Ojk5JztcclxuXHJcbiAgICAgIHJldHVybiAnaW5wdXQnO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzQ29tYm8oZmllbGQpKSB7XHJcbiAgICAgIHJldHVybiAnY29tYm8nO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTG9va3VwKGZpZWxkKSkge1xyXG4gICAgICByZXR1cm4gJ2xvb2t1cCc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNUZXh0YXJlYShmaWVsZCkpIHtcclxuICAgICAgcmV0dXJuICd0ZXh0YXJlYSc7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNQYXNzd29yZChmaWVsZCkpIHtcclxuICAgICAgcmV0dXJuICdwYXNzd29yZCc7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICdpbnB1dCc7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGhhc0ZvY3VzKGZpZWxkOiBQb0R5bmFtaWNGb3JtRmllbGQpIHtcclxuICAgIHJldHVybiAhIXRoaXMuYXV0b0ZvY3VzICYmIHRoaXMuYXV0b0ZvY3VzID09PSBmaWVsZC5wcm9wZXJ0eTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNDaGVja2JveEdyb3VwKGZpZWxkOiBQb0R5bmFtaWNGb3JtRmllbGQpIHtcclxuICAgIGNvbnN0IHsgb3B0aW9uc1NlcnZpY2UsIG9wdGlvbnNNdWx0aSwgb3B0aW9ucyB9ID0gZmllbGQ7XHJcblxyXG4gICAgcmV0dXJuICFvcHRpb25zU2VydmljZSAmJiBvcHRpb25zTXVsdGkgJiYgISFvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoIDw9IDM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzQ29tYm8oZmllbGQ6IFBvRHluYW1pY0Zvcm1GaWVsZCkge1xyXG4gICAgY29uc3QgeyBvcHRpb25zU2VydmljZSB9ID0gZmllbGQ7XHJcblxyXG4gICAgcmV0dXJuICEhb3B0aW9uc1NlcnZpY2UgJiYgaXNUeXBlb2Yob3B0aW9uc1NlcnZpY2UsICdzdHJpbmcnKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNDdXJyZW5jeVR5cGUoZmllbGQ6IFBvRHluYW1pY0Zvcm1GaWVsZCwgdHlwZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB7IG1hc2ssIHBhdHRlcm4gfSA9IGZpZWxkO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmNvbXBhcmVUbyh0eXBlLCBQb0R5bmFtaWNGaWVsZFR5cGUuQ3VycmVuY3kpICYmICghbWFzayAmJiAhcGF0dGVybik7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzTG9va3VwKGZpZWxkOiBQb0R5bmFtaWNGb3JtRmllbGQpIHtcclxuICAgIGNvbnN0IHsgc2VhcmNoU2VydmljZSB9ID0gZmllbGQ7XHJcblxyXG4gICAgcmV0dXJuICEhc2VhcmNoU2VydmljZSAmJiBpc1R5cGVvZihzZWFyY2hTZXJ2aWNlLCAnc3RyaW5nJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGlzTXVsdGlzZWxlY3QoZmllbGQ6IFBvRHluYW1pY0Zvcm1GaWVsZCkge1xyXG4gICAgY29uc3QgeyBvcHRpb25zU2VydmljZSwgb3B0aW9uc011bHRpLCBvcHRpb25zIH0gPSBmaWVsZDtcclxuXHJcbiAgICByZXR1cm4gIW9wdGlvbnNTZXJ2aWNlICYmIG9wdGlvbnNNdWx0aSAmJiAhIW9wdGlvbnMgJiYgb3B0aW9ucy5sZW5ndGggPiAzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc051bWJlclR5cGUoZmllbGQ6IFBvRHluYW1pY0Zvcm1GaWVsZCwgdHlwZTogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB7IG1hc2ssIHBhdHRlcm4gfSA9IGZpZWxkO1xyXG5cclxuICAgIHJldHVybiB0aGlzLmNvbXBhcmVUbyh0eXBlLCBQb0R5bmFtaWNGaWVsZFR5cGUuTnVtYmVyKSAmJiAoIW1hc2sgJiYgIXBhdHRlcm4pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1Bhc3N3b3JkKGZpZWxkOiBQb0R5bmFtaWNGb3JtRmllbGQpIHtcclxuICAgIGNvbnN0IHsgc2VjcmV0IH0gPSBmaWVsZDtcclxuXHJcbiAgICByZXR1cm4gc2VjcmV0O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1JhZGlvR3JvdXAoZmllbGQ6IFBvRHluYW1pY0Zvcm1GaWVsZCkge1xyXG4gICAgY29uc3QgeyBvcHRpb25zTXVsdGksIG9wdGlvbnMgfSA9IGZpZWxkO1xyXG5cclxuICAgIHJldHVybiAhb3B0aW9uc011bHRpICYmICEhb3B0aW9ucyAmJiBvcHRpb25zLmxlbmd0aCA8PSAzO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpc1NlbGVjdChmaWVsZDogUG9EeW5hbWljRm9ybUZpZWxkKSB7XHJcbiAgICBjb25zdCB7IG9wdGlvbnNNdWx0aSwgb3B0aW9ucyB9ID0gZmllbGQ7XHJcblxyXG4gICAgcmV0dXJuICFvcHRpb25zTXVsdGkgJiYgISFvcHRpb25zICYmIG9wdGlvbnMubGVuZ3RoID4gMztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgaXNUZXh0YXJlYShmaWVsZDogUG9EeW5hbWljRm9ybUZpZWxkKSB7XHJcbiAgICBjb25zdCB7IHJvd3MgfSA9IGZpZWxkO1xyXG5cclxuICAgIHJldHVybiByb3dzICYmIHJvd3MgPj0gMztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgcHJpbnRFcnJvcihlcnJvcjogc3RyaW5nKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==