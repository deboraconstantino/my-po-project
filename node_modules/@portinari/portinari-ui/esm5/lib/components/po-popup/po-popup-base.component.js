import * as tslib_1 from "tslib";
import { ElementRef, Input } from '@angular/core';
import { convertToBoolean } from '../../utils/util';
import { PO_CONTROL_POSITIONS } from './../../services/po-control-position/po-control-position.constants';
var poPopupDefaultPosition = 'bottom-left';
/**
 * @description
 *
 * O componente `po-popup` é um container pequeno recomendado para ações de navegação:
 * Ele abre sobreposto aos outros componentes.
 *
 * É possível escolher as posições do `po-popup` em relação ao componente alvo, para isto veja a propriedade `p-position`.
 *
 * Também é possível informar um _template_ _header_ para o `po-popup`, que será exibido acima das ações.
 * Para funcionar corretamente é preciso adicionar a propriedade `p-popup-header-template` no elemento que servirá de template, por exemplo:
 *
 * ```
 * <po-popup [p-target]="target">
 *   <div p-popup-header-template>
 *     <div>
 *       Dev Portinari
 *     </div>
 *     <div>
 *       dev.portinari@portinari.com.br
 *     </div>
 *   </div>
 * </po-popup >
 * ```
 */
var PoPopupBaseComponent = /** @class */ (function () {
    function PoPopupBaseComponent() {
        this._hideArrow = false;
        this._isCornerAlign = false;
        this._position = poPopupDefaultPosition;
        this.arrowDirection = 'top-right';
        this.showPopup = false;
    }
    Object.defineProperty(PoPopupBaseComponent.prototype, "actions", {
        get: function () {
            return this._actions;
        },
        /** Lista de ações que serão exibidas no componente. */
        set: function (value) {
            this._actions = Array.isArray(value) ? value : [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPopupBaseComponent.prototype, "hideArrow", {
        get: function () {
            return this._hideArrow;
        },
        /**
         * @optional
         *
         * @description
         *
         * Oculta a seta do componente *popup*.
         *
         * @default `false`
         */
        set: function (value) {
            this._hideArrow = convertToBoolean(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPopupBaseComponent.prototype, "isCornerAlign", {
        get: function () {
            return this._isCornerAlign;
        },
        // Define se o `po-popup` será alinhado pelos cantos do elemento target.
        set: function (value) {
            this._isCornerAlign = convertToBoolean(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPopupBaseComponent.prototype, "position", {
        get: function () {
            return this._position;
        },
        /**
         * @optional
         *
         * @description
         *
         * Define a posição inicial que o `po-popup` abrirá em relação ao componente alvo. Sugere-se que seja
         * usada a orientação `bottom-left` (abaixo e a esquerda), porém o mesmo é flexível e será rotacionado
         * automaticamente para se adequar a tela, caso necessário.
         *
         * > Caso seja definido um `p-custom-positions` o componente irá abrir na posição definida na propriedade `p-position`
         * e caso não caiba na posição inicial ele irá rotacionar seguindo a ordem de posições definidas no `p-custom-positions`.
         *
         * Posições válidas:
         * - `right`: Posiciona o po-popup no lado direito do componente alvo.
         * - `right-bottom`: Posiciona o po-popup no lado direito inferior do componente alvo.
         * - `right-top`: Posiciona o po-popup no lado direito superior do componente alvo.
         * - `bottom`: Posiciona o po-popup abaixo do componente alvo.
         * - `bottom-left`: Posiciona o po-popup abaixo e à esquerda do componente alvo.
         * - `bottom-right`: Posiciona o po-popup abaixo e à direita do componente alvo.
         * - `left`: Posiciona o po-popup no lado esquerdo do componente alvo.
         * - `left-top`: Posiciona o po-popup no lado esquerdo superior do componente alvo.
         * - `left-bottom`: Posiciona o po-popup no lado esquerdo inferior do componente alvo.
         * - `top`: Posiciona o po-popup acima do componente alvo.
         * - `top-right`: Posiciona o po-popup acima e à direita do componente alvo.
         * - `top-left`: Posiciona o po-popup acima e à esquerda do componente alvo.
         *
         * @default `bottom-left`
         */
        set: function (value) {
            this._position = PO_CONTROL_POSITIONS.includes(value) ? value : poPopupDefaultPosition;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPopupBaseComponent.prototype, "customPositions", {
        get: function () {
            return this._customPositions;
        },
        /**
         * @optional
         *
         * @description
         *
         * Define as posições e a sequência que o `po-popup` poderá rotacionar. A sequência será definida pela ordem passada
         * no *array*. Caso não seja definido, o `po-popup` irá rotacionar em todas as posições válidas.
         *
         * > O componente sempre irá abrir na posição definida no `p-position` e caso não caiba na posição definida o mesmo
         * irá rotacionar seguindo a ordem definida pelo `p-custom-position`.
         *
         * Posições válidas:
         * - `right`: Posiciona o po-popup no lado direito do componente alvo.
         * - `right-bottom`: Posiciona o po-popup no lado direito inferior do componente alvo.
         * - `right-top`: Posiciona o po-popup no lado direito superior do componente alvo.
         * - `bottom`: Posiciona o po-popup abaixo do componente alvo.
         * - `bottom-left`: Posiciona o po-popup abaixo e à esquerda do componente alvo.
         * - `bottom-right`: Posiciona o po-popup abaixo e à direita do componente alvo.
         * - `left`: Posiciona o po-popup no lado esquerdo do componente alvo.
         * - `left-top`: Posiciona o po-popup no lado esquerdo superior do componente alvo.
         * - `left-bottom`: Posiciona o po-popup no lado esquerdo inferior do componente alvo.
         * - `top`: Posiciona o po-popup acima do componente alvo.
         * - `top-right`: Posiciona o po-popup acima e à direita do componente alvo.
         * - `top-left`: Posiciona o po-popup acima e à esquerda do componente alvo.
         */
        set: function (value) {
            this._customPositions = Array.isArray(value) ? value : [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPopupBaseComponent.prototype, "target", {
        get: function () {
            return this._target;
        },
        /**
         * @description
         *
         * Para utilizar o `po-popup` deve-se colocar uma variável local no componente que disparará o evento
         * de abertura no mesmo e com isso, invocará a função `toggle`, por exemplo:
         *
         * ```
         * <span #icon class="po-icon po-icon-credit-payment" (click)="popup.toggle()">
         *   Credit Actions
         * </span>
         *
         * <po-popup #popup
         *   [p-actions]="actions"
         *   [p-target]="icon">
         * </po-popup>
         * ```
         *
         * Caso o elemento alvo for um componente, será preciso obter o `ElementRef` do mesmo e passá-lo à propriedade, por exemplo:
         *
         * ```
         * // component.html
         *
         * <po-button #poButton
         *   p-label="Open Popover"
         *   (p-click)="popup.toggle()">
         * </po-button>
         *
         * <po-popup #popup
         *   [p-actions]="actions"
         *   [p-target]="poButtonRef">
         * </po-popup>
         *
         * // component.ts
         *
         * @ViewChild('poButton', { read: ElementRef }) poButtonRef: ElementRef;
         * ```
         */
        set: function (value) {
            this._target = (value instanceof ElementRef) ? value.nativeElement : value;
        },
        enumerable: true,
        configurable: true
    });
    tslib_1.__decorate([
        Input('p-actions'),
        tslib_1.__metadata("design:type", Array),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], PoPopupBaseComponent.prototype, "actions", null);
    tslib_1.__decorate([
        Input('p-hide-arrow'),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], PoPopupBaseComponent.prototype, "hideArrow", null);
    tslib_1.__decorate([
        Input('p-is-corner-align'),
        tslib_1.__metadata("design:type", Boolean),
        tslib_1.__metadata("design:paramtypes", [Boolean])
    ], PoPopupBaseComponent.prototype, "isCornerAlign", null);
    tslib_1.__decorate([
        Input('p-position'),
        tslib_1.__metadata("design:type", String),
        tslib_1.__metadata("design:paramtypes", [String])
    ], PoPopupBaseComponent.prototype, "position", null);
    tslib_1.__decorate([
        Input('p-custom-positions'),
        tslib_1.__metadata("design:type", Array),
        tslib_1.__metadata("design:paramtypes", [Array])
    ], PoPopupBaseComponent.prototype, "customPositions", null);
    tslib_1.__decorate([
        Input('p-target'),
        tslib_1.__metadata("design:type", Object),
        tslib_1.__metadata("design:paramtypes", [Object])
    ], PoPopupBaseComponent.prototype, "target", null);
    return PoPopupBaseComponent;
}());
export { PoPopupBaseComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcG9wdXAtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS11aS8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3BvLXBvcHVwL3BvLXBvcHVwLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVsRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNwRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxvRUFBb0UsQ0FBQztBQUkxRyxJQUFNLHNCQUFzQixHQUFHLGFBQWEsQ0FBQztBQUU3Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F1Qkc7QUFDSDtJQUFBO1FBSVUsZUFBVSxHQUFZLEtBQUssQ0FBQztRQUM1QixtQkFBYyxHQUFZLEtBQUssQ0FBQztRQUNoQyxjQUFTLEdBQVksc0JBQXNCLENBQUM7UUFHcEQsbUJBQWMsR0FBVyxXQUFXLENBQUM7UUFDckMsY0FBUyxHQUFZLEtBQUssQ0FBQztJQThKN0IsQ0FBQztJQXZKcUIsc0JBQUkseUNBQU87YUFJL0I7WUFDRSxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkIsQ0FBQztRQVBELHVEQUF1RDthQUNuQyxVQUFZLEtBQTJCO1lBQ3pELElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDcEQsQ0FBQzs7O09BQUE7SUFlc0Isc0JBQUksMkNBQVM7YUFJcEM7WUFDRSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDekIsQ0FBQztRQWZEOzs7Ozs7OztXQVFHO2FBQ29CLFVBQWMsS0FBYztZQUNqRCxJQUFJLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLENBQUM7OztPQUFBO0lBTzJCLHNCQUFJLCtDQUFhO2FBSTdDO1lBQ0UsT0FBTyxJQUFJLENBQUMsY0FBYyxDQUFDO1FBQzdCLENBQUM7UUFQRCx3RUFBd0U7YUFDNUMsVUFBa0IsS0FBYztZQUMxRCxJQUFJLENBQUMsY0FBYyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2hELENBQUM7OztPQUFBO0lBa0NvQixzQkFBSSwwQ0FBUTthQUlqQztZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDO1FBbENEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7V0EyQkc7YUFDa0IsVUFBYSxLQUFhO1lBQzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsb0JBQW9CLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLHNCQUFzQixDQUFDO1FBQ3pGLENBQUM7OztPQUFBO0lBK0I0QixzQkFBSSxpREFBZTthQUloRDtZQUNFLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO1FBQy9CLENBQUM7UUEvQkQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQXdCRzthQUMwQixVQUFvQixLQUFvQjtZQUNuRSxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDNUQsQ0FBQzs7O09BQUE7SUEyQ2tCLHNCQUFJLHdDQUFNO2FBSTdCO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7UUEzQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztXQW9DRzthQUNnQixVQUFXLEtBQVU7WUFDdEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLEtBQUssWUFBWSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQzdFLENBQUM7OztPQUFBO0lBOUltQjtRQUFuQixLQUFLLENBQUMsV0FBVyxDQUFDOzBDQUFvQixLQUFLO2lEQUFMLEtBQUs7dURBRTNDO0lBZXNCO1FBQXRCLEtBQUssQ0FBQyxjQUFjLENBQUM7Ozt5REFFckI7SUFPMkI7UUFBM0IsS0FBSyxDQUFDLG1CQUFtQixDQUFDOzs7NkRBRTFCO0lBa0NvQjtRQUFwQixLQUFLLENBQUMsWUFBWSxDQUFDOzs7d0RBRW5CO0lBK0I0QjtRQUE1QixLQUFLLENBQUMsb0JBQW9CLENBQUM7MENBQTRCLEtBQUs7aURBQUwsS0FBSzsrREFFNUQ7SUEyQ2tCO1FBQWxCLEtBQUssQ0FBQyxVQUFVLENBQUM7OztzREFFakI7SUFTSCwyQkFBQztDQUFBLEFBeEtELElBd0tDO1NBeEtZLG9CQUFvQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVsZW1lbnRSZWYsIElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xlYW4gfSBmcm9tICcuLi8uLi91dGlscy91dGlsJztcbmltcG9ydCB7IFBPX0NPTlRST0xfUE9TSVRJT05TIH0gZnJvbSAnLi8uLi8uLi9zZXJ2aWNlcy9wby1jb250cm9sLXBvc2l0aW9uL3BvLWNvbnRyb2wtcG9zaXRpb24uY29uc3RhbnRzJztcblxuaW1wb3J0IHsgUG9Qb3B1cEFjdGlvbiB9IGZyb20gJy4vcG8tcG9wdXAtYWN0aW9uLmludGVyZmFjZSc7XG5cbmNvbnN0IHBvUG9wdXBEZWZhdWx0UG9zaXRpb24gPSAnYm90dG9tLWxlZnQnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgcG8tcG9wdXBgIMOpIHVtIGNvbnRhaW5lciBwZXF1ZW5vIHJlY29tZW5kYWRvIHBhcmEgYcOnw7VlcyBkZSBuYXZlZ2HDp8OjbzpcbiAqIEVsZSBhYnJlIHNvYnJlcG9zdG8gYW9zIG91dHJvcyBjb21wb25lbnRlcy5cbiAqXG4gKiDDiSBwb3Nzw612ZWwgZXNjb2xoZXIgYXMgcG9zacOnw7VlcyBkbyBgcG8tcG9wdXBgIGVtIHJlbGHDp8OjbyBhbyBjb21wb25lbnRlIGFsdm8sIHBhcmEgaXN0byB2ZWphIGEgcHJvcHJpZWRhZGUgYHAtcG9zaXRpb25gLlxuICpcbiAqIFRhbWLDqW0gw6kgcG9zc8OtdmVsIGluZm9ybWFyIHVtIF90ZW1wbGF0ZV8gX2hlYWRlcl8gcGFyYSBvIGBwby1wb3B1cGAsIHF1ZSBzZXLDoSBleGliaWRvIGFjaW1hIGRhcyBhw6fDtWVzLlxuICogUGFyYSBmdW5jaW9uYXIgY29ycmV0YW1lbnRlIMOpIHByZWNpc28gYWRpY2lvbmFyIGEgcHJvcHJpZWRhZGUgYHAtcG9wdXAtaGVhZGVyLXRlbXBsYXRlYCBubyBlbGVtZW50byBxdWUgc2Vydmlyw6EgZGUgdGVtcGxhdGUsIHBvciBleGVtcGxvOlxuICpcbiAqIGBgYFxuICogPHBvLXBvcHVwIFtwLXRhcmdldF09XCJ0YXJnZXRcIj5cbiAqICAgPGRpdiBwLXBvcHVwLWhlYWRlci10ZW1wbGF0ZT5cbiAqICAgICA8ZGl2PlxuICogICAgICAgRGV2IFBvcnRpbmFyaVxuICogICAgIDwvZGl2PlxuICogICAgIDxkaXY+XG4gKiAgICAgICBkZXYucG9ydGluYXJpQHBvcnRpbmFyaS5jb20uYnJcbiAqICAgICA8L2Rpdj5cbiAqICAgPC9kaXY+XG4gKiA8L3BvLXBvcHVwID5cbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUG9Qb3B1cEJhc2VDb21wb25lbnQge1xuXG4gIHByaXZhdGUgX2FjdGlvbnM6IEFycmF5PFBvUG9wdXBBY3Rpb24+O1xuICBwcml2YXRlIF9jdXN0b21Qb3NpdGlvbnM/OiBBcnJheTxzdHJpbmc+O1xuICBwcml2YXRlIF9oaWRlQXJyb3c6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfaXNDb3JuZXJBbGlnbjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9wb3NpdGlvbj86IHN0cmluZyA9IHBvUG9wdXBEZWZhdWx0UG9zaXRpb247XG4gIHByaXZhdGUgX3RhcmdldDogYW55O1xuXG4gIGFycm93RGlyZWN0aW9uOiBzdHJpbmcgPSAndG9wLXJpZ2h0JztcbiAgc2hvd1BvcHVwOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHJvdGVjdGVkIG9sZFRhcmdldDtcbiAgcHJvdGVjdGVkIHBhcmFtO1xuICBwcm90ZWN0ZWQgcGFyZW50UmVmO1xuXG4gIC8qKiBMaXN0YSBkZSBhw6fDtWVzIHF1ZSBzZXLDo28gZXhpYmlkYXMgbm8gY29tcG9uZW50ZS4gKi9cbiAgQElucHV0KCdwLWFjdGlvbnMnKSBzZXQgYWN0aW9ucyh2YWx1ZTogQXJyYXk8UG9Qb3B1cEFjdGlvbj4pIHtcbiAgICB0aGlzLl9hY3Rpb25zID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdO1xuICB9XG5cbiAgZ2V0IGFjdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FjdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBPY3VsdGEgYSBzZXRhIGRvIGNvbXBvbmVudGUgKnBvcHVwKi5cbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgQElucHV0KCdwLWhpZGUtYXJyb3cnKSBzZXQgaGlkZUFycm93KHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5faGlkZUFycm93ID0gY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XG4gIH1cblxuICBnZXQgaGlkZUFycm93KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oaWRlQXJyb3c7XG4gIH1cblxuICAvLyBEZWZpbmUgc2UgbyBgcG8tcG9wdXBgIHNlcsOhIGFsaW5oYWRvIHBlbG9zIGNhbnRvcyBkbyBlbGVtZW50byB0YXJnZXQuXG4gIEBJbnB1dCgncC1pcy1jb3JuZXItYWxpZ24nKSBzZXQgaXNDb3JuZXJBbGlnbih2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuX2lzQ29ybmVyQWxpZ24gPSBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIGdldCBpc0Nvcm5lckFsaWduKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9pc0Nvcm5lckFsaWduO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIGEgcG9zacOnw6NvIGluaWNpYWwgcXVlIG8gYHBvLXBvcHVwYCBhYnJpcsOhIGVtIHJlbGHDp8OjbyBhbyBjb21wb25lbnRlIGFsdm8uIFN1Z2VyZS1zZSBxdWUgc2VqYVxuICAgKiB1c2FkYSBhIG9yaWVudGHDp8OjbyBgYm90dG9tLWxlZnRgIChhYmFpeG8gZSBhIGVzcXVlcmRhKSwgcG9yw6ltIG8gbWVzbW8gw6kgZmxleMOtdmVsIGUgc2Vyw6Egcm90YWNpb25hZG9cbiAgICogYXV0b21hdGljYW1lbnRlIHBhcmEgc2UgYWRlcXVhciBhIHRlbGEsIGNhc28gbmVjZXNzw6FyaW8uXG4gICAqXG4gICAqID4gQ2FzbyBzZWphIGRlZmluaWRvIHVtIGBwLWN1c3RvbS1wb3NpdGlvbnNgIG8gY29tcG9uZW50ZSBpcsOhIGFicmlyIG5hIHBvc2nDp8OjbyBkZWZpbmlkYSBuYSBwcm9wcmllZGFkZSBgcC1wb3NpdGlvbmBcbiAgICogZSBjYXNvIG7Do28gY2FpYmEgbmEgcG9zacOnw6NvIGluaWNpYWwgZWxlIGlyw6Egcm90YWNpb25hciBzZWd1aW5kbyBhIG9yZGVtIGRlIHBvc2nDp8O1ZXMgZGVmaW5pZGFzIG5vIGBwLWN1c3RvbS1wb3NpdGlvbnNgLlxuICAgKlxuICAgKiBQb3Npw6fDtWVzIHbDoWxpZGFzOlxuICAgKiAtIGByaWdodGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZGlyZWl0byBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYHJpZ2h0LWJvdHRvbWA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZGlyZWl0byBpbmZlcmlvciBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYHJpZ2h0LXRvcGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZGlyZWl0byBzdXBlcmlvciBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYGJvdHRvbWA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIGFiYWl4byBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYGJvdHRvbS1sZWZ0YDogUG9zaWNpb25hIG8gcG8tcG9wdXAgYWJhaXhvIGUgw6AgZXNxdWVyZGEgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGBib3R0b20tcmlnaHRgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBhYmFpeG8gZSDDoCBkaXJlaXRhIGRvIGNvbXBvbmVudGUgYWx2by5cbiAgICogLSBgbGVmdGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZXNxdWVyZG8gZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGBsZWZ0LXRvcGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZXNxdWVyZG8gc3VwZXJpb3IgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGBsZWZ0LWJvdHRvbWA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIG5vIGxhZG8gZXNxdWVyZG8gaW5mZXJpb3IgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGB0b3BgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBhY2ltYSBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYHRvcC1yaWdodGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIGFjaW1hIGUgw6AgZGlyZWl0YSBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYHRvcC1sZWZ0YDogUG9zaWNpb25hIG8gcG8tcG9wdXAgYWNpbWEgZSDDoCBlc3F1ZXJkYSBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqXG4gICAqIEBkZWZhdWx0IGBib3R0b20tbGVmdGBcbiAgICovXG4gIEBJbnB1dCgncC1wb3NpdGlvbicpIHNldCBwb3NpdGlvbih2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fcG9zaXRpb24gPSBQT19DT05UUk9MX1BPU0lUSU9OUy5pbmNsdWRlcyh2YWx1ZSkgPyB2YWx1ZSA6IHBvUG9wdXBEZWZhdWx0UG9zaXRpb247XG4gIH1cblxuICBnZXQgcG9zaXRpb24oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmUgYXMgcG9zacOnw7VlcyBlIGEgc2VxdcOqbmNpYSBxdWUgbyBgcG8tcG9wdXBgIHBvZGVyw6Egcm90YWNpb25hci4gQSBzZXF1w6puY2lhIHNlcsOhIGRlZmluaWRhIHBlbGEgb3JkZW0gcGFzc2FkYVxuICAgKiBubyAqYXJyYXkqLiBDYXNvIG7Do28gc2VqYSBkZWZpbmlkbywgbyBgcG8tcG9wdXBgIGlyw6Egcm90YWNpb25hciBlbSB0b2RhcyBhcyBwb3Npw6fDtWVzIHbDoWxpZGFzLlxuICAgKlxuICAgKiA+IE8gY29tcG9uZW50ZSBzZW1wcmUgaXLDoSBhYnJpciBuYSBwb3Npw6fDo28gZGVmaW5pZGEgbm8gYHAtcG9zaXRpb25gIGUgY2FzbyBuw6NvIGNhaWJhIG5hIHBvc2nDp8OjbyBkZWZpbmlkYSBvIG1lc21vXG4gICAqIGlyw6Egcm90YWNpb25hciBzZWd1aW5kbyBhIG9yZGVtIGRlZmluaWRhIHBlbG8gYHAtY3VzdG9tLXBvc2l0aW9uYC5cbiAgICpcbiAgICogUG9zacOnw7VlcyB2w6FsaWRhczpcbiAgICogLSBgcmlnaHRgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGRpcmVpdG8gZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGByaWdodC1ib3R0b21gOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGRpcmVpdG8gaW5mZXJpb3IgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGByaWdodC10b3BgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGRpcmVpdG8gc3VwZXJpb3IgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGBib3R0b21gOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBhYmFpeG8gZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGBib3R0b20tbGVmdGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIGFiYWl4byBlIMOgIGVzcXVlcmRhIGRvIGNvbXBvbmVudGUgYWx2by5cbiAgICogLSBgYm90dG9tLXJpZ2h0YDogUG9zaWNpb25hIG8gcG8tcG9wdXAgYWJhaXhvIGUgw6AgZGlyZWl0YSBkbyBjb21wb25lbnRlIGFsdm8uXG4gICAqIC0gYGxlZnRgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGVzcXVlcmRvIGRvIGNvbXBvbmVudGUgYWx2by5cbiAgICogLSBgbGVmdC10b3BgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGVzcXVlcmRvIHN1cGVyaW9yIGRvIGNvbXBvbmVudGUgYWx2by5cbiAgICogLSBgbGVmdC1ib3R0b21gOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBubyBsYWRvIGVzcXVlcmRvIGluZmVyaW9yIGRvIGNvbXBvbmVudGUgYWx2by5cbiAgICogLSBgdG9wYDogUG9zaWNpb25hIG8gcG8tcG9wdXAgYWNpbWEgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGB0b3AtcmlnaHRgOiBQb3NpY2lvbmEgbyBwby1wb3B1cCBhY2ltYSBlIMOgIGRpcmVpdGEgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKiAtIGB0b3AtbGVmdGA6IFBvc2ljaW9uYSBvIHBvLXBvcHVwIGFjaW1hIGUgw6AgZXNxdWVyZGEgZG8gY29tcG9uZW50ZSBhbHZvLlxuICAgKi9cbiAgQElucHV0KCdwLWN1c3RvbS1wb3NpdGlvbnMnKSBzZXQgY3VzdG9tUG9zaXRpb25zKHZhbHVlOiBBcnJheTxzdHJpbmc+KSB7XG4gICAgdGhpcy5fY3VzdG9tUG9zaXRpb25zID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IFtdO1xuICB9XG5cbiAgZ2V0IGN1c3RvbVBvc2l0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VzdG9tUG9zaXRpb25zO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBQYXJhIHV0aWxpemFyIG8gYHBvLXBvcHVwYCBkZXZlLXNlIGNvbG9jYXIgdW1hIHZhcmnDoXZlbCBsb2NhbCBubyBjb21wb25lbnRlIHF1ZSBkaXNwYXJhcsOhIG8gZXZlbnRvXG4gICAqIGRlIGFiZXJ0dXJhIG5vIG1lc21vIGUgY29tIGlzc28sIGludm9jYXLDoSBhIGZ1bsOnw6NvIGB0b2dnbGVgLCBwb3IgZXhlbXBsbzpcbiAgICpcbiAgICogYGBgXG4gICAqIDxzcGFuICNpY29uIGNsYXNzPVwicG8taWNvbiBwby1pY29uLWNyZWRpdC1wYXltZW50XCIgKGNsaWNrKT1cInBvcHVwLnRvZ2dsZSgpXCI+XG4gICAqICAgQ3JlZGl0IEFjdGlvbnNcbiAgICogPC9zcGFuPlxuICAgKlxuICAgKiA8cG8tcG9wdXAgI3BvcHVwXG4gICAqICAgW3AtYWN0aW9uc109XCJhY3Rpb25zXCJcbiAgICogICBbcC10YXJnZXRdPVwiaWNvblwiPlxuICAgKiA8L3BvLXBvcHVwPlxuICAgKiBgYGBcbiAgICpcbiAgICogQ2FzbyBvIGVsZW1lbnRvIGFsdm8gZm9yIHVtIGNvbXBvbmVudGUsIHNlcsOhIHByZWNpc28gb2J0ZXIgbyBgRWxlbWVudFJlZmAgZG8gbWVzbW8gZSBwYXNzw6EtbG8gw6AgcHJvcHJpZWRhZGUsIHBvciBleGVtcGxvOlxuICAgKlxuICAgKiBgYGBcbiAgICogLy8gY29tcG9uZW50Lmh0bWxcbiAgICpcbiAgICogPHBvLWJ1dHRvbiAjcG9CdXR0b25cbiAgICogICBwLWxhYmVsPVwiT3BlbiBQb3BvdmVyXCJcbiAgICogICAocC1jbGljayk9XCJwb3B1cC50b2dnbGUoKVwiPlxuICAgKiA8L3BvLWJ1dHRvbj5cbiAgICpcbiAgICogPHBvLXBvcHVwICNwb3B1cFxuICAgKiAgIFtwLWFjdGlvbnNdPVwiYWN0aW9uc1wiXG4gICAqICAgW3AtdGFyZ2V0XT1cInBvQnV0dG9uUmVmXCI+XG4gICAqIDwvcG8tcG9wdXA+XG4gICAqXG4gICAqIC8vIGNvbXBvbmVudC50c1xuICAgKlxuICAgKiBAVmlld0NoaWxkKCdwb0J1dHRvbicsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBwb0J1dHRvblJlZjogRWxlbWVudFJlZjtcbiAgICogYGBgXG4gICAqL1xuICBASW5wdXQoJ3AtdGFyZ2V0Jykgc2V0IHRhcmdldCh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5fdGFyZ2V0ID0gKHZhbHVlIGluc3RhbmNlb2YgRWxlbWVudFJlZikgPyB2YWx1ZS5uYXRpdmVFbGVtZW50IDogdmFsdWU7XG4gIH1cblxuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgY2xpY2tvdXRMaXN0ZW5lcjogKCkgPT4gdm9pZDtcbiAgcHJvdGVjdGVkIHJlc2l6ZUxpc3RlbmVyOiAoKSA9PiB2b2lkO1xuXG59XG4iXX0=