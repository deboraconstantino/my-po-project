/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { map } from 'rxjs/operators';
var PoPageDynamicService = /** @class */ (function () {
    function PoPageDynamicService(http) {
        this.http = http;
        this.endpoint = '/';
        this.headers = new HttpHeaders({
            'X-PORTINARI-SCREEN-LOCK': 'true'
        });
    }
    /**
     * @param {?=} config
     * @return {?}
     */
    PoPageDynamicService.prototype.configServiceApi = /**
     * @param {?=} config
     * @return {?}
     */
    function (config) {
        if (config === void 0) { config = {}; }
        this.endpoint = config.endpoint;
        this.metadata = config.metadata || this.metadata;
    };
    /**
     * @param {?=} type
     * @return {?}
     */
    PoPageDynamicService.prototype.getMetadata = /**
     * @param {?=} type
     * @return {?}
     */
    function (type) {
        if (type === void 0) { type = 'list'; }
        /** @type {?} */
        var key = this.endpoint + "-" + type + "-metadata";
        /** @type {?} */
        var cache = JSON.parse(localStorage.getItem(key)) || {};
        /** @type {?} */
        var metadataUrlBase = this.metadata || this.endpoint + "/metadata";
        /** @type {?} */
        var url = metadataUrlBase + "?type=" + type + "&version=" + (cache.version || '');
        return this.http.get(url).pipe(map((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            if (response.version === cache.version) {
                return cache;
            }
            localStorage.setItem(key, JSON.stringify(response));
            return tslib_1.__assign({}, cache, response);
        })));
    };
    // Deleta um único recurso
    // Deleta um único recurso
    /**
     * @param {?} id
     * @return {?}
     */
    PoPageDynamicService.prototype.deleteResource = 
    // Deleta um único recurso
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.http.delete(this.endpoint + "/" + id, { headers: this.headers });
    };
    // Deleta recursos em lote
    // Deleta recursos em lote
    /**
     * @param {?} ids
     * @return {?}
     */
    PoPageDynamicService.prototype.deleteResources = 
    // Deleta recursos em lote
    /**
     * @param {?} ids
     * @return {?}
     */
    function (ids) {
        return this.http.request('delete', "" + this.endpoint, { headers: this.headers, body: ids });
    };
    // Busca uma lista de recursos
    // Busca uma lista de recursos
    /**
     * @param {?=} params
     * @return {?}
     */
    PoPageDynamicService.prototype.getResources = 
    // Busca uma lista de recursos
    /**
     * @param {?=} params
     * @return {?}
     */
    function (params) {
        if (params === void 0) { params = {}; }
        return this.http.get(this.endpoint, { headers: this.headers, params: params });
    };
    // Busca um único recurso
    // Busca um único recurso
    /**
     * @param {?} id
     * @return {?}
     */
    PoPageDynamicService.prototype.getResource = 
    // Busca um único recurso
    /**
     * @param {?} id
     * @return {?}
     */
    function (id) {
        return this.http.get(this.endpoint + "/" + id, { headers: this.headers });
    };
    // Cria um recurso
    // Cria um recurso
    /**
     * @param {?} resource
     * @return {?}
     */
    PoPageDynamicService.prototype.createResource = 
    // Cria um recurso
    /**
     * @param {?} resource
     * @return {?}
     */
    function (resource) {
        return this.http.post("" + this.endpoint, resource, { headers: this.headers });
    };
    // Atualiza um recurso
    // Atualiza um recurso
    /**
     * @param {?} id
     * @param {?} resource
     * @return {?}
     */
    PoPageDynamicService.prototype.updateResource = 
    // Atualiza um recurso
    /**
     * @param {?} id
     * @param {?} resource
     * @return {?}
     */
    function (id, resource) {
        return this.http.put(this.endpoint + "/" + id, resource, { headers: this.headers });
    };
    PoPageDynamicService.decorators = [
        { type: Injectable }
    ];
    /** @nocollapse */
    PoPageDynamicService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    return PoPageDynamicService;
}());
export { PoPageDynamicService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    PoPageDynamicService.prototype.endpoint;
    /**
     * @type {?}
     * @private
     */
    PoPageDynamicService.prototype.metadata;
    /** @type {?} */
    PoPageDynamicService.prototype.headers;
    /**
     * @type {?}
     * @private
     */
    PoPageDynamicService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1keW5hbWljLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wby1wYWdlLWR5bmFtaWMtZWRpdC9wby1wYWdlLWR5bmFtaWMuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUcvRCxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFckM7SUFVRSw4QkFBb0IsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQVA1QixhQUFRLEdBQUcsR0FBRyxDQUFDO1FBR2QsWUFBTyxHQUFnQixJQUFJLFdBQVcsQ0FBQztZQUM5Qyx5QkFBeUIsRUFBRSxNQUFNO1NBQ2xDLENBQUMsQ0FBQztJQUVxQyxDQUFDOzs7OztJQUV6QywrQ0FBZ0I7Ozs7SUFBaEIsVUFBaUIsTUFBcUQ7UUFBckQsdUJBQUEsRUFBQSxXQUFxRDtRQUNwRSxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDaEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDbkQsQ0FBQzs7Ozs7SUFFRCwwQ0FBVzs7OztJQUFYLFVBQVksSUFBcUI7UUFBckIscUJBQUEsRUFBQSxhQUFxQjs7WUFDekIsR0FBRyxHQUFNLElBQUksQ0FBQyxRQUFRLFNBQUksSUFBSSxjQUFXOztZQUN6QyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRTs7WUFDbkQsZUFBZSxHQUFHLElBQUksQ0FBQyxRQUFRLElBQU8sSUFBSSxDQUFDLFFBQVEsY0FBVzs7WUFFOUQsR0FBRyxHQUFNLGVBQWUsY0FBUyxJQUFJLGtCQUFZLEtBQUssQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFFO1FBRTVFLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUc7Ozs7UUFBQyxVQUFDLFFBQWE7WUFDL0MsSUFBSSxRQUFRLENBQUMsT0FBTyxLQUFLLEtBQUssQ0FBQyxPQUFPLEVBQUU7Z0JBQ3RDLE9BQU8sS0FBSyxDQUFDO2FBQ2Q7WUFFRCxZQUFZLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFFcEQsNEJBQWEsS0FBSyxFQUFLLFFBQVEsRUFBRztRQUNwQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ04sQ0FBQztJQUVELDBCQUEwQjs7Ozs7O0lBQzFCLDZDQUFjOzs7Ozs7SUFBZCxVQUFlLEVBQUU7UUFDZixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFJLElBQUksQ0FBQyxRQUFRLFNBQUksRUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFFRCwwQkFBMEI7Ozs7OztJQUMxQiw4Q0FBZTs7Ozs7O0lBQWYsVUFBZ0IsR0FBZTtRQUM3QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxLQUFHLElBQUksQ0FBQyxRQUFVLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLENBQUUsQ0FBQztJQUNoRyxDQUFDO0lBRUQsOEJBQThCOzs7Ozs7SUFDOUIsMkNBQVk7Ozs7OztJQUFaLFVBQWEsTUFBZTtRQUFmLHVCQUFBLEVBQUEsV0FBZTtRQUMxQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLFFBQUEsRUFBRSxDQUFDLENBQUM7SUFDekUsQ0FBQztJQUVELHlCQUF5Qjs7Ozs7O0lBQ3pCLDBDQUFXOzs7Ozs7SUFBWCxVQUFZLEVBQUU7UUFDWixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFJLElBQUksQ0FBQyxRQUFRLFNBQUksRUFBSSxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQzVFLENBQUM7SUFFRCxrQkFBa0I7Ozs7OztJQUNsQiw2Q0FBYzs7Ozs7O0lBQWQsVUFBZSxRQUFRO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBRyxJQUFJLENBQUMsUUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBRUQsc0JBQXNCOzs7Ozs7O0lBQ3RCLDZDQUFjOzs7Ozs7O0lBQWQsVUFBZSxFQUFFLEVBQUUsUUFBUTtRQUN6QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFJLElBQUksQ0FBQyxRQUFRLFNBQUksRUFBSSxFQUFFLFFBQVEsRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztJQUN0RixDQUFDOztnQkEvREYsVUFBVTs7OztnQkFMRixVQUFVOztJQXFFbkIsMkJBQUM7Q0FBQSxBQWhFRCxJQWdFQztTQS9EWSxvQkFBb0I7Ozs7OztJQUUvQix3Q0FBdUI7Ozs7O0lBQ3ZCLHdDQUF5Qjs7SUFFekIsdUNBRUc7Ozs7O0lBRVMsb0NBQXdCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIFBvUGFnZUR5bmFtaWNTZXJ2aWNlIHtcblxuICBwcml2YXRlIGVuZHBvaW50ID0gJy8nO1xuICBwcml2YXRlIG1ldGFkYXRhOiBzdHJpbmc7XG5cbiAgcmVhZG9ubHkgaGVhZGVyczogSHR0cEhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoe1xuICAgICdYLVBPUlRJTkFSSS1TQ1JFRU4tTE9DSyc6ICd0cnVlJ1xuICB9KTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQpIHsgfVxuXG4gIGNvbmZpZ1NlcnZpY2VBcGkoY29uZmlnOiB7IGVuZHBvaW50Pzogc3RyaW5nLCBtZXRhZGF0YT86IHN0cmluZyB9ID0ge30pIHtcbiAgICB0aGlzLmVuZHBvaW50ID0gY29uZmlnLmVuZHBvaW50O1xuICAgIHRoaXMubWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgfHwgdGhpcy5tZXRhZGF0YTtcbiAgfVxuXG4gIGdldE1ldGFkYXRhKHR5cGU6IHN0cmluZyA9ICdsaXN0Jyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgY29uc3Qga2V5ID0gYCR7dGhpcy5lbmRwb2ludH0tJHt0eXBlfS1tZXRhZGF0YWA7XG4gICAgY29uc3QgY2FjaGUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpIHx8IHt9O1xuICAgIGNvbnN0IG1ldGFkYXRhVXJsQmFzZSA9IHRoaXMubWV0YWRhdGEgfHwgYCR7dGhpcy5lbmRwb2ludH0vbWV0YWRhdGFgO1xuXG4gICAgY29uc3QgdXJsID0gYCR7bWV0YWRhdGFVcmxCYXNlfT90eXBlPSR7dHlwZX0mdmVyc2lvbj0ke2NhY2hlLnZlcnNpb24gfHwgJyd9YDtcblxuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCkucGlwZShtYXAoKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgIGlmIChyZXNwb25zZS52ZXJzaW9uID09PSBjYWNoZS52ZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiBjYWNoZTtcbiAgICAgIH1cblxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuXG4gICAgICByZXR1cm4gIHsgLi4uY2FjaGUsIC4uLnJlc3BvbnNlIH07XG4gICAgfSkpO1xuICB9XG5cbiAgLy8gRGVsZXRhIHVtIMO6bmljbyByZWN1cnNvXG4gIGRlbGV0ZVJlc291cmNlKGlkKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZShgJHt0aGlzLmVuZHBvaW50fS8ke2lkfWAsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICB9XG5cbiAgLy8gRGVsZXRhIHJlY3Vyc29zIGVtIGxvdGVcbiAgZGVsZXRlUmVzb3VyY2VzKGlkczogQXJyYXk8YW55Pik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5yZXF1ZXN0KCdkZWxldGUnLCBgJHt0aGlzLmVuZHBvaW50fWAsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzLCBib2R5OiBpZHMgfSApO1xuICB9XG5cbiAgLy8gQnVzY2EgdW1hIGxpc3RhIGRlIHJlY3Vyc29zXG4gIGdldFJlc291cmNlcyhwYXJhbXM6IHt9ID0ge30pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0KHRoaXMuZW5kcG9pbnQsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzLCBwYXJhbXMgfSk7XG4gIH1cblxuICAvLyBCdXNjYSB1bSDDum5pY28gcmVjdXJzb1xuICBnZXRSZXNvdXJjZShpZCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQoYCR7dGhpcy5lbmRwb2ludH0vJHtpZH1gLCB7IGhlYWRlcnM6IHRoaXMuaGVhZGVycyB9KTtcbiAgfVxuXG4gIC8vIENyaWEgdW0gcmVjdXJzb1xuICBjcmVhdGVSZXNvdXJjZShyZXNvdXJjZSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMuaHR0cC5wb3N0KGAke3RoaXMuZW5kcG9pbnR9YCwgcmVzb3VyY2UsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICB9XG5cbiAgLy8gQXR1YWxpemEgdW0gcmVjdXJzb1xuICB1cGRhdGVSZXNvdXJjZShpZCwgcmVzb3VyY2UpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiB0aGlzLmh0dHAucHV0KGAke3RoaXMuZW5kcG9pbnR9LyR7aWR9YCwgcmVzb3VyY2UsIHsgaGVhZGVyczogdGhpcy5oZWFkZXJzIH0pO1xuICB9XG59XG4iXX0=