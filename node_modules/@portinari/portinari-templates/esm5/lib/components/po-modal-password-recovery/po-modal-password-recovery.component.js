/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewChild } from '@angular/core';
import { NgForm } from '@angular/forms';
import { Router } from '@angular/router';
import { isExternalLink } from '../../utils/util';
import { PoI18nPipe, PoModalComponent } from '@portinari/portinari-ui';
import { PoModalPasswordRecoveryBaseComponent } from './po-modal-password-recovery-base.component';
import { PoModalPasswordRecoveryModalContent } from './enums/po-modal-password-recovery-modal-content.enum';
import { PoModalPasswordRecoveryService } from './po-modal-password-recovery.service';
import { PoModalPasswordRecoveryType } from './enums/po-modal-password-recovery-type.enum';
/**
 * \@docsExtends PoModalPasswordRecoveryBaseComponent
 *
 * \@example
 *
 * <example name="po-modal-password-recovery-basic" title="Portinari Modal Password Recovery Basic">
 *  <file name="sample-po-modal-password-recovery-basic/sample-po-modal-password-recovery-basic.component.html"> </file>
 *  <file name="sample-po-modal-password-recovery-basic/sample-po-modal-password-recovery-basic.component.ts"> </file>
 * </example>
 *
 * <example name="po-modal-password-recovery-labs" title="Portinari Modal Password Recovery Labs">
 *  <file name="sample-po-modal-password-recovery-labs/sample-po-modal-password-recovery-labs.component.html"> </file>
 *  <file name="sample-po-modal-password-recovery-labs/sample-po-modal-password-recovery-labs.component.ts"> </file>
 * </example>
 *
 * <example name="po-modal-password-recovery-request" title="Portinari Modal Password Recovery Request">
 *  <file name="sample-po-modal-password-recovery-request/sample-po-modal-password-recovery-request.component.html"> </file>
 *  <file name="sample-po-modal-password-recovery-request/sample-po-modal-password-recovery-request.component.ts"> </file>
 * </example>
 */
var PoModalPasswordRecoveryComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PoModalPasswordRecoveryComponent, _super);
    function PoModalPasswordRecoveryComponent(router, poI18nPipe, poModalPasswordRecoveryService) {
        var _this = _super.call(this) || this;
        _this.router = router;
        _this.poI18nPipe = poI18nPipe;
        _this.poModalPasswordRecoveryService = poModalPasswordRecoveryService;
        _this.chosenTypeFormOption = PoModalPasswordRecoveryType.Email;
        _this.codeMask = '9 9 9 9 9 9';
        _this.emailModal = true;
        _this.emailModalPhrases = { firstPhrase: (/** @type {?} */ (null)), secondPhrase: (/** @type {?} */ (null)) };
        _this.endpoint = '.';
        _this.invalidCode = false;
        _this.invalidEmail = false;
        _this.modalType = PoModalPasswordRecoveryModalContent.Email;
        _this.submittedCodeValue = (/** @type {?} */ ({}));
        _this.submittedContactValue = (/** @type {?} */ ({}));
        _this.primaryAction = { label: undefined, action: (/**
             * @return {?}
             */
            function () { }) };
        _this.secondaryAction = { label: undefined, action: (/**
             * @return {?}
             */
            function () { }) };
        _this.typeFormOptions = [
            { label: 'e-mail', value: PoModalPasswordRecoveryType.Email },
            { label: 'SMS', value: PoModalPasswordRecoveryType.SMS }
        ];
        return _this;
    }
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.passwordRecoverySubscription) {
            this.passwordRecoverySubscription.unsubscribe();
        }
        if (this.smsCodeSubscription) {
            this.smsCodeSubscription.unsubscribe();
        }
    };
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.completed = /**
     * @return {?}
     */
    function () {
        this.cancelAction();
    };
    /**
     * @param {?} form
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.formModelChangesCheck = /**
     * @param {?} form
     * @return {?}
     */
    function (form) {
        /** @type {?} */
        var invalidForm = form.invalid;
        this.invalidEmail = invalidForm && form.dirty;
        this.primaryAction.disabled = invalidForm;
        if (this.modalType === PoModalPasswordRecoveryModalContent.SMSCode) {
            /** @type {?} */
            var codeError = this.codeError !== undefined && this.codeError !== '';
            this.showCustomCodeError = codeError && form.pristine;
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.getInputType = /**
     * @param {?} type
     * @return {?}
     */
    function (type) {
        var _this = this;
        this.type = type;
        this.pipeModalPhrases();
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.control = _this.emailForm.controls[type];
            _this.formModelChangesCheck(_this.emailForm);
            _this.resetFormFields(_this.control);
        }));
    };
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.open = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var control = this.checkFormType(this.type);
        this.control = this.emailForm.controls[control];
        this.setEmailModalPhrasesAndActions();
        this.formModelChangesCheck(this.emailForm);
        this.recoveryModalElement.open();
    };
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.openConfirmation = /**
     * @return {?}
     */
    function () {
        this.modalTitle = this.literals.emailSentTitle;
        this.modalType = PoModalPasswordRecoveryModalContent.Confirmation;
        this.setActions(this.cancelAction, this.literals.closeButton, this.submitAction, this.literals.resendEmailButton, false);
    };
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.openSmsCode = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.modalTitle = this.literals.typeCodeTitle;
        this.modalType = PoModalPasswordRecoveryModalContent.SMSCode;
        this.setActions(this.submitSmsCodeAction, this.literals.continueButton, this.cancelAction, this.literals.cancelButton, true);
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.control = _this.smsCodeForm.controls['sms'];
            _this.formModelChangesCheck(_this.smsCodeForm);
        }));
    };
    /**
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.resendSmsCode = /**
     * @return {?}
     */
    function () {
        this.incrementRetryAttempts();
        if (this.urlRecovery) {
            this.submitActionRequest(this.submittedContactValue, this.type);
        }
        else {
            this.submit.emit(this.submittedContactValue);
        }
    };
    /**
     * @private
     * @param {?} responseObj
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.assignSmsResponse = /**
     * @private
     * @param {?} responseObj
     * @return {?}
     */
    function (responseObj) {
        this.smsBodyResponse = Object.assign({}, { hash: responseObj.hash });
        if (responseObj.urlValidationCode) {
            this.smsBodyResponse = Object.assign(this.smsBodyResponse, { urlValidationCode: responseObj.urlValidationCode });
        }
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.cancelAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.resetFormFields(this.control);
        this.submittedContactValue = {};
        this.chosenTypeFormOption = PoModalPasswordRecoveryType.Email;
        this.modalType = PoModalPasswordRecoveryModalContent.Email;
        this.type = this.modalPasswordRecoveryTypeAll ? PoModalPasswordRecoveryType.All : this.type;
        this.recoveryModalElement.close();
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.checkFormType = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type !== PoModalPasswordRecoveryType.All ? type : PoModalPasswordRecoveryType.Email;
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.formReset = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        control.markAsPristine();
        control.markAsUntouched();
        control.updateValueAndValidity();
    };
    /**
     * @private
     * @param {?} type
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.getEmitValue = /**
     * @private
     * @param {?} type
     * @return {?}
     */
    function (type) {
        return type === PoModalPasswordRecoveryType.SMS ? this.phone : this.email;
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.incrementRetryAttempts = /**
     * @private
     * @return {?}
     */
    function () {
        this.submittedContactValue.retry = (this.submittedContactValue.retry + 1 || 1);
    };
    /**
     * @private
     * @param {?} url
     * @param {?} queryParam
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.openExternalLink = /**
     * @private
     * @param {?} url
     * @param {?} queryParam
     * @return {?}
     */
    function (url, queryParam) {
        window.open(url + "?token=" + queryParam, '_self');
    };
    /**
     * @private
     * @param {?} url
     * @param {?} endpoint
     * @param {?} queryParam
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.openInternalLink = /**
     * @private
     * @param {?} url
     * @param {?} endpoint
     * @param {?} queryParam
     * @return {?}
     */
    function (url, endpoint, queryParam) {
        this.router.navigate([url + "/" + endpoint], { queryParams: { token: queryParam } });
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.pipeModalPhrases = /**
     * @private
     * @return {?}
     */
    function () {
        if (this.type === PoModalPasswordRecoveryType.SMS) {
            this.emailModalPhrases.firstPhrase = this.setPipeArguments(this.literals.recoveryPasswordPhrase, this.literals.sms);
            this.emailModalPhrases.secondPhrase = this.setPipeArguments(this.literals.supportContact, this.literals.telephone);
        }
        else {
            this.emailModalPhrases.firstPhrase = this.setPipeArguments(this.literals.recoveryPasswordPhrase, this.literals.email);
            this.emailModalPhrases.secondPhrase = this.setPipeArguments(this.literals.supportContact, this.literals.email);
        }
    };
    /**
     * @private
     * @param {?} recoveryToken
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.redirectToChangePassword = /**
     * @private
     * @param {?} recoveryToken
     * @return {?}
     */
    function (recoveryToken) {
        /** @type {?} */
        var urlChangePassword = recoveryToken.urlChangePassword;
        if (urlChangePassword) {
            isExternalLink(urlChangePassword) ?
                this.openExternalLink(urlChangePassword, recoveryToken.token) :
                this.openInternalLink(this.urlRecovery, urlChangePassword, recoveryToken.token);
        }
        else {
            /** @type {?} */
            var changePasswordEndpoint = 'changePassword';
            this.openInternalLink(this.urlRecovery, changePasswordEndpoint, recoveryToken.token);
        }
    };
    /**
     * @private
     * @param {?} control
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.resetFormFields = /**
     * @private
     * @param {?} control
     * @return {?}
     */
    function (control) {
        this.formReset(control);
        this.email = undefined;
        this.phone = undefined;
        this.smsCode = undefined;
    };
    /**
     * @private
     * @param {?} primaryAction
     * @param {?} primarylabel
     * @param {?} secondaryAction
     * @param {?} secondaryLabel
     * @param {?} disabled
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.setActions = /**
     * @private
     * @param {?} primaryAction
     * @param {?} primarylabel
     * @param {?} secondaryAction
     * @param {?} secondaryLabel
     * @param {?} disabled
     * @return {?}
     */
    function (primaryAction, primarylabel, secondaryAction, secondaryLabel, disabled) {
        var _this = this;
        this.primaryAction.action = (/**
         * @return {?}
         */
        function () { return primaryAction.call(_this); });
        this.primaryAction.label = primarylabel;
        this.secondaryAction.action = (/**
         * @return {?}
         */
        function () { return secondaryAction.call(_this); });
        this.secondaryAction.label = secondaryLabel;
        this.primaryAction.disabled = disabled;
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.setEmailModalPhrasesAndActions = /**
     * @private
     * @return {?}
     */
    function () {
        this.modalTitle = this.literals.forgotPasswordTitle;
        this.pipeModalPhrases();
        this.modalPasswordRecoveryTypeAll = this.type === PoModalPasswordRecoveryType.All;
        this.setActions(this.submitAction, this.literals.sendButton, this.cancelAction, this.literals.cancelButton, true);
    };
    /**
     * @private
     * @param {?=} urlValidationCode
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.setRequestEndpoint = /**
     * @private
     * @param {?=} urlValidationCode
     * @return {?}
     */
    function (urlValidationCode) {
        /** @type {?} */
        var endpoint = urlValidationCode || 'validation';
        return this.urlRecovery + "/" + endpoint;
    };
    /**
     * @private
     * @param {?} literalAttr
     * @param {?} arg
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.setPipeArguments = /**
     * @private
     * @param {?} literalAttr
     * @param {?} arg
     * @return {?}
     */
    function (literalAttr, arg) {
        return this.poI18nPipe.transform(literalAttr, arg);
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.submitAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.modalType === PoModalPasswordRecoveryModalContent.Confirmation ? this.incrementRetryAttempts() : this.formReset(this.control);
        this.submittedContactValue[this.checkFormType(this.type)] = this.getEmitValue(this.type);
        if (this.urlRecovery) {
            this.submitActionRequest(this.submittedContactValue, this.type);
        }
        else {
            this.submit.emit(this.submittedContactValue);
        }
    };
    /**
     * @private
     * @param {?} data
     * @param {?} modalType
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.submitActionRequest = /**
     * @private
     * @param {?} data
     * @param {?} modalType
     * @return {?}
     */
    function (data, modalType) {
        var _this = this;
        /** @type {?} */
        var params = modalType === PoModalPasswordRecoveryType.SMS ? { type: 'sms' } : undefined;
        this.passwordRecoverySubscription =
            this.poModalPasswordRecoveryService.post(this.urlRecovery, data, params)
                .subscribe((/**
             * @param {?} response
             * @return {?}
             */
            function (response) {
                if ((modalType === PoModalPasswordRecoveryType.Email || modalType === PoModalPasswordRecoveryType.All) && response.status === 204) {
                    _this.openConfirmation();
                }
                else if (modalType === PoModalPasswordRecoveryType.SMS && response.status === 200) {
                    _this.assignSmsResponse(response.body);
                    _this.openSmsCode();
                }
            }));
    };
    /**
     * @private
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.submitSmsCodeAction = /**
     * @private
     * @return {?}
     */
    function () {
        this.submittedCodeValue.code = this.smsCode;
        if (this.urlRecovery) {
            this.submittedCodeValue = Object.assign(this.submittedCodeValue, { hash: this.smsBodyResponse.hash });
            this.submitSmsCodeRequest(this.submittedCodeValue);
        }
        else {
            this.codeSubmit.emit(this.submittedCodeValue);
        }
        this.resetFormFields(this.control);
    };
    /**
     * @private
     * @param {?} data
     * @return {?}
     */
    PoModalPasswordRecoveryComponent.prototype.submitSmsCodeRequest = /**
     * @private
     * @param {?} data
     * @return {?}
     */
    function (data) {
        var _this = this;
        this.smsCodeSubscription = this.poModalPasswordRecoveryService
            .post(this.setRequestEndpoint(this.smsBodyResponse.urlValidationCode), data)
            .subscribe((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            /** @type {?} */
            var successStatus = response.status === 200;
            if (successStatus) {
                _this.completed();
                _this.redirectToChangePassword(response.body);
            }
        }), (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.codeError = error.error.message;
            _this.openSmsCode();
        }));
    };
    PoModalPasswordRecoveryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'po-modal-password-recovery',
                    template: "<po-modal #recoveryModal\r\n  p-hide-close\r\n  p-size=\"auto\"\r\n  [ngSwitch]=\"modalType\"\r\n  [p-primary-action]=\"primaryAction\"\r\n  [p-secondary-action]=\"secondaryAction\"\r\n  [p-title]=\"modalTitle\"> \r\n  <div class=\"po-modal-password-recovery-wrapper\">\r\n    <div *ngSwitchCase=\"'email'\" class=\"po-modal-password-recovery-content po-row\">\r\n      <div class=\"po-modal-password-recovery-text po-md-12 po-mb-1\">\r\n        {{ emailModalPhrases.firstPhrase }}\r\n      </div>\r\n      <div class=\"po-mb-2 po-md-12\">\r\n        <form #emailForm=\"ngForm\">\r\n\r\n          <div *ngIf=\"modalPasswordRecoveryTypeAll\">\r\n            <po-radio-group \r\n              name=\"type\"\r\n              [(ngModel)]=\"chosenTypeFormOption\"\r\n              [p-options]=\"typeFormOptions\"\r\n              (p-change)=\"getInputType($event)\">\r\n            </po-radio-group>\r\n          </div>\r\n\r\n          <div class=\"po-mt-1\">\r\n            <po-email *ngIf=\"type === 'email' || type === 'all'\"\r\n              name=\"email\"\r\n              [(ngModel)]=\"email\"\r\n              p-required\r\n              [p-label]=\"literals.insertEmail\"\r\n              (p-change-model)=\"formModelChangesCheck(emailForm)\">\r\n            </po-email>\r\n    \r\n            <po-input *ngIf=\"type === 'sms'\"\r\n              name=\"sms\"\r\n              [(ngModel)]=\"phone\"\r\n              p-icon=\"po-icon-telephone\"\r\n              p-required\r\n              [p-label]=\"literals.insertPhone\"\r\n              [p-mask]=\"phoneMask\"\r\n              [p-maxlength]=\"maxLength\"\r\n              [p-minlength]=\"minLength\"\r\n              (p-change-model)=\"formModelChangesCheck(emailForm)\">\r\n            </po-input>\r\n          </div>\r\n          \r\n          <div class=\"po-field-container-bottom po-field-container-error-container\">\r\n            <po-modal-password-recovery-error-message *ngIf=\"invalidEmail && control.dirty\" \r\n              [p-text]=\"type === 'sms' ? literals.phoneErrorMessagePhrase : literals.emailErrorMessagePhrase\">\r\n            </po-modal-password-recovery-error-message>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"po-modal-password-recovery-text po-md-12\">{{ emailModalPhrases.secondPhrase }}<span *ngIf=\"contactEmail\">\r\n        {{ literals.prepositionIn }} \r\n          <a class=\"po-modal-password-recovery-link\" href=\"mailto:{{ contactEmail }}\" target=\"_self\">{{ contactEmail }}</a>\r\n        </span>{{ endpoint }}\r\n      </div>\r\n    </div>\r\n\r\n    <div #smsCodeModal *ngSwitchCase=\"'smsCode'\" class=\"po-modal-password-recovery-content po-row\">\r\n      <div class=\"po-modal-password-recovery-text po-md-12 po-mb-1\">{{ literals.sentSmsCodePhrase }}</div>\r\n      <div class=\"po-mb-2 po-md-12\">\r\n        <form #smsCodeForm=\"ngForm\">\r\n          <po-input\r\n            name=\"sms\"\r\n            [(ngModel)]=\"smsCode\"\r\n            p-maxlength=\"11\"\r\n            p-minlength=\"11\"\r\n            p-required\r\n            [p-label]=\"literals.insertCode\"\r\n            [p-mask]=\"codeMask\"\r\n            (p-change-model)=\"formModelChangesCheck(smsCodeForm)\">\r\n          </po-input>\r\n          <div class=\"po-field-container-bottom po-field-container-error-container\">\r\n            <po-modal-password-recovery-error-message *ngIf=\"invalidEmail\"\r\n              [p-text]=\"smsCodeErrorMessage || this.literals.smsCodeErrorMessagePhrase\">\r\n            </po-modal-password-recovery-error-message>\r\n            <po-modal-password-recovery-error-message *ngIf=\"showCustomCodeError\"\r\n              [p-text]=\"codeError\">\r\n            </po-modal-password-recovery-error-message>\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <div class=\"po-modal-password-recovery-text po-md-12\">\r\n        {{ literals.sendAgainPhrase }} \r\n        <span class=\"po-modal-password-recovery-link\" (click)=\"resendSmsCode()\">{{ literals.sendAgain }}</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div #confirmationModal *ngSwitchCase=\"'confirmation'\" class=\"po-modal-password-recovery-content po-row\">\r\n      <img \r\n        class=\"po-modal-password-recovery-user-image po-mb-2\" \r\n        src=\"./assets/images/email-sent.svg\"> \r\n      <div class=\"po-modal-password-recovery-text\">\r\n        {{ literals.emailSentConfirmationPhrase }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</po-modal>\r\n"
                }] }
    ];
    /** @nocollapse */
    PoModalPasswordRecoveryComponent.ctorParameters = function () { return [
        { type: Router },
        { type: PoI18nPipe },
        { type: PoModalPasswordRecoveryService }
    ]; };
    PoModalPasswordRecoveryComponent.propDecorators = {
        emailForm: [{ type: ViewChild, args: ['emailForm', { static: false },] }],
        recoveryModalElement: [{ type: ViewChild, args: ['recoveryModal', { static: true },] }],
        smsCodeForm: [{ type: ViewChild, args: ['smsCodeForm', { static: false },] }]
    };
    return PoModalPasswordRecoveryComponent;
}(PoModalPasswordRecoveryBaseComponent));
export { PoModalPasswordRecoveryComponent };
if (false) {
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.chosenTypeFormOption;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.codeMask;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.control;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.emailModal;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.emailModalPhrases;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.endpoint;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.invalidCode;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.invalidEmail;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.modalTitle;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.modalType;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.showCustomCodeError;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.smsCodeErrorMessagePhrase;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.submittedCodeValue;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.submittedContactValue;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.passwordRecoverySubscription;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.smsBodyResponse;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.smsCodeSubscription;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.emailForm;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.recoveryModalElement;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.smsCodeForm;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.primaryAction;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.secondaryAction;
    /** @type {?} */
    PoModalPasswordRecoveryComponent.prototype.typeFormOptions;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.poI18nPipe;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryComponent.prototype.poModalPasswordRecoveryService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBYSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDaEUsT0FBTyxFQUFtQixNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUN6RCxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFHekMsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxVQUFVLEVBQWlCLGdCQUFnQixFQUFzQixNQUFNLHlCQUF5QixDQUFDO0FBRzFHLE9BQU8sRUFBRSxvQ0FBb0MsRUFBRSxNQUFNLDZDQUE2QyxDQUFDO0FBQ25HLE9BQU8sRUFBRSxtQ0FBbUMsRUFBRSxNQUFNLHVEQUF1RCxDQUFDO0FBQzVHLE9BQU8sRUFBRSw4QkFBOEIsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQ3RGLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLDhDQUE4QyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUF1QjNGO0lBS3NELDREQUFvQztJQW9DeEYsMENBQ1UsTUFBYyxFQUNkLFVBQXNCLEVBQ3RCLDhCQUE4RDtRQUh4RSxZQUtFLGlCQUFPLFNBQ1I7UUFMUyxZQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsZ0JBQVUsR0FBVixVQUFVLENBQVk7UUFDdEIsb0NBQThCLEdBQTlCLDhCQUE4QixDQUFnQztRQXJDeEUsMEJBQW9CLEdBQVcsMkJBQTJCLENBQUMsS0FBSyxDQUFDO1FBQ2pFLGNBQVEsR0FBVyxh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OzhCQUUzQyxTQUFTLFNBQUMsYUFBYSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRTs7SUFpUDdDLHVDQUFDO0NBQUEsQUEvUUQsQ0FLc0Qsb0NBQW9DLEdBMFF6RjtTQTFRWSxnQ0FBZ0M7OztJQUUzQyxnRUFBaUU7O0lBQ2pFLG9EQUFpQzs7SUFDakMsbURBQXlCOztJQUN6QixzREFBMkI7O0lBQzNCLDZEQUFrRjs7SUFDbEYsb0RBQXVCOztJQUN2Qix1REFBNkI7O0lBQzdCLHdEQUE4Qjs7SUFDOUIsc0RBQW1COztJQUNuQixxREFBMkY7O0lBQzNGLCtEQUE2Qjs7SUFDN0IscUVBQWtDOztJQUNsQyw4REFBbUQ7O0lBQ25ELGlFQUFzRDs7Ozs7SUFFdEQsd0VBQW1EOzs7OztJQUNuRCwyREFBd0I7Ozs7O0lBQ3hCLCtEQUEwQzs7SUFFMUMscURBQTZEOztJQUU3RCxnRUFBcUY7O0lBRXJGLHVEQUFpRTs7SUFFakUseURBQXVFOztJQUV2RSwyREFBeUU7O0lBRXpFLDJEQUdFOzs7OztJQUdBLGtEQUFzQjs7Ozs7SUFDdEIsc0RBQThCOzs7OztJQUM5QiwwRUFBc0UiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uRGVzdHJveSwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCwgTmdGb3JtIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xyXG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuXHJcbmltcG9ydCB7IGlzRXh0ZXJuYWxMaW5rIH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XHJcbmltcG9ydCB7IFBvSTE4blBpcGUsIFBvTW9kYWxBY3Rpb24sIFBvTW9kYWxDb21wb25lbnQsIFBvUmFkaW9Hcm91cE9wdGlvbiB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcclxuXHJcbmltcG9ydCB7IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LmludGVyZmFjZSc7XHJcbmltcG9ydCB7IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5QmFzZUNvbXBvbmVudCB9IGZyb20gJy4vcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeU1vZGFsQ29udGVudCB9IGZyb20gJy4vZW51bXMvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktbW9kYWwtY29udGVudC5lbnVtJztcclxuaW1wb3J0IHsgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlTZXJ2aWNlIH0gZnJvbSAnLi9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS10eXBlLmVudW0nO1xyXG5cclxuLyoqXHJcbiAqIEBkb2NzRXh0ZW5kcyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeUJhc2VDb21wb25lbnRcclxuICpcclxuICogQGV4YW1wbGVcclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cInBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2ljXCIgdGl0bGU9XCJQb3J0aW5hcmkgTW9kYWwgUGFzc3dvcmQgUmVjb3ZlcnkgQmFzaWNcIj5cclxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzaWMvc2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2ljLmNvbXBvbmVudC5odG1sXCI+IDwvZmlsZT5cclxuICogIDxmaWxlIG5hbWU9XCJzYW1wbGUtcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzaWMvc2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2ljLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cInBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxhYnNcIiB0aXRsZT1cIlBvcnRpbmFyaSBNb2RhbCBQYXNzd29yZCBSZWNvdmVyeSBMYWJzXCI+XHJcbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxhYnMvc2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxhYnMuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxyXG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1sYWJzL3NhbXBsZS1wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1sYWJzLmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICpcclxuICogPGV4YW1wbGUgbmFtZT1cInBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXJlcXVlc3RcIiB0aXRsZT1cIlBvcnRpbmFyaSBNb2RhbCBQYXNzd29yZCBSZWNvdmVyeSBSZXF1ZXN0XCI+XHJcbiAqICA8ZmlsZSBuYW1lPVwic2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXJlcXVlc3Qvc2FtcGxlLXBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LXJlcXVlc3QuY29tcG9uZW50Lmh0bWxcIj4gPC9maWxlPlxyXG4gKiAgPGZpbGUgbmFtZT1cInNhbXBsZS1wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1yZXF1ZXN0L3NhbXBsZS1wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1yZXF1ZXN0LmNvbXBvbmVudC50c1wiPiA8L2ZpbGU+XHJcbiAqIDwvZXhhbXBsZT5cclxuICovXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5JyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkuY29tcG9uZW50Lmh0bWwnXHJcbn0pXHJcblxyXG5leHBvcnQgY2xhc3MgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlDb21wb25lbnQgZXh0ZW5kcyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeUJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkRlc3Ryb3kge1xyXG5cclxuICBjaG9zZW5UeXBlRm9ybU9wdGlvbjogc3RyaW5nID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsO1xyXG4gIGNvZGVNYXNrOiBzdHJpbmcgPSAnOSA5IDkgOSA5IDknO1xyXG4gIGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbDtcclxuICBlbWFpbE1vZGFsOiBib29sZWFuID0gdHJ1ZTtcclxuICBlbWFpbE1vZGFsUGhyYXNlcyA9IHsgZmlyc3RQaHJhc2U6IG51bGwgYXMgc3RyaW5nLCBzZWNvbmRQaHJhc2U6IG51bGwgYXMgc3RyaW5nIH07XHJcbiAgZW5kcG9pbnQ6IHN0cmluZyA9ICcuJztcclxuICBpbnZhbGlkQ29kZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGludmFsaWRFbWFpbDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIG1vZGFsVGl0bGU6IHN0cmluZztcclxuICBtb2RhbFR5cGU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50ID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlNb2RhbENvbnRlbnQuRW1haWw7XHJcbiAgc2hvd0N1c3RvbUNvZGVFcnJvcjogYm9vbGVhbjtcclxuICBzbXNDb2RlRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmc7XHJcbiAgc3VibWl0dGVkQ29kZVZhbHVlID0ge30gYXMgUG9Nb2RhbFBhc3N3b3JkUmVjb3Zlcnk7XHJcbiAgc3VibWl0dGVkQ29udGFjdFZhbHVlID0ge30gYXMgUG9Nb2RhbFBhc3N3b3JkUmVjb3Zlcnk7XHJcblxyXG4gIHByaXZhdGUgcGFzc3dvcmRSZWNvdmVyeVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG4gIHByaXZhdGUgc21zQm9keVJlc3BvbnNlO1xyXG4gIHByaXZhdGUgc21zQ29kZVN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uO1xyXG5cclxuICBAVmlld0NoaWxkKCdlbWFpbEZvcm0nLCB7IHN0YXRpYzogZmFsc2UgfSkgZW1haWxGb3JtOiBOZ0Zvcm07XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ3JlY292ZXJ5TW9kYWwnLCB7IHN0YXRpYzogdHJ1ZSB9KSByZWNvdmVyeU1vZGFsRWxlbWVudDogUG9Nb2RhbENvbXBvbmVudDtcclxuXHJcbiAgQFZpZXdDaGlsZCgnc21zQ29kZUZvcm0nLCB7IHN0YXRpYzogZmFsc2UgfSkgc21zQ29kZUZvcm06IE5nRm9ybTtcclxuXHJcbiAgcHJpbWFyeUFjdGlvbjogUG9Nb2RhbEFjdGlvbiA9IHsgbGFiZWw6IHVuZGVmaW5lZCwgYWN0aW9uOiAoKSA9PiB7IH0gfTtcclxuXHJcbiAgc2Vjb25kYXJ5QWN0aW9uOiBQb01vZGFsQWN0aW9uID0geyBsYWJlbDogdW5kZWZpbmVkLCBhY3Rpb246ICgpID0+IHsgfSB9O1xyXG5cclxuICB0eXBlRm9ybU9wdGlvbnM6IEFycmF5PFBvUmFkaW9Hcm91cE9wdGlvbj4gPSBbXHJcbiAgICB7IGxhYmVsOiAnZS1tYWlsJywgdmFsdWU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbCB9LFxyXG4gICAgeyBsYWJlbDogJ1NNUycsIHZhbHVlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuU01TIH1cclxuICBdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXHJcbiAgICBwcml2YXRlIHBvSTE4blBpcGU6IFBvSTE4blBpcGUsXHJcbiAgICBwcml2YXRlIHBvTW9kYWxQYXNzd29yZFJlY292ZXJ5U2VydmljZTogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlTZXJ2aWNlXHJcbiAgICApIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLnBhc3N3b3JkUmVjb3ZlcnlTdWJzY3JpcHRpb24pIHtcclxuICAgICAgdGhpcy5wYXNzd29yZFJlY292ZXJ5U3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuc21zQ29kZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLnNtc0NvZGVTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbXBsZXRlZCgpIHtcclxuICAgIHRoaXMuY2FuY2VsQWN0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmb3JtTW9kZWxDaGFuZ2VzQ2hlY2soZm9ybTogTmdGb3JtKSB7XHJcbiAgICBjb25zdCBpbnZhbGlkRm9ybSA9IGZvcm0uaW52YWxpZDtcclxuICAgIHRoaXMuaW52YWxpZEVtYWlsID0gaW52YWxpZEZvcm0gJiYgZm9ybS5kaXJ0eTtcclxuICAgIHRoaXMucHJpbWFyeUFjdGlvbi5kaXNhYmxlZCA9IGludmFsaWRGb3JtO1xyXG5cclxuICAgIGlmICh0aGlzLm1vZGFsVHlwZSA9PT0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlNb2RhbENvbnRlbnQuU01TQ29kZSkge1xyXG4gICAgICBjb25zdCBjb2RlRXJyb3I6IGJvb2xlYW4gPSB0aGlzLmNvZGVFcnJvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMuY29kZUVycm9yICE9PSAnJztcclxuICAgICAgdGhpcy5zaG93Q3VzdG9tQ29kZUVycm9yID0gY29kZUVycm9yICYmIGZvcm0ucHJpc3RpbmU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRJbnB1dFR5cGUodHlwZSkge1xyXG4gICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMucGlwZU1vZGFsUGhyYXNlcygpO1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29udHJvbCA9IHRoaXMuZW1haWxGb3JtLmNvbnRyb2xzW3R5cGVdO1xyXG4gICAgICB0aGlzLmZvcm1Nb2RlbENoYW5nZXNDaGVjayh0aGlzLmVtYWlsRm9ybSk7XHJcbiAgICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBjb25zdCBjb250cm9sID0gdGhpcy5jaGVja0Zvcm1UeXBlKHRoaXMudHlwZSk7XHJcbiAgICB0aGlzLmNvbnRyb2wgPSB0aGlzLmVtYWlsRm9ybS5jb250cm9sc1tjb250cm9sXTtcclxuICAgIHRoaXMuc2V0RW1haWxNb2RhbFBocmFzZXNBbmRBY3Rpb25zKCk7XHJcbiAgICB0aGlzLmZvcm1Nb2RlbENoYW5nZXNDaGVjayh0aGlzLmVtYWlsRm9ybSk7XHJcbiAgICB0aGlzLnJlY292ZXJ5TW9kYWxFbGVtZW50Lm9wZW4oKTtcclxuICB9XHJcblxyXG4gIG9wZW5Db25maXJtYXRpb24oKSB7XHJcbiAgICB0aGlzLm1vZGFsVGl0bGUgPSB0aGlzLmxpdGVyYWxzLmVtYWlsU2VudFRpdGxlO1xyXG4gICAgdGhpcy5tb2RhbFR5cGUgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeU1vZGFsQ29udGVudC5Db25maXJtYXRpb247XHJcbiAgICB0aGlzLnNldEFjdGlvbnModGhpcy5jYW5jZWxBY3Rpb24sIHRoaXMubGl0ZXJhbHMuY2xvc2VCdXR0b24sIHRoaXMuc3VibWl0QWN0aW9uLCB0aGlzLmxpdGVyYWxzLnJlc2VuZEVtYWlsQnV0dG9uLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBvcGVuU21zQ29kZSgpIHtcclxuICAgIHRoaXMubW9kYWxUaXRsZSA9IHRoaXMubGl0ZXJhbHMudHlwZUNvZGVUaXRsZTtcclxuICAgIHRoaXMubW9kYWxUeXBlID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlNb2RhbENvbnRlbnQuU01TQ29kZTtcclxuICAgIHRoaXMuc2V0QWN0aW9ucyh0aGlzLnN1Ym1pdFNtc0NvZGVBY3Rpb24sIHRoaXMubGl0ZXJhbHMuY29udGludWVCdXR0b24sIHRoaXMuY2FuY2VsQWN0aW9uLCB0aGlzLmxpdGVyYWxzLmNhbmNlbEJ1dHRvbiwgdHJ1ZSk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29udHJvbCA9IHRoaXMuc21zQ29kZUZvcm0uY29udHJvbHNbJ3NtcyddO1xyXG4gICAgICB0aGlzLmZvcm1Nb2RlbENoYW5nZXNDaGVjayh0aGlzLnNtc0NvZGVGb3JtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZW5kU21zQ29kZSgpIHtcclxuICAgIHRoaXMuaW5jcmVtZW50UmV0cnlBdHRlbXB0cygpO1xyXG4gICAgaWYgKHRoaXMudXJsUmVjb3ZlcnkpIHtcclxuICAgICAgdGhpcy5zdWJtaXRBY3Rpb25SZXF1ZXN0KHRoaXMuc3VibWl0dGVkQ29udGFjdFZhbHVlLCB0aGlzLnR5cGUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5zdWJtaXQuZW1pdCh0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzc2lnblNtc1Jlc3BvbnNlKHJlc3BvbnNlT2JqKSB7XHJcbiAgICB0aGlzLnNtc0JvZHlSZXNwb25zZSA9IE9iamVjdC5hc3NpZ24oe30sIHtoYXNoOiByZXNwb25zZU9iai5oYXNofSk7XHJcbiAgICBpZiAocmVzcG9uc2VPYmoudXJsVmFsaWRhdGlvbkNvZGUpIHtcclxuICAgICAgdGhpcy5zbXNCb2R5UmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKHRoaXMuc21zQm9keVJlc3BvbnNlLCB7dXJsVmFsaWRhdGlvbkNvZGU6IHJlc3BvbnNlT2JqLnVybFZhbGlkYXRpb25Db2RlfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbmNlbEFjdGlvbigpIHtcclxuICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XHJcbiAgICB0aGlzLnN1Ym1pdHRlZENvbnRhY3RWYWx1ZSA9IHt9O1xyXG5cclxuICAgIHRoaXMuY2hvc2VuVHlwZUZvcm1PcHRpb24gPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWw7XHJcbiAgICB0aGlzLm1vZGFsVHlwZSA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50LkVtYWlsO1xyXG4gICAgdGhpcy50eXBlID0gdGhpcy5tb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlQWxsID8gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkFsbCA6IHRoaXMudHlwZTtcclxuICAgIHRoaXMucmVjb3ZlcnlNb2RhbEVsZW1lbnQuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hlY2tGb3JtVHlwZSh0eXBlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUpIHtcclxuICAgIHJldHVybiB0eXBlICE9PSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuQWxsID8gdHlwZSA6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZm9ybVJlc2V0KGNvbnRyb2w6IEFic3RyYWN0Q29udHJvbCkge1xyXG4gICAgY29udHJvbC5tYXJrQXNQcmlzdGluZSgpO1xyXG4gICAgY29udHJvbC5tYXJrQXNVbnRvdWNoZWQoKTtcclxuICAgIGNvbnRyb2wudXBkYXRlVmFsdWVBbmRWYWxpZGl0eSgpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRFbWl0VmFsdWUodHlwZTogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKSB7XHJcbiAgICByZXR1cm4gdHlwZSA9PT0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUyA/IHRoaXMucGhvbmUgOiB0aGlzLmVtYWlsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBpbmNyZW1lbnRSZXRyeUF0dGVtcHRzKCkge1xyXG4gICAgdGhpcy5zdWJtaXR0ZWRDb250YWN0VmFsdWUucmV0cnkgPSAodGhpcy5zdWJtaXR0ZWRDb250YWN0VmFsdWUucmV0cnkgKyAxIHx8IDEpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBvcGVuRXh0ZXJuYWxMaW5rKHVybCwgcXVlcnlQYXJhbSkge1xyXG4gICAgd2luZG93Lm9wZW4oYCR7dXJsfT90b2tlbj0ke3F1ZXJ5UGFyYW19YCwgJ19zZWxmJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG9wZW5JbnRlcm5hbExpbmsodXJsLCBlbmRwb2ludCwgcXVlcnlQYXJhbSkge1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2Ake3VybH0vJHtlbmRwb2ludH1gXSwgeyBxdWVyeVBhcmFtczogeyB0b2tlbjogcXVlcnlQYXJhbSB9IH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBwaXBlTW9kYWxQaHJhc2VzKCkge1xyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUykge1xyXG4gICAgICB0aGlzLmVtYWlsTW9kYWxQaHJhc2VzLmZpcnN0UGhyYXNlID0gdGhpcy5zZXRQaXBlQXJndW1lbnRzKHRoaXMubGl0ZXJhbHMucmVjb3ZlcnlQYXNzd29yZFBocmFzZSwgdGhpcy5saXRlcmFscy5zbXMpO1xyXG4gICAgICB0aGlzLmVtYWlsTW9kYWxQaHJhc2VzLnNlY29uZFBocmFzZSA9IHRoaXMuc2V0UGlwZUFyZ3VtZW50cyh0aGlzLmxpdGVyYWxzLnN1cHBvcnRDb250YWN0LCB0aGlzLmxpdGVyYWxzLnRlbGVwaG9uZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmVtYWlsTW9kYWxQaHJhc2VzLmZpcnN0UGhyYXNlID0gdGhpcy5zZXRQaXBlQXJndW1lbnRzKHRoaXMubGl0ZXJhbHMucmVjb3ZlcnlQYXNzd29yZFBocmFzZSwgdGhpcy5saXRlcmFscy5lbWFpbCk7XHJcbiAgICAgIHRoaXMuZW1haWxNb2RhbFBocmFzZXMuc2Vjb25kUGhyYXNlID0gdGhpcy5zZXRQaXBlQXJndW1lbnRzKHRoaXMubGl0ZXJhbHMuc3VwcG9ydENvbnRhY3QsIHRoaXMubGl0ZXJhbHMuZW1haWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSByZWRpcmVjdFRvQ2hhbmdlUGFzc3dvcmQocmVjb3ZlcnlUb2tlbjogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnkpIHtcclxuICAgIGNvbnN0IHVybENoYW5nZVBhc3N3b3JkID0gcmVjb3ZlcnlUb2tlbi51cmxDaGFuZ2VQYXNzd29yZDtcclxuICAgIGlmICh1cmxDaGFuZ2VQYXNzd29yZCkge1xyXG4gICAgICBpc0V4dGVybmFsTGluayh1cmxDaGFuZ2VQYXNzd29yZCkgP1xyXG4gICAgICB0aGlzLm9wZW5FeHRlcm5hbExpbmsodXJsQ2hhbmdlUGFzc3dvcmQsIHJlY292ZXJ5VG9rZW4udG9rZW4pIDpcclxuICAgICAgdGhpcy5vcGVuSW50ZXJuYWxMaW5rKHRoaXMudXJsUmVjb3ZlcnksIHVybENoYW5nZVBhc3N3b3JkLCByZWNvdmVyeVRva2VuLnRva2VuKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGNoYW5nZVBhc3N3b3JkRW5kcG9pbnQgPSAnY2hhbmdlUGFzc3dvcmQnO1xyXG4gICAgICB0aGlzLm9wZW5JbnRlcm5hbExpbmsodGhpcy51cmxSZWNvdmVyeSwgY2hhbmdlUGFzc3dvcmRFbmRwb2ludCwgcmVjb3ZlcnlUb2tlbi50b2tlbik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHJlc2V0Rm9ybUZpZWxkcyhjb250cm9sKSB7XHJcbiAgICB0aGlzLmZvcm1SZXNldChjb250cm9sKTtcclxuICAgIHRoaXMuZW1haWwgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLnBob25lID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5zbXNDb2RlID0gdW5kZWZpbmVkO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRBY3Rpb25zKHByaW1hcnlBY3Rpb24sIHByaW1hcnlsYWJlbCwgc2Vjb25kYXJ5QWN0aW9uLCBzZWNvbmRhcnlMYWJlbCwgZGlzYWJsZWQpIHtcclxuICAgIHRoaXMucHJpbWFyeUFjdGlvbi5hY3Rpb24gPSAoKSA9PiBwcmltYXJ5QWN0aW9uLmNhbGwodGhpcyk7XHJcbiAgICB0aGlzLnByaW1hcnlBY3Rpb24ubGFiZWwgPSBwcmltYXJ5bGFiZWw7XHJcbiAgICB0aGlzLnNlY29uZGFyeUFjdGlvbi5hY3Rpb24gPSAoKSA9PiBzZWNvbmRhcnlBY3Rpb24uY2FsbCh0aGlzKTtcclxuICAgIHRoaXMuc2Vjb25kYXJ5QWN0aW9uLmxhYmVsID0gc2Vjb25kYXJ5TGFiZWw7XHJcbiAgICB0aGlzLnByaW1hcnlBY3Rpb24uZGlzYWJsZWQgPSBkaXNhYmxlZDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RW1haWxNb2RhbFBocmFzZXNBbmRBY3Rpb25zKCkge1xyXG4gICAgdGhpcy5tb2RhbFRpdGxlID0gdGhpcy5saXRlcmFscy5mb3Jnb3RQYXNzd29yZFRpdGxlO1xyXG4gICAgdGhpcy5waXBlTW9kYWxQaHJhc2VzKCk7XHJcbiAgICB0aGlzLm1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVBbGwgPSB0aGlzLnR5cGUgPT09IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5BbGw7XHJcbiAgICB0aGlzLnNldEFjdGlvbnModGhpcy5zdWJtaXRBY3Rpb24sIHRoaXMubGl0ZXJhbHMuc2VuZEJ1dHRvbiwgdGhpcy5jYW5jZWxBY3Rpb24sIHRoaXMubGl0ZXJhbHMuY2FuY2VsQnV0dG9uLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0UmVxdWVzdEVuZHBvaW50KHVybFZhbGlkYXRpb25Db2RlPzogc3RyaW5nKSB7XHJcbiAgICBjb25zdCBlbmRwb2ludCA9IHVybFZhbGlkYXRpb25Db2RlIHx8ICd2YWxpZGF0aW9uJztcclxuXHJcbiAgICByZXR1cm4gYCR7dGhpcy51cmxSZWNvdmVyeX0vJHtlbmRwb2ludH1gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzZXRQaXBlQXJndW1lbnRzKGxpdGVyYWxBdHRyOiBzdHJpbmcsIGFyZzogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gdGhpcy5wb0kxOG5QaXBlLnRyYW5zZm9ybShsaXRlcmFsQXR0ciwgYXJnKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3VibWl0QWN0aW9uKCkge1xyXG4gICAgdGhpcy5tb2RhbFR5cGUgPT09IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TW9kYWxDb250ZW50LkNvbmZpcm1hdGlvbiA/IHRoaXMuaW5jcmVtZW50UmV0cnlBdHRlbXB0cygpIDogdGhpcy5mb3JtUmVzZXQodGhpcy5jb250cm9sKTtcclxuICAgIHRoaXMuc3VibWl0dGVkQ29udGFjdFZhbHVlW3RoaXMuY2hlY2tGb3JtVHlwZSh0aGlzLnR5cGUpXSA9IHRoaXMuZ2V0RW1pdFZhbHVlKHRoaXMudHlwZSk7XHJcbiAgICBpZiAodGhpcy51cmxSZWNvdmVyeSkge1xyXG4gICAgICB0aGlzLnN1Ym1pdEFjdGlvblJlcXVlc3QodGhpcy5zdWJtaXR0ZWRDb250YWN0VmFsdWUsIHRoaXMudHlwZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnN1Ym1pdC5lbWl0KHRoaXMuc3VibWl0dGVkQ29udGFjdFZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3VibWl0QWN0aW9uUmVxdWVzdChkYXRhOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeSwgbW9kYWxUeXBlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IG1vZGFsVHlwZSA9PT0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLlNNUyA/IHsgdHlwZTogJ3NtcycgfSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICB0aGlzLnBhc3N3b3JkUmVjb3ZlcnlTdWJzY3JpcHRpb24gPVxyXG4gICAgdGhpcy5wb01vZGFsUGFzc3dvcmRSZWNvdmVyeVNlcnZpY2UucG9zdCh0aGlzLnVybFJlY292ZXJ5LCBkYXRhLCBwYXJhbXMpXHJcbiAgICAuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHtcclxuICAgICAgaWYgKChtb2RhbFR5cGUgPT09IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbCB8fCBtb2RhbFR5cGUgPT09IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5BbGwpICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KSB7XHJcbiAgICAgICAgdGhpcy5vcGVuQ29uZmlybWF0aW9uKCk7XHJcbiAgICAgIH0gZWxzZSBpZiAobW9kYWxUeXBlID09PSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuU01TICYmIHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgdGhpcy5hc3NpZ25TbXNSZXNwb25zZShyZXNwb25zZS5ib2R5KTtcclxuICAgICAgICB0aGlzLm9wZW5TbXNDb2RlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdWJtaXRTbXNDb2RlQWN0aW9uKCkge1xyXG4gICAgdGhpcy5zdWJtaXR0ZWRDb2RlVmFsdWUuY29kZSA9IHRoaXMuc21zQ29kZTtcclxuXHJcbiAgICBpZiAodGhpcy51cmxSZWNvdmVyeSkge1xyXG4gICAgICB0aGlzLnN1Ym1pdHRlZENvZGVWYWx1ZSA9IE9iamVjdC5hc3NpZ24odGhpcy5zdWJtaXR0ZWRDb2RlVmFsdWUsIHtoYXNoOiB0aGlzLnNtc0JvZHlSZXNwb25zZS5oYXNofSk7XHJcbiAgICAgIHRoaXMuc3VibWl0U21zQ29kZVJlcXVlc3QodGhpcy5zdWJtaXR0ZWRDb2RlVmFsdWUpO1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY29kZVN1Ym1pdC5lbWl0KHRoaXMuc3VibWl0dGVkQ29kZVZhbHVlKTtcclxuICAgIH1cclxuICAgIHRoaXMucmVzZXRGb3JtRmllbGRzKHRoaXMuY29udHJvbCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHN1Ym1pdFNtc0NvZGVSZXF1ZXN0KGRhdGE6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5KSB7XHJcbiAgICB0aGlzLnNtc0NvZGVTdWJzY3JpcHRpb24gPSB0aGlzLnBvTW9kYWxQYXNzd29yZFJlY292ZXJ5U2VydmljZVxyXG4gICAgLnBvc3QodGhpcy5zZXRSZXF1ZXN0RW5kcG9pbnQodGhpcy5zbXNCb2R5UmVzcG9uc2UudXJsVmFsaWRhdGlvbkNvZGUpLCBkYXRhKVxyXG4gICAgLnN1YnNjcmliZShcclxuICAgICAgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIGNvbnN0IHN1Y2Nlc3NTdGF0dXMgPSByZXNwb25zZS5zdGF0dXMgPT09IDIwMDtcclxuICAgICAgICBpZiAoc3VjY2Vzc1N0YXR1cykge1xyXG4gICAgICAgICAgdGhpcy5jb21wbGV0ZWQoKTtcclxuICAgICAgICAgIHRoaXMucmVkaXJlY3RUb0NoYW5nZVBhc3N3b3JkKHJlc3BvbnNlLmJvZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAgZXJyb3IgPT4ge1xyXG4gICAgICAgIHRoaXMuY29kZUVycm9yID0gZXJyb3IuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9wZW5TbXNDb2RlKCk7XHJcbiAgICAgIH1cclxuICAgICk7XHJcbiAgfVxyXG5cclxufVxyXG4iXX0=