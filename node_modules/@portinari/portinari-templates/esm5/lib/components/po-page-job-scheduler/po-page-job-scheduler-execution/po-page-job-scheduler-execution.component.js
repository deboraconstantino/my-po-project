/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { NgForm } from '@angular/forms';
import { isTypeof } from '../../../utils/util';
import { PoPageJobSchedulerLookupService } from '../po-page-job-scheduler-lookup.service';
import { PoPageJobSchedulerService } from '../po-page-job-scheduler.service';
var PoPageJobSchedulerExecutionComponent = /** @class */ (function () {
    function PoPageJobSchedulerExecutionComponent(poPageJobSchedulerService, poPageJobSchedulerLookup) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        this.poPageJobSchedulerLookup = poPageJobSchedulerLookup;
        this._value = {};
        this.dayPattern = '^(3[0-1]|[0-2][0-9]|[1-9]|0[1-9])$';
        this.existProcessAPI = true;
        this.minDateFirstExecution = new Date();
        this.periodicityOptions = [];
        this.timePattern = '^(2[0-3]|[01][0-9]):?([0-5][0-9])$';
        this.weekDays = [];
        this.isEdit = false;
        this.literals = (/** @type {?} */ ({}));
        this.changeProcess = new EventEmitter();
    }
    Object.defineProperty(PoPageJobSchedulerExecutionComponent.prototype, "value", {
        get: /**
         * @return {?}
         */
        function () {
            return this._value;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._value = value && isTypeof(value, 'object') ? value : {};
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoPageJobSchedulerExecutionComponent.prototype, "startDateFirstExecution", {
        get: /**
         * @return {?}
         */
        function () {
            return this.isEdit ? undefined : this.minDateFirstExecution;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        setTimeout((/**
         * @return {?}
         */
        function () {
            _this.subscribeProcessIdValueChanges();
        }));
    };
    /**
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.periodicityTemplates = {
            daily: this.dailyTemplate,
            monthly: this.monthlyTemplate,
            weekly: this.weeklyTempalte
        };
        this.checkExistsProcessesAPI();
        this.periodicityOptions = this.getPeriodicityOptions();
        this.weekDays = this.getWeekDays();
    };
    /**
     * @private
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.checkExistsProcessesAPI = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.poPageJobSchedulerService.getHeadProcesses().subscribe(undefined, (/**
         * @param {?} error
         * @return {?}
         */
        function (error) {
            _this.existProcessAPI = false;
        }));
    };
    /**
     * @private
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.getPeriodicityOptions = /**
     * @private
     * @return {?}
     */
    function () {
        return [
            { label: this.literals.single, value: 'single' },
            { label: this.literals.daily, value: 'daily' },
            { label: this.literals.weekly, value: 'weekly' },
            { label: this.literals.monthly, value: 'monthly' }
        ];
    };
    /**
     * @private
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.getWeekDays = /**
     * @private
     * @return {?}
     */
    function () {
        return [
            { label: this.literals.sunday, value: 'Sunday' },
            { label: this.literals.monday, value: 'Monday' },
            { label: this.literals.tuesday, value: 'Tuesday' },
            { label: this.literals.wednesday, value: 'Wednesday' },
            { label: this.literals.thursday, value: 'Thursday' },
            { label: this.literals.friday, value: 'Friday' },
            { label: this.literals.saturday, value: 'Saturday' }
        ];
    };
    /**
     * @private
     * @return {?}
     */
    PoPageJobSchedulerExecutionComponent.prototype.subscribeProcessIdValueChanges = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        this.form.controls['processID'].valueChanges.subscribe((/**
         * @param {?} processId
         * @return {?}
         */
        function (processId) {
            _this.changeProcess.emit({ processId: processId, existAPI: _this.existProcessAPI });
        }));
    };
    PoPageJobSchedulerExecutionComponent.decorators = [
        { type: Component, args: [{
                    selector: 'po-page-job-scheduler-execution',
                    template: "<form #formExecution=\"ngForm\">\r\n  <div class=\"po-row\">\r\n    <ng-container *ngIf=\"existProcessAPI; then lookupProcessesID; else inputProcessesID\"></ng-container>\r\n  </div>\r\n\r\n  <div class=\"po-row\">\r\n    <po-divider class=\"po-md-12\" [p-label]=\"literals.firstExecution\"></po-divider>\r\n\r\n    <po-datepicker\r\n      class=\"po-md-4\"\r\n      name=\"firstExecution\"\r\n      [(ngModel)]=\"value.firstExecution\"\r\n      p-placeholder=\"dd/mm/aaaa\"\r\n      p-required\r\n      [p-disabled]=\"isEdit\"\r\n      [p-label]=\"literals.day\"\r\n      [p-min-date]=\"startDateFirstExecution\">\r\n    </po-datepicker>\r\n\r\n    <po-input\r\n      class=\"po-md-2\"\r\n      name=\"firstExecutionHour\"\r\n      [(ngModel)]=\"value.firstExecutionHour\"\r\n      p-mask=\"99:99\"\r\n      p-mask-format-model\r\n      p-placeholder=\"HH:mm\"\r\n      p-required\r\n      [p-disabled]=\"isEdit\"\r\n      [p-label]=\"literals.hour\"\r\n      [p-pattern]=\"timePattern\">\r\n    </po-input>\r\n\r\n  </div>\r\n\r\n  <hr>\r\n\r\n  <div class=\"po-row\">\r\n    <po-radio-group\r\n      class=\"po-sm-12\"\r\n      name=\"periodicity\"\r\n      [(ngModel)]=\"value.periodicity\"\r\n      p-columns=\"4\"\r\n      p-required\r\n      [p-label]=\"literals.periodicity\"\r\n      [p-options]=\"periodicityOptions\">\r\n    </po-radio-group>\r\n\r\n    <ng-container *ngIf=\"value.periodicity !== 'single'\">\r\n      <po-divider class=\"po-md-12\" [p-label]=\"literals.periodicityData\">\r\n      </po-divider>\r\n\r\n      <div class=\"po-row\">\r\n        <ng-container *ngTemplateOutlet=\"periodicityTemplates[value.periodicity]\">\r\n        </ng-container>\r\n      </div>\r\n\r\n      <div class=\"po-row\">\r\n        <po-switch\r\n          class=\"po-md-3\"\r\n          name=\"recurrent\"\r\n          [(ngModel)]=\"value.recurrent\"\r\n          [p-label]=\"literals.recurrent\"\r\n          [p-label-off]=\"literals.no\"\r\n          [p-label-on]=\"literals.yes\">\r\n        </po-switch>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n\r\n  <ng-template #lookupProcessesID>\r\n    <po-lookup\r\n      class=\"po-md-12\"\r\n      name=\"processID\"\r\n      [(ngModel)]=\"value.processID\"\r\n      p-field-label=\"description\"\r\n      p-field-value=\"processID\"\r\n      p-required\r\n      [p-disabled]=\"isEdit\"\r\n      [p-filter-service]=\"poPageJobSchedulerLookup\"\r\n      [p-label]=\"literals.process\"\r\n      [p-placeholder]=\"literals.enterProcess\">\r\n    </po-lookup>\r\n  </ng-template>\r\n\r\n  <ng-template #inputProcessesID>\r\n    <po-input\r\n      class=\"po-md-12\"\r\n      name=\"processID\"\r\n      [(ngModel)]=\"value.processID\"\r\n      p-required\r\n      [p-disabled]=\"isEdit\"\r\n      [p-label]=\"literals.process\"\r\n      [p-placeholder]=\"literals.enterProcess\">\r\n    </po-input>\r\n  </ng-template>\r\n\r\n  <ng-template #dailyTemplate>\r\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\r\n    </ng-container>\r\n  </ng-template>\r\n\r\n  <ng-template #weeklyTemplate>\r\n    <div class=\"po-row\">\r\n      <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\r\n      </ng-container>\r\n    </div>\r\n\r\n    <po-checkbox-group\r\n      class=\"po-md-12\"\r\n      name=\"daysOfWeek\"\r\n      [(ngModel)]=\"value.daysOfWeek\"\r\n      p-columns=\"4\"\r\n      p-required\r\n      [p-label]=\"literals.weekDays\"\r\n      [p-options]=\"weekDays\">\r\n    </po-checkbox-group>\r\n  </ng-template>\r\n\r\n  <ng-template #monthlyTemplate>\r\n    <po-number\r\n      class=\"po-md-3\"\r\n      name=\"dayOfMonth\"\r\n      [(ngModel)]=\"value.dayOfMonth\"\r\n      p-required\r\n      [p-error-pattern]=\"'Dia inv\u00E1lido'\"\r\n      [p-label]=\"literals.day\"\r\n      [p-max]=\"31\"\r\n      [p-pattern]=\"dayPattern\">\r\n    </po-number>\r\n\r\n    <ng-container *ngTemplateOutlet=\"inputHourTemplate\">\r\n    </ng-container>\r\n  </ng-template>\r\n\r\n  <ng-template #inputHourTemplate>\r\n    <po-input\r\n      class=\"po-md-2\"\r\n      name=\"hour\"\r\n      [(ngModel)]=\"value.hour\"\r\n      p-mask=\"99:99\"\r\n      p-mask-format-model\r\n      p-placeholder=\"HH:mm\"\r\n      p-required\r\n      [p-label]=\"literals.hour\"\r\n      [p-pattern]=\"timePattern\">\r\n    </po-input>\r\n  </ng-template>\r\n</form>\r\n"
                }] }
    ];
    /** @nocollapse */
    PoPageJobSchedulerExecutionComponent.ctorParameters = function () { return [
        { type: PoPageJobSchedulerService },
        { type: PoPageJobSchedulerLookupService }
    ]; };
    PoPageJobSchedulerExecutionComponent.propDecorators = {
        form: [{ type: ViewChild, args: ['formExecution', { static: true },] }],
        dailyTemplate: [{ type: ViewChild, args: ['dailyTemplate', { static: true },] }],
        monthlyTemplate: [{ type: ViewChild, args: ['monthlyTemplate', { static: true },] }],
        weeklyTempalte: [{ type: ViewChild, args: ['weeklyTemplate', { static: true },] }],
        isEdit: [{ type: Input, args: ['p-is-edit',] }],
        literals: [{ type: Input, args: ['p-literals',] }],
        value: [{ type: Input, args: ['p-value',] }],
        changeProcess: [{ type: Output, args: ['p-change-process',] }]
    };
    return PoPageJobSchedulerExecutionComponent;
}());
export { PoPageJobSchedulerExecutionComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    PoPageJobSchedulerExecutionComponent.prototype._value;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.dayPattern;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.existProcessAPI;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.minDateFirstExecution;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.periodicityOptions;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.periodicityTemplates;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.timePattern;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.weekDays;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.form;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.dailyTemplate;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.monthlyTemplate;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.weeklyTempalte;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.isEdit;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.literals;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.changeProcess;
    /**
     * @type {?}
     * @private
     */
    PoPageJobSchedulerExecutionComponent.prototype.poPageJobSchedulerService;
    /** @type {?} */
    PoPageJobSchedulerExecutionComponent.prototype.poPageJobSchedulerLookup;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWV4ZWN1dGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wby1wYWdlLWpvYi1zY2hlZHVsZXIvcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWV4ZWN1dGlvbi9wby1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFpQixTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQWUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RILE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUl4QyxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFL0MsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0seUNBQXlDLENBQUM7QUFDMUYsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFFN0U7SUFxQ0UsOENBQ1UseUJBQW9ELEVBQ3JELHdCQUF5RDtRQUR4RCw4QkFBeUIsR0FBekIseUJBQXlCLENBQTJCO1FBQ3JELDZCQUF3QixHQUF4Qix3QkFBd0IsQ0FBaUM7UUFqQzFELFdBQU0sR0FBUSxFQUFFLENBQUM7UUFFekIsZUFBVSxHQUFHLG9DQUFvQyxDQUFDO1FBQ2xELG9CQUFlLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLDBCQUFxQixHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7UUFDbkMsdUJBQWtCLEdBQThCLEVBQUUsQ0FBQztRQUVuRCxnQkFBVyxHQUFHLG9DQUFvQyxDQUFDO1FBQ25ELGFBQVEsR0FBaUMsRUFBRSxDQUFDO1FBU3hCLFdBQU0sR0FBWSxLQUFLLENBQUM7UUFFdkIsYUFBUSxHQUFHLG1CQUFNLEVBQUUsRUFBQSxDQUFD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LDZEQUE0RDs7SUFDNUQsK0RBQWdFOztJQUNoRSw4REFBOEQ7O0lBRTlELHNEQUE0Qzs7SUFFNUMsd0RBQXlDOztJQVV6Qyw2REFBdUY7Ozs7O0lBR3JGLHlFQUE0RDs7SUFDNUQsd0VBQWdFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVGVtcGxhdGVSZWYsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBOZ0Zvcm0gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XHJcblxyXG5pbXBvcnQgeyBQb0NoZWNrYm94R3JvdXBPcHRpb24sIFBvUmFkaW9Hcm91cE9wdGlvbiB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcclxuXHJcbmltcG9ydCB7IGlzVHlwZW9mIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbCc7XHJcblxyXG5pbXBvcnQgeyBQb1BhZ2VKb2JTY2hlZHVsZXJMb29rdXBTZXJ2aWNlIH0gZnJvbSAnLi4vcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWxvb2t1cC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSB9IGZyb20gJy4uL3BvLXBhZ2Utam9iLXNjaGVkdWxlci5zZXJ2aWNlJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAncG8tcGFnZS1qb2Itc2NoZWR1bGVyLWV4ZWN1dGlvbicsXHJcbiAgdGVtcGxhdGVVcmw6ICdwby1wYWdlLWpvYi1zY2hlZHVsZXItZXhlY3V0aW9uLmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgUG9QYWdlSm9iU2NoZWR1bGVyRXhlY3V0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcclxuXHJcbiAgcHJpdmF0ZSBfdmFsdWU6IGFueSA9IHt9O1xyXG5cclxuICBkYXlQYXR0ZXJuID0gJ14oM1swLTFdfFswLTJdWzAtOV18WzEtOV18MFsxLTldKSQnO1xyXG4gIGV4aXN0UHJvY2Vzc0FQSSA9IHRydWU7XHJcbiAgbWluRGF0ZUZpcnN0RXhlY3V0aW9uID0gbmV3IERhdGUoKTtcclxuICBwZXJpb2RpY2l0eU9wdGlvbnM6IEFycmF5PFBvUmFkaW9Hcm91cE9wdGlvbj4gPSBbXTtcclxuICBwZXJpb2RpY2l0eVRlbXBsYXRlczogeyBkYWlseTogVGVtcGxhdGVSZWY8YW55Piwgd2Vla2x5OiBUZW1wbGF0ZVJlZjxhbnk+LCBtb250aGx5OiBUZW1wbGF0ZVJlZjxhbnk+IH0gO1xyXG4gIHRpbWVQYXR0ZXJuID0gJ14oMlswLTNdfFswMV1bMC05XSk6PyhbMC01XVswLTldKSQnO1xyXG4gIHdlZWtEYXlzOiBBcnJheTxQb0NoZWNrYm94R3JvdXBPcHRpb24+ID0gW107XHJcblxyXG4gIEBWaWV3Q2hpbGQoJ2Zvcm1FeGVjdXRpb24nLCB7IHN0YXRpYzogdHJ1ZSB9KSBmb3JtOiBOZ0Zvcm07XHJcblxyXG4gIC8vIHRlbXBsYXRlc1xyXG4gIEBWaWV3Q2hpbGQoJ2RhaWx5VGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBkYWlseVRlbXBsYXRlO1xyXG4gIEBWaWV3Q2hpbGQoJ21vbnRobHlUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pIG1vbnRobHlUZW1wbGF0ZTtcclxuICBAVmlld0NoaWxkKCd3ZWVrbHlUZW1wbGF0ZScsIHsgc3RhdGljOiB0cnVlIH0pIHdlZWtseVRlbXBhbHRlO1xyXG5cclxuICBASW5wdXQoJ3AtaXMtZWRpdCcpIGlzRWRpdDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBASW5wdXQoJ3AtbGl0ZXJhbHMnKSBsaXRlcmFscyA9IDxhbnk+IHt9O1xyXG5cclxuICBASW5wdXQoJ3AtdmFsdWUnKSBzZXQgdmFsdWUodmFsdWU6IGFueSkge1xyXG4gICAgdGhpcy5fdmFsdWUgPSB2YWx1ZSAmJiBpc1R5cGVvZih2YWx1ZSwgJ29iamVjdCcpID8gdmFsdWUgOiB7fTtcclxuICB9XHJcblxyXG4gIGdldCB2YWx1ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIEBPdXRwdXQoJ3AtY2hhbmdlLXByb2Nlc3MnKSBjaGFuZ2VQcm9jZXNzOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHByaXZhdGUgcG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZTogUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSxcclxuICAgIHB1YmxpYyBwb1BhZ2VKb2JTY2hlZHVsZXJMb29rdXA6IFBvUGFnZUpvYlNjaGVkdWxlckxvb2t1cFNlcnZpY2UpIHsgfVxyXG5cclxuICBnZXQgc3RhcnREYXRlRmlyc3RFeGVjdXRpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pc0VkaXQgPyB1bmRlZmluZWQgOiB0aGlzLm1pbkRhdGVGaXJzdEV4ZWN1dGlvbjtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuXHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgdGhpcy5zdWJzY3JpYmVQcm9jZXNzSWRWYWx1ZUNoYW5nZXMoKTtcclxuICAgIH0pO1xyXG5cclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgdGhpcy5wZXJpb2RpY2l0eVRlbXBsYXRlcyA9IHtcclxuICAgICAgZGFpbHk6IHRoaXMuZGFpbHlUZW1wbGF0ZSxcclxuICAgICAgbW9udGhseTogdGhpcy5tb250aGx5VGVtcGxhdGUsXHJcbiAgICAgIHdlZWtseTogdGhpcy53ZWVrbHlUZW1wYWx0ZVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNoZWNrRXhpc3RzUHJvY2Vzc2VzQVBJKCk7XHJcblxyXG4gICAgdGhpcy5wZXJpb2RpY2l0eU9wdGlvbnMgPSB0aGlzLmdldFBlcmlvZGljaXR5T3B0aW9ucygpO1xyXG4gICAgdGhpcy53ZWVrRGF5cyA9IHRoaXMuZ2V0V2Vla0RheXMoKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgY2hlY2tFeGlzdHNQcm9jZXNzZXNBUEkoKSB7XHJcbiAgICB0aGlzLnBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UuZ2V0SGVhZFByb2Nlc3NlcygpLnN1YnNjcmliZSh1bmRlZmluZWQsIGVycm9yID0+IHtcclxuICAgICAgdGhpcy5leGlzdFByb2Nlc3NBUEkgPSBmYWxzZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQZXJpb2RpY2l0eU9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLnNpbmdsZSwgdmFsdWU6ICdzaW5nbGUnIH0sXHJcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMuZGFpbHksIHZhbHVlOiAnZGFpbHknIH0sXHJcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMud2Vla2x5LCB2YWx1ZTogJ3dlZWtseScgfSxcclxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5tb250aGx5LCB2YWx1ZTogJ21vbnRobHknIH1cclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldFdlZWtEYXlzKCkge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5zdW5kYXksIHZhbHVlOiAnU3VuZGF5JyB9LFxyXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLm1vbmRheSwgdmFsdWU6ICdNb25kYXknIH0sXHJcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMudHVlc2RheSwgdmFsdWU6ICdUdWVzZGF5JyB9LFxyXG4gICAgICB7IGxhYmVsOiB0aGlzLmxpdGVyYWxzLndlZG5lc2RheSwgdmFsdWU6ICdXZWRuZXNkYXknIH0sXHJcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMudGh1cnNkYXksIHZhbHVlOiAnVGh1cnNkYXknIH0sXHJcbiAgICAgIHsgbGFiZWw6IHRoaXMubGl0ZXJhbHMuZnJpZGF5LCB2YWx1ZTogJ0ZyaWRheScgfSxcclxuICAgICAgeyBsYWJlbDogdGhpcy5saXRlcmFscy5zYXR1cmRheSwgdmFsdWU6ICdTYXR1cmRheScgfVxyXG4gICAgXTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc3Vic2NyaWJlUHJvY2Vzc0lkVmFsdWVDaGFuZ2VzKCkge1xyXG4gICAgdGhpcy5mb3JtLmNvbnRyb2xzWydwcm9jZXNzSUQnXS52YWx1ZUNoYW5nZXMuc3Vic2NyaWJlKHByb2Nlc3NJZCA9PiB7XHJcbiAgICAgIHRoaXMuY2hhbmdlUHJvY2Vzcy5lbWl0KHsgcHJvY2Vzc0lkLCBleGlzdEFQSTogdGhpcy5leGlzdFByb2Nlc3NBUEkgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcbiJdfQ==