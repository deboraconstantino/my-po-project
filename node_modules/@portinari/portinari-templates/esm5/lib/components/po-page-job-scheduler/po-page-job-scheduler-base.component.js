/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Input } from '@angular/core';
import { PoPageJobSchedulerInternal } from './po-page-job-scheduler-internal';
/**
 * \@description
 *
 * O `po-page-job-scheduler` é uma página para criação e atualização de agendamentos da execução de processos (Job Scheduler),
 * como por exemplo: a geração da folha de pagamento dos funcionários.
 *
 * Para utilizar esta página, basta informar o serviço (endpoint) para consumo,
 * sem a necessidade de criar componentes e tratamentos dos dados.
 *
 * Veja mais sobre os padrões utilizados nas requisições no [Guia de implementação de APIs](guides/api).
 */
var PoPageJobSchedulerBaseComponent = /** @class */ (function () {
    function PoPageJobSchedulerBaseComponent(poPageJobSchedulerService) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        /**
         * Objeto com as propriedades do breadcrumb.
         */
        this.breadcrumb = { items: [] };
        this.model = new PoPageJobSchedulerInternal();
    }
    /**
     * @protected
     * @param {?} id
     * @return {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.loadData = /**
     * @protected
     * @param {?} id
     * @return {?}
     */
    function (id) {
        var _this = this;
        if (!id) {
            this.model = new PoPageJobSchedulerInternal();
            return;
        }
        this.poPageJobSchedulerService.getResource(id).toPromise().then((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            _this.model = response;
        })).catch((/**
         * @return {?}
         */
        function () {
            _this.model = new PoPageJobSchedulerInternal();
        }));
    };
    /**
     * @protected
     * @param {?} controls
     * @return {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.markAsDirtyInvalidControls = /**
     * @protected
     * @param {?} controls
     * @return {?}
     */
    function (controls) {
        for (var key in controls) {
            if (controls.hasOwnProperty(key)) {
                /** @type {?} */
                var control = controls[key];
                if (control.invalid) {
                    control.markAsDirty();
                }
            }
        }
    };
    PoPageJobSchedulerBaseComponent.propDecorators = {
        breadcrumb: [{ type: Input, args: ['p-breadcrumb',] }],
        serviceApi: [{ type: Input, args: ['p-service-api',] }],
        title: [{ type: Input, args: ['p-title',] }]
    };
    return PoPageJobSchedulerBaseComponent;
}());
export { PoPageJobSchedulerBaseComponent };
if (false) {
    /**
     * Objeto com as propriedades do breadcrumb.
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.breadcrumb;
    /**
     * Endpoint usado pelo componente para busca dos processos e parâmetros que serão utilizados para criação e edição dos agendamentos.
     *
     * #### Processos
     *
     * Os processos são as tarefas que estarão disponíveis para o usuário poder fazer os agendamentos.
     * Ao inicializar o componente, será feito uma requisição `GET` para o endpoint `{service-api}/processes`, para buscar
     * essa lista de processos.
     *
     * Este endpoint `{service-api}/processes` deve retornar uma lista de objetos que seguem a definição de dados abaixo:
     *
     * ```
     * GET {service-api}/processes
     * ```
     *
     * ```
     * {
     *   items: [
     *     { "processID": "ac4f", "description": "Gerar folha de pagamento" },
     *     { "processID": "df6l", "description": "Relatório de imposto a recolher" },
     *     { "processID": "dk3p", "description": "Títulos em aberto" },
     *   ]
     * }
     * ```
     *
     * Desta forma será renderizado um componente para selecionar o processo e/ou filtrá-los.
     *
     * Para realizar o filtro de busca do processo, será feita uma requisição enviando o conteúdo digitado na busca através do
     * parâmetro `search`. Da seguinte forma:
     *
     * ```
     * GET {service-api}/processes?search=relatorio
     * ```
     *
     * > Veja mais sobre paginação e filtros no [Guia de implementação de APIs](guides/api).
     *
     * Também é possível fazer um agendamento de um processo específico, sem que seja necessário um endpoint para busca desses
     * processos. Então, caso o endpoint `{service-api}/processes` não seja válido, será apresentado um campo de entrada de
     * texto para o usuário informar diretamente
     * o **identificador do processo - `processID`** e ao salvar será enviado um `POST` para o endpoint difinido `serviceApi` conforme abaixo:
     *
     * ```
     * POST {service-api}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "daily": { "hour": 10, "minute": 12 },
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": true,
     *   "processID": "ac0405"
     *   ...
     * }
     * ```
     *
     * Caso seja necessário informar parâmetros e adicionar configurações no processo selecionado, será realizado um `GET`
     * como exemplificado abaixo. Os parâmetros devem retornar uma lista de objetos que seguem a interface
     * [PoDynamicFormField](/documentation/po-dynamic-form).
     *
     * ```
     * GET {service-api}/processes/:id/parameters
     * ...
     * {
     *   items: [
     *     { "property": "vencimento", type: "date" },
     *     { "property": "imposto-retido", "label": "Imposto Retido", type: "boolean" }
     *   ]
     * }
     * ```
     *
     * #### Salvar e Atualizar
     *
     * Para salvar o agendamento, será feita uma requisição de criação, passando os valores preenchidos pelo usuário via *payload*.
     * Abaixo uma requisição `POST` disparada, onde as propriedades do *Job Scheduler* foram preenchidas:
     *
     * ```
     *  POST {service-api}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": true,
     *   "daily": { "hour": 10, "minute": 12 },
     *   "processID": "ac0405"
     * }
     * ```
     *
     * Caso queira que o componente carregue um agendamento já existente, deve ser incluído um parâmetro na rota chamado `id`.
     *
     * Exemplo de configuração de rota:
     *
     * ```
     *  RouterModule.forRoot([
     *    ...
     *    { path: 'edit/:id', component: ExampleJobSchedulerComponent },
     *    ...
     *  ],
     * ```
     *
     * Baseado nisso, na inicialização do template será disparado uma requisição para buscar o recurso que será editado.
     *
     * ```
     * GET {service-api}/{id}
     * ```
     *
     * Ao atualizar o agendamento, será disparado um `PUT` com os dados preenchidos.
     * Veja abaixo uma requisição `PUT` disparada, onde a propriedade *recurrent* e *daily* foram atualizadas:
     *
     * ```
     *  PUT {service-api}/{id}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": false,
     *   "daily": { "hour": 11, "minute": 30 },
     *   "processID": "ac0405"
     * }
     * ```
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.serviceApi;
    /**
     * Título da página.
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.title;
    /** @type {?} */
    PoPageJobSchedulerBaseComponent.prototype.model;
    /**
     * @type {?}
     * @protected
     */
    PoPageJobSchedulerBaseComponent.prototype.poPageJobSchedulerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1qb2Itc2NoZWR1bGVyL3BvLXBhZ2Utam9iLXNjaGVkdWxlci1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUt0QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7Ozs7Ozs7Ozs7O0FBYzlFO0lBNElFLHlDQUFzQix5QkFBb0Q7UUFBcEQsOEJBQXlCLEdBQXpCLHlCQUF5QixDQUEyQjs7OztRQXpJbkQsZUFBVSxHQUFrQixFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsQ0FBQztRQXVJakUsVUFBSyxHQUEyQixJQUFJLDBCQUEwQixFQUFFLENBQUM7SUFFWSxDQUFDOzs7Ozs7SUFFcEUsa0RBQVE7Ozs7O0lBQWxCLFVBQW1CLEVBQW1CO1FBQXRDLGlCQVlDO1FBWEMsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNQLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1lBQzlDLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSTs7OztRQUFDLFVBQUMsUUFBZ0M7WUFDL0YsS0FBSSxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUM7UUFDeEIsQ0FBQyxFQUFDLENBQUMsS0FBSzs7O1FBQUM7WUFDUCxLQUFJLENBQUMsS0FBSyxHQUFHLElBQUksMEJBQTBCLEVBQUUsQ0FBQztRQUNoRCxDQUFDLEVBQUMsQ0FBQztJQUVMLENBQUM7Ozs7OztJQUVTLG9FQUEwQjs7Ozs7SUFBcEMsVUFBcUMsUUFBNEM7UUFDL0UsS0FBSyxJQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7WUFDMUIsSUFBSSxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFOztvQkFDMUIsT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUM7Z0JBRTdCLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtvQkFDbkIsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO2lCQUN2QjthQUNGO1NBQ0Y7SUFDSCxDQUFDOzs2QkFuS0EsS0FBSyxTQUFDLGNBQWM7NkJBa0lwQixLQUFLLFNBQUMsZUFBZTt3QkFHckIsS0FBSyxTQUFDLFNBQVM7O0lBZ0NsQixzQ0FBQztDQUFBLEFBeEtELElBd0tDO1NBeEtZLCtCQUErQjs7Ozs7O0lBRzFDLHFEQUFpRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWtJakUscURBQTJDOzs7OztJQUczQyxnREFBZ0M7O0lBRWhDLGdEQUFpRTs7Ozs7SUFFckQsb0VBQThEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSW5wdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9CcmVhZGNydW1iIH0gZnJvbSAnQHBvcnRpbmFyaS9wb3J0aW5hcmktdWknO1xuXG5pbXBvcnQgeyBQb0pvYlNjaGVkdWxlckludGVybmFsIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLWpvYi1zY2hlZHVsZXItaW50ZXJuYWwuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsIH0gZnJvbSAnLi9wby1wYWdlLWpvYi1zY2hlZHVsZXItaW50ZXJuYWwnO1xuaW1wb3J0IHsgUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSB9IGZyb20gJy4vcG8tcGFnZS1qb2Itc2NoZWR1bGVyLnNlcnZpY2UnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gYHBvLXBhZ2Utam9iLXNjaGVkdWxlcmAgw6kgdW1hIHDDoWdpbmEgcGFyYSBjcmlhw6fDo28gZSBhdHVhbGl6YcOnw6NvIGRlIGFnZW5kYW1lbnRvcyBkYSBleGVjdcOnw6NvIGRlIHByb2Nlc3NvcyAoSm9iIFNjaGVkdWxlciksXG4gKiBjb21vIHBvciBleGVtcGxvOiBhIGdlcmHDp8OjbyBkYSBmb2xoYSBkZSBwYWdhbWVudG8gZG9zIGZ1bmNpb27DoXJpb3MuXG4gKlxuICogUGFyYSB1dGlsaXphciBlc3RhIHDDoWdpbmEsIGJhc3RhIGluZm9ybWFyIG8gc2VydmnDp28gKGVuZHBvaW50KSBwYXJhIGNvbnN1bW8sXG4gKiBzZW0gYSBuZWNlc3NpZGFkZSBkZSBjcmlhciBjb21wb25lbnRlcyBlIHRyYXRhbWVudG9zIGRvcyBkYWRvcy5cbiAqXG4gKiBWZWphIG1haXMgc29icmUgb3MgcGFkcsO1ZXMgdXRpbGl6YWRvcyBuYXMgcmVxdWlzacOnw7VlcyBubyBbR3VpYSBkZSBpbXBsZW1lbnRhw6fDo28gZGUgQVBJc10oZ3VpZGVzL2FwaSkuXG4gKi9cbmV4cG9ydCBjbGFzcyBQb1BhZ2VKb2JTY2hlZHVsZXJCYXNlQ29tcG9uZW50IHtcblxuICAvKiogT2JqZXRvIGNvbSBhcyBwcm9wcmllZGFkZXMgZG8gYnJlYWRjcnVtYi4gKi9cbiAgQElucHV0KCdwLWJyZWFkY3J1bWInKSBicmVhZGNydW1iPzogUG9CcmVhZGNydW1iID0geyBpdGVtczogW10gfTtcblxuICAvKipcbiAgICogRW5kcG9pbnQgdXNhZG8gcGVsbyBjb21wb25lbnRlIHBhcmEgYnVzY2EgZG9zIHByb2Nlc3NvcyBlIHBhcsOibWV0cm9zIHF1ZSBzZXLDo28gdXRpbGl6YWRvcyBwYXJhIGNyaWHDp8OjbyBlIGVkacOnw6NvIGRvcyBhZ2VuZGFtZW50b3MuXG4gICAqXG4gICAqICMjIyMgUHJvY2Vzc29zXG4gICAqXG4gICAqIE9zIHByb2Nlc3NvcyBzw6NvIGFzIHRhcmVmYXMgcXVlIGVzdGFyw6NvIGRpc3BvbsOtdmVpcyBwYXJhIG8gdXN1w6FyaW8gcG9kZXIgZmF6ZXIgb3MgYWdlbmRhbWVudG9zLlxuICAgKiBBbyBpbmljaWFsaXphciBvIGNvbXBvbmVudGUsIHNlcsOhIGZlaXRvIHVtYSByZXF1aXNpw6fDo28gYEdFVGAgcGFyYSBvIGVuZHBvaW50IGB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc2AsIHBhcmEgYnVzY2FyXG4gICAqIGVzc2EgbGlzdGEgZGUgcHJvY2Vzc29zLlxuICAgKlxuICAgKiBFc3RlIGVuZHBvaW50IGB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc2AgZGV2ZSByZXRvcm5hciB1bWEgbGlzdGEgZGUgb2JqZXRvcyBxdWUgc2VndWVtIGEgZGVmaW5pw6fDo28gZGUgZGFkb3MgYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzXG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIGl0ZW1zOiBbXG4gICAqICAgICB7IFwicHJvY2Vzc0lEXCI6IFwiYWM0ZlwiLCBcImRlc2NyaXB0aW9uXCI6IFwiR2VyYXIgZm9saGEgZGUgcGFnYW1lbnRvXCIgfSxcbiAgICogICAgIHsgXCJwcm9jZXNzSURcIjogXCJkZjZsXCIsIFwiZGVzY3JpcHRpb25cIjogXCJSZWxhdMOzcmlvIGRlIGltcG9zdG8gYSByZWNvbGhlclwiIH0sXG4gICAqICAgICB7IFwicHJvY2Vzc0lEXCI6IFwiZGszcFwiLCBcImRlc2NyaXB0aW9uXCI6IFwiVMOtdHVsb3MgZW0gYWJlcnRvXCIgfSxcbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIERlc3RhIGZvcm1hIHNlcsOhIHJlbmRlcml6YWRvIHVtIGNvbXBvbmVudGUgcGFyYSBzZWxlY2lvbmFyIG8gcHJvY2Vzc28gZS9vdSBmaWx0csOhLWxvcy5cbiAgICpcbiAgICogUGFyYSByZWFsaXphciBvIGZpbHRybyBkZSBidXNjYSBkbyBwcm9jZXNzbywgc2Vyw6EgZmVpdGEgdW1hIHJlcXVpc2nDp8OjbyBlbnZpYW5kbyBvIGNvbnRlw7pkbyBkaWdpdGFkbyBuYSBidXNjYSBhdHJhdsOpcyBkb1xuICAgKiBwYXLDom1ldHJvIGBzZWFyY2hgLiBEYSBzZWd1aW50ZSBmb3JtYTpcbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlcz9zZWFyY2g9cmVsYXRvcmlvXG4gICAqIGBgYFxuICAgKlxuICAgKiA+IFZlamEgbWFpcyBzb2JyZSBwYWdpbmHDp8OjbyBlIGZpbHRyb3Mgbm8gW0d1aWEgZGUgaW1wbGVtZW50YcOnw6NvIGRlIEFQSXNdKGd1aWRlcy9hcGkpLlxuICAgKlxuICAgKiBUYW1iw6ltIMOpIHBvc3PDrXZlbCBmYXplciB1bSBhZ2VuZGFtZW50byBkZSB1bSBwcm9jZXNzbyBlc3BlY8OtZmljbywgc2VtIHF1ZSBzZWphIG5lY2Vzc8OhcmlvIHVtIGVuZHBvaW50IHBhcmEgYnVzY2EgZGVzc2VzXG4gICAqIHByb2Nlc3Nvcy4gRW50w6NvLCBjYXNvIG8gZW5kcG9pbnQgYHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzYCBuw6NvIHNlamEgdsOhbGlkbywgc2Vyw6EgYXByZXNlbnRhZG8gdW0gY2FtcG8gZGUgZW50cmFkYSBkZVxuICAgKiB0ZXh0byBwYXJhIG8gdXN1w6FyaW8gaW5mb3JtYXIgZGlyZXRhbWVudGVcbiAgICogbyAqKmlkZW50aWZpY2Fkb3IgZG8gcHJvY2Vzc28gLSBgcHJvY2Vzc0lEYCoqIGUgYW8gc2FsdmFyIHNlcsOhIGVudmlhZG8gdW0gYFBPU1RgIHBhcmEgbyBlbmRwb2ludCBkaWZpbmlkbyBgc2VydmljZUFwaWAgY29uZm9ybWUgYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogUE9TVCB7c2VydmljZS1hcGl9XG4gICAqIGBgYFxuICAgKlxuICAgKiAqUmVxdWVzdCBwYXlsb2FkKiAtIGVzdHJ1dHVyYSBkZSBkYWRvcyBlbnZpYWRhIG5vIGNvcnBvIGRhIHJlcXVpc2nDp8OjbyBjb25mb3JtZSBpbnRlcmZhY2UgYFBvSm9iU2NoZWR1bGVyYDpcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAxMiB9LFxuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcInByb2Nlc3NJRFwiOiBcImFjMDQwNVwiXG4gICAqICAgLi4uXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIENhc28gc2VqYSBuZWNlc3PDoXJpbyBpbmZvcm1hciBwYXLDom1ldHJvcyBlIGFkaWNpb25hciBjb25maWd1cmHDp8O1ZXMgbm8gcHJvY2Vzc28gc2VsZWNpb25hZG8sIHNlcsOhIHJlYWxpemFkbyB1bSBgR0VUYFxuICAgKiBjb21vIGV4ZW1wbGlmaWNhZG8gYWJhaXhvLiBPcyBwYXLDom1ldHJvcyBkZXZlbSByZXRvcm5hciB1bWEgbGlzdGEgZGUgb2JqZXRvcyBxdWUgc2VndWVtIGEgaW50ZXJmYWNlXG4gICAqIFtQb0R5bmFtaWNGb3JtRmllbGRdKC9kb2N1bWVudGF0aW9uL3BvLWR5bmFtaWMtZm9ybSkuXG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXMvOmlkL3BhcmFtZXRlcnNcbiAgICogLi4uXG4gICAqIHtcbiAgICogICBpdGVtczogW1xuICAgKiAgICAgeyBcInByb3BlcnR5XCI6IFwidmVuY2ltZW50b1wiLCB0eXBlOiBcImRhdGVcIiB9LFxuICAgKiAgICAgeyBcInByb3BlcnR5XCI6IFwiaW1wb3N0by1yZXRpZG9cIiwgXCJsYWJlbFwiOiBcIkltcG9zdG8gUmV0aWRvXCIsIHR5cGU6IFwiYm9vbGVhblwiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqICMjIyMgU2FsdmFyIGUgQXR1YWxpemFyXG4gICAqXG4gICAqIFBhcmEgc2FsdmFyIG8gYWdlbmRhbWVudG8sIHNlcsOhIGZlaXRhIHVtYSByZXF1aXNpw6fDo28gZGUgY3JpYcOnw6NvLCBwYXNzYW5kbyBvcyB2YWxvcmVzIHByZWVuY2hpZG9zIHBlbG8gdXN1w6FyaW8gdmlhICpwYXlsb2FkKi5cbiAgICogQWJhaXhvIHVtYSByZXF1aXNpw6fDo28gYFBPU1RgIGRpc3BhcmFkYSwgb25kZSBhcyBwcm9wcmllZGFkZXMgZG8gKkpvYiBTY2hlZHVsZXIqIGZvcmFtIHByZWVuY2hpZGFzOlxuICAgKlxuICAgKiBgYGBcbiAgICogIFBPU1Qge3NlcnZpY2UtYXBpfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJmaXJzdEV4ZWN1dGlvblwiOiBcIjIwMTgtMTItMDdUMDA6MDA6MDEtMDA6MDBcIixcbiAgICogICBcInJlY3VycmVudFwiOiB0cnVlLFxuICAgKiAgIFwiZGFpbHlcIjogeyBcImhvdXJcIjogMTAsIFwibWludXRlXCI6IDEyIH0sXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBDYXNvIHF1ZWlyYSBxdWUgbyBjb21wb25lbnRlIGNhcnJlZ3VlIHVtIGFnZW5kYW1lbnRvIGrDoSBleGlzdGVudGUsIGRldmUgc2VyIGluY2x1w61kbyB1bSBwYXLDom1ldHJvIG5hIHJvdGEgY2hhbWFkbyBgaWRgLlxuICAgKlxuICAgKiBFeGVtcGxvIGRlIGNvbmZpZ3VyYcOnw6NvIGRlIHJvdGE6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgUm91dGVyTW9kdWxlLmZvclJvb3QoW1xuICAgKiAgICAuLi5cbiAgICogICAgeyBwYXRoOiAnZWRpdC86aWQnLCBjb21wb25lbnQ6IEV4YW1wbGVKb2JTY2hlZHVsZXJDb21wb25lbnQgfSxcbiAgICogICAgLi4uXG4gICAqICBdLFxuICAgKiBgYGBcbiAgICpcbiAgICogQmFzZWFkbyBuaXNzbywgbmEgaW5pY2lhbGl6YcOnw6NvIGRvIHRlbXBsYXRlIHNlcsOhIGRpc3BhcmFkbyB1bWEgcmVxdWlzacOnw6NvIHBhcmEgYnVzY2FyIG8gcmVjdXJzbyBxdWUgc2Vyw6EgZWRpdGFkby5cbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3tpZH1cbiAgICogYGBgXG4gICAqXG4gICAqIEFvIGF0dWFsaXphciBvIGFnZW5kYW1lbnRvLCBzZXLDoSBkaXNwYXJhZG8gdW0gYFBVVGAgY29tIG9zIGRhZG9zIHByZWVuY2hpZG9zLlxuICAgKiBWZWphIGFiYWl4byB1bWEgcmVxdWlzacOnw6NvIGBQVVRgIGRpc3BhcmFkYSwgb25kZSBhIHByb3ByaWVkYWRlICpyZWN1cnJlbnQqIGUgKmRhaWx5KiBmb3JhbSBhdHVhbGl6YWRhczpcbiAgICpcbiAgICogYGBgXG4gICAqICBQVVQge3NlcnZpY2UtYXBpfS97aWR9XG4gICAqIGBgYFxuICAgKlxuICAgKiAqUmVxdWVzdCBwYXlsb2FkKiAtIGVzdHJ1dHVyYSBkZSBkYWRvcyBlbnZpYWRhIG5vIGNvcnBvIGRhIHJlcXVpc2nDp8OjbyBjb25mb3JtZSBpbnRlcmZhY2UgYFBvSm9iU2NoZWR1bGVyYDpcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBcImZpcnN0RXhlY3V0aW9uXCI6IFwiMjAxOC0xMi0wN1QwMDowMDowMS0wMDowMFwiLFxuICAgKiAgIFwicmVjdXJyZW50XCI6IGZhbHNlLFxuICAgKiAgIFwiZGFpbHlcIjogeyBcImhvdXJcIjogMTEsIFwibWludXRlXCI6IDMwIH0sXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIlxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgQElucHV0KCdwLXNlcnZpY2UtYXBpJykgc2VydmljZUFwaTogc3RyaW5nO1xuXG4gIC8qKiBUw610dWxvIGRhIHDDoWdpbmEuICovXG4gIEBJbnB1dCgncC10aXRsZScpIHRpdGxlOiBzdHJpbmc7XG5cbiAgbW9kZWw6IFBvSm9iU2NoZWR1bGVySW50ZXJuYWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZTogUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSkge31cblxuICBwcm90ZWN0ZWQgbG9hZERhdGEoaWQ6IHN0cmluZyB8IG51bWJlcikge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRoaXMubW9kZWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UuZ2V0UmVzb3VyY2UoaWQpLnRvUHJvbWlzZSgpLnRoZW4oKHJlc3BvbnNlOiBQb0pvYlNjaGVkdWxlckludGVybmFsKSA9PiB7XG4gICAgICB0aGlzLm1vZGVsID0gcmVzcG9uc2U7XG4gICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgdGhpcy5tb2RlbCA9IG5ldyBQb1BhZ2VKb2JTY2hlZHVsZXJJbnRlcm5hbCgpO1xuICAgIH0pO1xuXG4gIH1cblxuICBwcm90ZWN0ZWQgbWFya0FzRGlydHlJbnZhbGlkQ29udHJvbHMoY29udHJvbHM6IHsgW2tleTogc3RyaW5nXTogQWJzdHJhY3RDb250cm9sIH0gKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gY29udHJvbHMpIHtcbiAgICAgIGlmIChjb250cm9scy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSBjb250cm9sc1trZXldO1xuXG4gICAgICAgIGlmIChjb250cm9sLmludmFsaWQpIHtcbiAgICAgICAgICBjb250cm9sLm1hcmtBc0RpcnR5KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuIl19