/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { DatePipe } from '@angular/common';
import { PoInfoOrientation } from '@portinari/portinari-ui';
var PoPageJobSchedulerSummaryComponent = /** @class */ (function () {
    function PoPageJobSchedulerSummaryComponent(datePipe) {
        this.datePipe = datePipe;
        this.executionValue = '';
        this.firstExecutionValue = '';
        this.infoOrientation = PoInfoOrientation.Horizontal;
        this.periodicityValue = '';
        this.recurrentValue = '';
        this.literals = (/** @type {?} */ ({}));
        this.parameters = [];
        this.value = (/** @type {?} */ ({}));
    }
    /**
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _a = this.value, periodicity = _a.periodicity, hour = _a.hour, dayOfMonth = _a.dayOfMonth, daysOfWeek = _a.daysOfWeek, recurrent = _a.recurrent, firstExecution = _a.firstExecution, firstExecutionHour = _a.firstExecutionHour;
        this.periodicityValue = this.getPeriodicityLabel(periodicity);
        this.executionValue = this.getExecutionValue(periodicity, hour, daysOfWeek, dayOfMonth);
        this.firstExecutionValue = this.getFirstExecutionLabel(firstExecution, firstExecutionHour);
        this.recurrentValue = this.getRecurrentValue(recurrent);
    };
    /**
     * @private
     * @param {?} periodicity
     * @param {?=} hour
     * @param {?=} daysOfWeek
     * @param {?=} dayOfMonth
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getExecutionValue = /**
     * @private
     * @param {?} periodicity
     * @param {?=} hour
     * @param {?=} daysOfWeek
     * @param {?=} dayOfMonth
     * @return {?}
     */
    function (periodicity, hour, daysOfWeek, dayOfMonth) {
        switch (periodicity) {
            case 'daily':
                return this.getHourLabel(hour);
            case 'monthly':
                return this.getMonthlyLabelExecution(dayOfMonth, hour);
            case 'weekly':
                return this.getWeeklyLabelExecution(daysOfWeek, hour);
            default:
                return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?} firstExecution
     * @param {?=} firstExecutionHour
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getFirstExecutionLabel = /**
     * @private
     * @param {?} firstExecution
     * @param {?=} firstExecutionHour
     * @return {?}
     */
    function (firstExecution, firstExecutionHour) {
        if (firstExecution) {
            /** @type {?} */
            var date = this.datePipe.transform(firstExecution, 'dd/MM/yyyy', '-0200');
            return date + " " + this.getHourLabel(firstExecutionHour);
        }
        else {
            return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?} hour
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getHourLabel = /**
     * @private
     * @param {?} hour
     * @return {?}
     */
    function (hour) {
        return this.literals.at + " " + (hour || '00:00') + "h";
    };
    /**
     * @private
     * @param {?} dayOfMonth
     * @param {?} hour
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getMonthlyLabelExecution = /**
     * @private
     * @param {?} dayOfMonth
     * @param {?} hour
     * @return {?}
     */
    function (dayOfMonth, hour) {
        /** @type {?} */
        var hourLabel = this.getHourLabel(hour);
        return this.literals.day + " " + dayOfMonth + " " + hourLabel;
    };
    /**
     * @private
     * @param {?} periodicity
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getPeriodicityLabel = /**
     * @private
     * @param {?} periodicity
     * @return {?}
     */
    function (periodicity) {
        switch (periodicity) {
            case 'daily':
                return this.literals.daily;
            case 'monthly':
                return this.literals.monthly;
            case 'weekly':
                return this.literals.weekly;
            default:
                return this.literals.single;
        }
    };
    /**
     * @private
     * @param {?} recurrent
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getRecurrentValue = /**
     * @private
     * @param {?} recurrent
     * @return {?}
     */
    function (recurrent) {
        return recurrent ? this.literals.yes : this.literals.no;
    };
    /**
     * @private
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getSorterWeekDays = /**
     * @private
     * @return {?}
     */
    function () {
        return {
            'sunday': 0,
            'monday': 1,
            'tuesday': 2,
            'wednesday': 3,
            'thursday': 4,
            'friday': 5,
            'saturday': 6
        };
    };
    /**
     * @private
     * @param {?} day
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getTranslateWeekDay = /**
     * @private
     * @param {?} day
     * @return {?}
     */
    function (day) {
        /** @type {?} */
        var days = {
            Sunday: this.literals.sunday,
            Monday: this.literals.monday,
            Tuesday: this.literals.tuesday,
            Wednesday: this.literals.wednesday,
            Thursday: this.literals.thursday,
            Friday: this.literals.friday,
            Saturday: this.literals.saturday,
        };
        return days[day] || '';
    };
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getWeekDaysLabel = /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    function (days) {
        var _this = this;
        if (days === void 0) { days = []; }
        /** @type {?} */
        var weekDaysSorted = this.sortWeekDays(days);
        return weekDaysSorted.map((/**
         * @param {?} day
         * @return {?}
         */
        function (day) { return _this.getTranslateWeekDay(day); })).join(', ');
    };
    /**
     * @private
     * @param {?} daysOfWeek
     * @param {?} hour
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.getWeeklyLabelExecution = /**
     * @private
     * @param {?} daysOfWeek
     * @param {?} hour
     * @return {?}
     */
    function (daysOfWeek, hour) {
        if (daysOfWeek && Array.isArray(daysOfWeek)) {
            return this.getWeekDaysLabel(daysOfWeek) + " " + this.getHourLabel(hour);
        }
        else {
            return this.literals.notReported;
        }
    };
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    PoPageJobSchedulerSummaryComponent.prototype.sortWeekDays = /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    function (days) {
        if (days === void 0) { days = []; }
        /** @type {?} */
        var sorterWeekDays = this.getSorterWeekDays();
        return days.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) {
            /** @type {?} */
            var currDay = a.toLowerCase();
            /** @type {?} */
            var nextDay = b.toLowerCase();
            return sorterWeekDays[currDay] > sorterWeekDays[nextDay] ? 1 : -1;
        }));
    };
    PoPageJobSchedulerSummaryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'po-page-job-scheduler-summary',
                    template: "<div class=\"po-md-12\">\n  <po-info\n    [p-label]=\"literals.process\"\n    [p-orientation]=\"infoOrientation\"\n    [p-value]=\"value.processID\">\n  </po-info>\n\n  <po-info\n    [p-label]=\"literals.periodicity\"\n    [p-orientation]=\"infoOrientation\"\n    [p-value]=\"periodicityValue\">\n  </po-info>\n\n  <po-info *ngIf=\"value.periodicity !== 'single'\"\n    [p-label]=\"literals.execution\"\n    [p-orientation]=\"infoOrientation\"\n    [p-value]=\"executionValue\">\n  </po-info>\n\n  <po-info\n    [p-label]=\"literals.recurrent\"\n    [p-orientation]=\"infoOrientation\"\n    [p-value]=\"recurrentValue\">\n  </po-info>\n\n  <po-info\n    [p-label]=\"literals.firstExecution\"\n    [p-orientation]=\"infoOrientation\"\n    [p-value]=\"firstExecutionValue\">\n  </po-info>\n</div>\n\n<po-widget *ngIf=\"parameters && parameters.length\"\n  class=\"po-pt-1 po-pb-1 po-md-12\"\n  [p-title]=\"literals.parameters\">\n\n  <po-dynamic-view\n    [p-fields]=\"parameters\"\n    [p-value]=\"value.executionParameter\">\n  </po-dynamic-view>\n\n</po-widget>\n\n"
                }] }
    ];
    /** @nocollapse */
    PoPageJobSchedulerSummaryComponent.ctorParameters = function () { return [
        { type: DatePipe }
    ]; };
    PoPageJobSchedulerSummaryComponent.propDecorators = {
        literals: [{ type: Input, args: ['p-literals',] }],
        parameters: [{ type: Input, args: ['p-parameters',] }],
        value: [{ type: Input, args: ['p-value',] }]
    };
    return PoPageJobSchedulerSummaryComponent;
}());
export { PoPageJobSchedulerSummaryComponent };
if (false) {
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.executionValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.firstExecutionValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.infoOrientation;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.periodicityValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.recurrentValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.literals;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.parameters;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.value;
    /**
     * @type {?}
     * @private
     */
    PoPageJobSchedulerSummaryComponent.prototype.datePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLXN1bW1hcnkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1qb2Itc2NoZWR1bGVyL3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5L3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTNDLE9BQU8sRUFBc0IsaUJBQWlCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUloRjtJQWtCRSw0Q0FBb0IsUUFBa0I7UUFBbEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtRQVp0QyxtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUNwQix3QkFBbUIsR0FBRyxFQUFFLENBQUM7UUFDekIsb0JBQWUsR0FBRyxpQkFBaUIsQ0FBQyxVQUFVLENBQUM7UUFDL0MscUJBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLG1CQUFjLEdBQUcsRUFBRSxDQUFDO1FBRUMsYUFBUSxHQUFHLG1CQUFNLEVBQUUsRUFBQSxDQUFDO1FBRWxCLGVBQVUsR0FBOEIsRUFBRSxDQUFDO1FBRWhELFVBQUssR0FBMkIsbUJBQU0sRUFBRSxFQUFBLENBQUM7SUFFbEIsQ0FBQzs7OztJQUUxQyxxREFBUTs7O0lBQVI7UUFDUSxJQUFBLGVBQXlHLEVBQXZHLDRCQUFXLEVBQUUsY0FBSSxFQUFFLDBCQUFVLEVBQUUsMEJBQVUsRUFBRSx3QkFBUyxFQUFFLGtDQUFjLEVBQUUsMENBQWlDO1FBRS9HLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsbUJBQW1CLENBQUMsV0FBVyxDQUFDLENBQUM7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QUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztTQUNsQztJQUNILENBQUM7Ozs7OztJQUVPLHlEQUFZOzs7OztJQUFwQixVQUFxQixJQUF3QjtRQUF4QixxQkFBQSxFQUFBLFNBQXdCOztZQUNyQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFO1FBRS9DLE9BQU8sSUFBSSxDQUFDLElBQUk7Ozs7O1FBQUMsVUFBQyxDQUFTLEVBQUUsQ0FBUzs7Z0JBQzlCLE9BQU8sR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFOztnQkFDekIsT0FBTyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUU7WUFFL0IsT0FBTyxjQUFjLENBQUMsT0FBTyxDQUFDLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLENBQUMsRUFBQyxDQUFDO0lBQ0wsQ0FBQzs7Z0JBaElGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsK0JBQStCO29CQUN6QyxzakNBQTJEO2lCQUM1RDs7OztnQkFUUSxRQUFROzs7MkJBa0JkLEtBQUssU0FBQyxZQUFZOzZCQUVsQixLQUFLLFNBQUMsY0FBYzt3QkFFcEIsS0FBSyxTQUFDLFNBQVM7O0lBa0hsQix5Q0FBQztDQUFBLEFBbElELElBa0lDO1NBOUhZLGtDQUFrQzs7O0lBRTdDLDREQUFvQjs7SUFDcEIsaUVBQXlCOztJQUN6Qiw2REFBK0M7O0lBQy9DLDhEQUFzQjs7SUFDdEIsNERBQW9COztJQUVwQixzREFBeUM7O0lBRXpDLHdEQUFrRTs7SUFFbEUsbURBQTJEOzs7OztJQUUvQyxzREFBMEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGVQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgUG9EeW5hbWljVmlld0ZpZWxkLCBQb0luZm9PcmllbnRhdGlvbiB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcblxuaW1wb3J0IHsgUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcG8tam9iLXNjaGVkdWxlci1pbnRlcm5hbC5pbnRlcmZhY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1wYWdlLWpvYi1zY2hlZHVsZXItc3VtbWFyeScsXG4gIHRlbXBsYXRlVXJsOiAncG8tcGFnZS1qb2Itc2NoZWR1bGVyLXN1bW1hcnkuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFBvUGFnZUpvYlNjaGVkdWxlclN1bW1hcnlDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIGV4ZWN1dGlvblZhbHVlID0gJyc7XG4gIGZpcnN0RXhlY3V0aW9uVmFsdWUgPSAnJztcbiAgaW5mb09yaWVudGF0aW9uID0gUG9JbmZvT3JpZW50YXRpb24uSG9yaXpvbnRhbDtcbiAgcGVyaW9kaWNpdHlWYWx1ZSA9ICcnO1xuICByZWN1cnJlbnRWYWx1ZSA9ICcnO1xuXG4gIEBJbnB1dCgncC1saXRlcmFscycpIGxpdGVyYWxzID0gPGFueT4ge307XG5cbiAgQElucHV0KCdwLXBhcmFtZXRlcnMnKSBwYXJhbWV0ZXJzOiBBcnJheTxQb0R5bmFtaWNWaWV3RmllbGQ+ID0gW107XG5cbiAgQElucHV0KCdwLXZhbHVlJykgdmFsdWU6IFBvSm9iU2NoZWR1bGVySW50ZXJuYWwgPSA8YW55PiB7fTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGVQaXBlOiBEYXRlUGlwZSkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICBjb25zdCB7IHBlcmlvZGljaXR5LCBob3VyLCBkYXlPZk1vbnRoLCBkYXlzT2ZXZWVrLCByZWN1cnJlbnQsIGZpcnN0RXhlY3V0aW9uLCBmaXJzdEV4ZWN1dGlvbkhvdXIgfSA9IHRoaXMudmFsdWU7XG5cbiAgICB0aGlzLnBlcmlvZGljaXR5VmFsdWUgPSB0aGlzLmdldFBlcmlvZGljaXR5TGFiZWwocGVyaW9kaWNpdHkpO1xuICAgIHRoaXMuZXhlY3V0aW9uVmFsdWUgPSB0aGlzLmdldEV4ZWN1dGlvblZhbHVlKHBlcmlvZGljaXR5LCBob3VyLCBkYXlzT2ZXZWVrLCBkYXlPZk1vbnRoKTtcbiAgICB0aGlzLmZpcnN0RXhlY3V0aW9uVmFsdWUgPSB0aGlzLmdldEZpcnN0RXhlY3V0aW9uTGFiZWwoZmlyc3RFeGVjdXRpb24sIGZpcnN0RXhlY3V0aW9uSG91cik7XG4gICAgdGhpcy5yZWN1cnJlbnRWYWx1ZSA9IHRoaXMuZ2V0UmVjdXJyZW50VmFsdWUocmVjdXJyZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0RXhlY3V0aW9uVmFsdWUocGVyaW9kaWNpdHk6IHN0cmluZywgaG91cj86IHN0cmluZywgZGF5c09mV2Vlaz86IEFycmF5PHN0cmluZz4sIGRheU9mTW9udGg/OiBudW1iZXIpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZGljaXR5KSB7XG4gICAgICBjYXNlICdkYWlseSc6XG4gICAgICAgIHJldHVybiB0aGlzLmdldEhvdXJMYWJlbChob3VyKTtcbiAgICAgIGNhc2UgJ21vbnRobHknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRNb250aGx5TGFiZWxFeGVjdXRpb24oZGF5T2ZNb250aCwgaG91cik7XG4gICAgICBjYXNlICd3ZWVrbHknOlxuICAgICAgICByZXR1cm4gdGhpcy5nZXRXZWVrbHlMYWJlbEV4ZWN1dGlvbihkYXlzT2ZXZWVrLCBob3VyKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0aGlzLmxpdGVyYWxzLm5vdFJlcG9ydGVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0Rmlyc3RFeGVjdXRpb25MYWJlbChmaXJzdEV4ZWN1dGlvbjogRGF0ZSwgZmlyc3RFeGVjdXRpb25Ib3VyPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZmlyc3RFeGVjdXRpb24pIHtcbiAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmRhdGVQaXBlLnRyYW5zZm9ybShmaXJzdEV4ZWN1dGlvbiwgJ2RkL01NL3l5eXknLCAnLTAyMDAnKTtcblxuICAgICAgcmV0dXJuIGAke2RhdGV9ICR7dGhpcy5nZXRIb3VyTGFiZWwoZmlyc3RFeGVjdXRpb25Ib3VyKX1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5ub3RSZXBvcnRlZDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldEhvdXJMYWJlbChob3VyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5saXRlcmFscy5hdH0gJHtob3VyIHx8ICcwMDowMCd9aGA7XG4gIH1cblxuICBwcml2YXRlIGdldE1vbnRobHlMYWJlbEV4ZWN1dGlvbihkYXlPZk1vbnRoOiBudW1iZXIsIGhvdXI6IHN0cmluZykge1xuICAgIGNvbnN0IGhvdXJMYWJlbCA9IHRoaXMuZ2V0SG91ckxhYmVsKGhvdXIpO1xuXG4gICAgcmV0dXJuIGAke3RoaXMubGl0ZXJhbHMuZGF5fSAke2RheU9mTW9udGh9ICR7aG91ckxhYmVsfWA7XG4gIH1cblxuICBwcml2YXRlIGdldFBlcmlvZGljaXR5TGFiZWwocGVyaW9kaWNpdHkpIHtcbiAgICBzd2l0Y2ggKHBlcmlvZGljaXR5KSB7XG4gICAgICBjYXNlICdkYWlseSc6XG4gICAgICAgIHJldHVybiB0aGlzLmxpdGVyYWxzLmRhaWx5O1xuICAgICAgY2FzZSAnbW9udGhseSc6XG4gICAgICAgIHJldHVybiB0aGlzLmxpdGVyYWxzLm1vbnRobHk7XG4gICAgICBjYXNlICd3ZWVrbHknOlxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy53ZWVrbHk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5zaW5nbGU7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRSZWN1cnJlbnRWYWx1ZShyZWN1cnJlbnQ6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIHJldHVybiByZWN1cnJlbnQgPyB0aGlzLmxpdGVyYWxzLnllcyA6IHRoaXMubGl0ZXJhbHMubm87XG4gIH1cblxuICBwcml2YXRlIGdldFNvcnRlcldlZWtEYXlzKCkge1xuICAgIHJldHVybiB7XG4gICAgICAnc3VuZGF5JzogMCxcbiAgICAgICdtb25kYXknOiAxLFxuICAgICAgJ3R1ZXNkYXknOiAyLFxuICAgICAgJ3dlZG5lc2RheSc6IDMsXG4gICAgICAndGh1cnNkYXknOiA0LFxuICAgICAgJ2ZyaWRheSc6IDUsXG4gICAgICAnc2F0dXJkYXknOiA2XG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VHJhbnNsYXRlV2Vla0RheShkYXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF5cyA9IHtcbiAgICAgIFN1bmRheTogdGhpcy5saXRlcmFscy5zdW5kYXksXG4gICAgICBNb25kYXk6IHRoaXMubGl0ZXJhbHMubW9uZGF5LFxuICAgICAgVHVlc2RheTogdGhpcy5saXRlcmFscy50dWVzZGF5LFxuICAgICAgV2VkbmVzZGF5OiB0aGlzLmxpdGVyYWxzLndlZG5lc2RheSxcbiAgICAgIFRodXJzZGF5OiB0aGlzLmxpdGVyYWxzLnRodXJzZGF5LFxuICAgICAgRnJpZGF5OiB0aGlzLmxpdGVyYWxzLmZyaWRheSxcbiAgICAgIFNhdHVyZGF5OiB0aGlzLmxpdGVyYWxzLnNhdHVyZGF5LFxuICAgIH07XG5cbiAgICByZXR1cm4gZGF5c1tkYXldIHx8ICcnO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXZWVrRGF5c0xhYmVsKGRheXM6IEFycmF5PHN0cmluZz4gPSBbXSk6IHN0cmluZyB7XG4gICAgY29uc3Qgd2Vla0RheXNTb3J0ZWQgPSB0aGlzLnNvcnRXZWVrRGF5cyhkYXlzKTtcblxuICAgIHJldHVybiB3ZWVrRGF5c1NvcnRlZC5tYXAoZGF5ID0+IHRoaXMuZ2V0VHJhbnNsYXRlV2Vla0RheShkYXkpKS5qb2luKCcsICcpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRXZWVrbHlMYWJlbEV4ZWN1dGlvbihkYXlzT2ZXZWVrOiBBcnJheTxzdHJpbmc+LCBob3VyOiBzdHJpbmcpIHtcbiAgICBpZiAoZGF5c09mV2VlayAmJiBBcnJheS5pc0FycmF5KGRheXNPZldlZWspKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5nZXRXZWVrRGF5c0xhYmVsKGRheXNPZldlZWspfSAke3RoaXMuZ2V0SG91ckxhYmVsKGhvdXIpfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmxpdGVyYWxzLm5vdFJlcG9ydGVkO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc29ydFdlZWtEYXlzKGRheXM6IEFycmF5PHN0cmluZz4gPSBbXSkge1xuICAgIGNvbnN0IHNvcnRlcldlZWtEYXlzID0gdGhpcy5nZXRTb3J0ZXJXZWVrRGF5cygpO1xuXG4gICAgcmV0dXJuIGRheXMuc29ydCgoYTogc3RyaW5nLCBiOiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IGN1cnJEYXkgPSBhLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBuZXh0RGF5ID0gYi50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICByZXR1cm4gc29ydGVyV2Vla0RheXNbY3VyckRheV0gPiBzb3J0ZXJXZWVrRGF5c1tuZXh0RGF5XSA/IDEgOiAtMTtcbiAgICB9KTtcbiAgfVxuXG59XG4iXX0=