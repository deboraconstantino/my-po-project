/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { PoModalComponent } from '@portinari/portinari-ui';
import { poLocaleDefault } from '../../../utils/util';
/** @type {?} */
export var poAdvancedFiltersLiteralsDefault = {
    en: (/** @type {?} */ ({
        title: 'Advanced search',
        cancelLabel: 'Cancel',
        confirmLabel: 'Apply filters'
    })),
    es: (/** @type {?} */ ({
        title: 'Búsqueda avanzada',
        cancelLabel: 'Cancelar',
        confirmLabel: 'Aplicar filtros'
    })),
    pt: (/** @type {?} */ ({
        title: 'Busca avançada',
        cancelLabel: 'Cancelar',
        confirmLabel: 'Aplicar filtros'
    })),
    ru: (/** @type {?} */ ({
        title: 'Расширенный поиск',
        cancelLabel: 'отменить',
        confirmLabel: 'Применить фильтры'
    }))
};
/**
 * \@docsPrivate
 *
 * \@description
 *
 * Filtro de busca avançada criado a partir de um formulário dinâmico.
 * Componente de uso interno.
 */
var PoAdvancedFilterBaseComponent = /** @class */ (function () {
    function PoAdvancedFilterBaseComponent(languageService) {
        var _this = this;
        this._filters = [];
        this.filter = {};
        this.language = poLocaleDefault;
        this.primaryAction = {
            action: (/**
             * @return {?}
             */
            function () {
                /** @type {?} */
                var models = _this.getValuesFromForm();
                _this.searchEvent.emit(models);
                _this.poModal.close();
            }),
            label: this.literals.confirmLabel
        };
        this.secondaryAction = {
            action: (/**
             * @return {?}
             */
            function () {
                _this.poModal.close();
            }),
            label: this.literals.cancelLabel
        };
        /**
         * Função que será disparada e receberá os valores do formulário ao ser clicado no botão buscar.
         */
        this.searchEvent = new EventEmitter();
        this.language = languageService.getShortLanguage();
    }
    Object.defineProperty(PoAdvancedFilterBaseComponent.prototype, "filters", {
        get: /**
         * @return {?}
         */
        function () {
            return this._filters;
        },
        /**
         * Coleção de objetos que implementam a interface PoDynamicFormField, para definição dos campos que serão criados
         * dinamicamente.
         */
        set: /**
         * Coleção de objetos que implementam a interface PoDynamicFormField, para definição dos campos que serão criados
         * dinamicamente.
         * @param {?} filters
         * @return {?}
         */
        function (filters) {
            this._filters = Array.isArray(filters) ? tslib_1.__spread(filters) : [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PoAdvancedFilterBaseComponent.prototype, "literals", {
        get: /**
         * @return {?}
         */
        function () {
            return this._literals || poAdvancedFiltersLiteralsDefault[this.language];
        },
        /** Objeto com as literais usadas no `po-advanced-filter`. */
        set: /**
         * Objeto com as literais usadas no `po-advanced-filter`.
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (value instanceof Object && !(value instanceof Array)) {
                this._literals = tslib_1.__assign({}, poAdvancedFiltersLiteralsDefault[poLocaleDefault], poAdvancedFiltersLiteralsDefault[this.language], value);
            }
            else {
                this._literals = poAdvancedFiltersLiteralsDefault[this.language];
            }
            this.primaryAction.label = this.literals.confirmLabel;
            this.secondaryAction.label = this.literals.cancelLabel;
        },
        enumerable: true,
        configurable: true
    });
    // Retorna os models dos campos preenchidos
    // Retorna os models dos campos preenchidos
    /**
     * @private
     * @return {?}
     */
    PoAdvancedFilterBaseComponent.prototype.getValuesFromForm = 
    // Retorna os models dos campos preenchidos
    /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        Object.keys(this.filter).forEach((/**
         * @param {?} property
         * @return {?}
         */
        function (property) {
            if (_this.filter[property] === undefined || _this.filter[property] === '') {
                delete _this.filter[property];
            }
        }));
        return this.filter;
    };
    PoAdvancedFilterBaseComponent.propDecorators = {
        poModal: [{ type: ViewChild, args: [PoModalComponent, { static: true },] }],
        filters: [{ type: Input, args: ['p-filters',] }],
        literals: [{ type: Input, args: ['p-literals',] }],
        searchEvent: [{ type: Output, args: ['p-search-event',] }]
    };
    return PoAdvancedFilterBaseComponent;
}());
export { PoAdvancedFilterBaseComponent };
if (false) {
    /** @type {?} */
    PoAdvancedFilterBaseComponent.prototype.poModal;
    /**
     * @type {?}
     * @private
     */
    PoAdvancedFilterBaseComponent.prototype._filters;
    /**
     * @type {?}
     * @private
     */
    PoAdvancedFilterBaseComponent.prototype._literals;
    /** @type {?} */
    PoAdvancedFilterBaseComponent.prototype.filter;
    /** @type {?} */
    PoAdvancedFilterBaseComponent.prototype.language;
    /** @type {?} */
    PoAdvancedFilterBaseComponent.prototype.primaryAction;
    /** @type {?} */
    PoAdvancedFilterBaseComponent.prototype.secondaryAction;
    /**
     * Função que será disparada e receberá os valores do formulário ao ser clicado no botão buscar.
     * @type {?}
     */
    PoAdvancedFilterBaseComponent.prototype.searchEvent;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tYWR2YW5jZWQtZmlsdGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1keW5hbWljLXNlYXJjaC9wby1hZHZhbmNlZC1maWx0ZXIvcG8tYWR2YW5jZWQtZmlsdGVyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV2RSxPQUFPLEVBQXdELGdCQUFnQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFFakgsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDOztBQUl0RCxNQUFNLEtBQU8sZ0NBQWdDLEdBQUc7SUFDOUMsRUFBRSxFQUFFLG1CQUEyQjtRQUM3QixLQUFLLEVBQUUsaUJBQWlCO1FBQ3hCLFdBQVcsRUFBRSxRQUFRO1FBQ3JCLFlBQVksRUFBRSxlQUFlO0tBQzlCLEVBQUE7SUFDRCxFQUFFLEVBQUUsbUJBQTJCO1FBQzdCLEtBQUssRUFBRSxtQkFBbUI7UUFDMUIsV0FBVyxFQUFFLFVBQVU7UUFDdkIsWUFBWSxFQUFFLGlCQUFpQjtLQUNoQyxFQUFBO0lBQ0QsRUFBRSxFQUFFLG1CQUEyQjtRQUM3QixLQUFLLEVBQUUsZ0JBQWdCO1FBQ3ZCLFdBQVcsRUFBRSxVQUFVO1FBQ3ZCLFlBQVksRUFBRSxpQkFBaUI7S0FDaEMsRUFBQTtJQUNELEVBQUUsRUFBRSxtQkFBMkI7UUFDN0IsS0FBSyxFQUFFLG1CQUFtQjtRQUMxQixXQUFXLEVBQUUsVUFBVTtRQUN2QixZQUFZLEVBQUUsbUJBQW1CO0tBQ2xDLEVBQUE7Q0FDRjs7Ozs7Ozs7O0FBVUQ7SUE4REUsdUNBQVksZUFBa0M7UUFBOUMsaUJBRUM7UUE1RE8sYUFBUSxHQUE4QixF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RUQsSUE2RUM7U0E3RVksNkJBQTZCOzs7SUFFeEMsZ0RBQXlFOzs7OztJQUV6RSxpREFBaUQ7Ozs7O0lBQ2pELGtEQUE0Qzs7SUFFNUMsK0NBQVk7O0lBQ1osaURBQW1DOztJQUVuQyxzREFRRTs7SUFFRix3REFLRTs7Ozs7SUFtQ0Ysb0RBQWdFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9EeW5hbWljRm9ybUZpZWxkLCBQb0xhbmd1YWdlU2VydmljZSwgUG9Nb2RhbEFjdGlvbiwgUG9Nb2RhbENvbXBvbmVudCB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcblxuaW1wb3J0IHsgcG9Mb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvdXRpbCc7XG5cbmltcG9ydCB7IFBvQWR2YW5jZWRGaWx0ZXJMaXRlcmFscyB9IGZyb20gJy4vcG8tYWR2YW5jZWQtZmlsdGVyLWxpdGVyYWxzLmludGVyZmFjZSc7XG5cbmV4cG9ydCBjb25zdCBwb0FkdmFuY2VkRmlsdGVyc0xpdGVyYWxzRGVmYXVsdCA9IHtcbiAgZW46IDxQb0FkdmFuY2VkRmlsdGVyTGl0ZXJhbHM+IHtcbiAgICB0aXRsZTogJ0FkdmFuY2VkIHNlYXJjaCcsXG4gICAgY2FuY2VsTGFiZWw6ICdDYW5jZWwnLFxuICAgIGNvbmZpcm1MYWJlbDogJ0FwcGx5IGZpbHRlcnMnXG4gIH0sXG4gIGVzOiA8UG9BZHZhbmNlZEZpbHRlckxpdGVyYWxzPiB7XG4gICAgdGl0bGU6ICdCw7pzcXVlZGEgYXZhbnphZGEnLFxuICAgIGNhbmNlbExhYmVsOiAnQ2FuY2VsYXInLFxuICAgIGNvbmZpcm1MYWJlbDogJ0FwbGljYXIgZmlsdHJvcydcbiAgfSxcbiAgcHQ6IDxQb0FkdmFuY2VkRmlsdGVyTGl0ZXJhbHM+IHtcbiAgICB0aXRsZTogJ0J1c2NhIGF2YW7Dp2FkYScsXG4gICAgY2FuY2VsTGFiZWw6ICdDYW5jZWxhcicsXG4gICAgY29uZmlybUxhYmVsOiAnQXBsaWNhciBmaWx0cm9zJ1xuICB9LFxuICBydTogPFBvQWR2YW5jZWRGaWx0ZXJMaXRlcmFscz4ge1xuICAgIHRpdGxlOiAn0KDQsNGB0YjQuNGA0LXQvdC90YvQuSDQv9C+0LjRgdC6JyxcbiAgICBjYW5jZWxMYWJlbDogJ9C+0YLQvNC10L3QuNGC0YwnLFxuICAgIGNvbmZpcm1MYWJlbDogJ9Cf0YDQuNC80LXQvdC40YLRjCDRhNC40LvRjNGC0YDRiydcbiAgfVxufTtcblxuLyoqXG4gKiBAZG9jc1ByaXZhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBGaWx0cm8gZGUgYnVzY2EgYXZhbsOnYWRhIGNyaWFkbyBhIHBhcnRpciBkZSB1bSBmb3JtdWzDoXJpbyBkaW7Dom1pY28uXG4gKiBDb21wb25lbnRlIGRlIHVzbyBpbnRlcm5vLlxuICovXG5leHBvcnQgY2xhc3MgUG9BZHZhbmNlZEZpbHRlckJhc2VDb21wb25lbnQge1xuXG4gIEBWaWV3Q2hpbGQoUG9Nb2RhbENvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSkgcG9Nb2RhbDogUG9Nb2RhbENvbXBvbmVudDtcblxuICBwcml2YXRlIF9maWx0ZXJzOiBBcnJheTxQb0R5bmFtaWNGb3JtRmllbGQ+ID0gW107XG4gIHByaXZhdGUgX2xpdGVyYWxzOiBQb0FkdmFuY2VkRmlsdGVyTGl0ZXJhbHM7XG5cbiAgZmlsdGVyID0ge307XG4gIGxhbmd1YWdlOiBzdHJpbmcgPSBwb0xvY2FsZURlZmF1bHQ7XG5cbiAgcHJpbWFyeUFjdGlvbjogUG9Nb2RhbEFjdGlvbiA9IHtcbiAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgIGNvbnN0IG1vZGVscyA9IHRoaXMuZ2V0VmFsdWVzRnJvbUZvcm0oKTtcblxuICAgICAgdGhpcy5zZWFyY2hFdmVudC5lbWl0KG1vZGVscyk7XG4gICAgICB0aGlzLnBvTW9kYWwuY2xvc2UoKTtcbiAgICB9LFxuICAgIGxhYmVsOiB0aGlzLmxpdGVyYWxzLmNvbmZpcm1MYWJlbFxuICB9O1xuXG4gIHNlY29uZGFyeUFjdGlvbjogUG9Nb2RhbEFjdGlvbiA9IHtcbiAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgIHRoaXMucG9Nb2RhbC5jbG9zZSgpO1xuICAgIH0sXG4gICAgbGFiZWw6IHRoaXMubGl0ZXJhbHMuY2FuY2VsTGFiZWxcbiAgfTtcblxuICAvKipcbiAgICogQ29sZcOnw6NvIGRlIG9iamV0b3MgcXVlIGltcGxlbWVudGFtIGEgaW50ZXJmYWNlIFBvRHluYW1pY0Zvcm1GaWVsZCwgcGFyYSBkZWZpbmnDp8OjbyBkb3MgY2FtcG9zIHF1ZSBzZXLDo28gY3JpYWRvc1xuICAgKiBkaW5hbWljYW1lbnRlLlxuICAgKi9cbiAgQElucHV0KCdwLWZpbHRlcnMnKSBzZXQgZmlsdGVycyhmaWx0ZXJzOiBBcnJheTxQb0R5bmFtaWNGb3JtRmllbGQ+KSB7XG4gICAgdGhpcy5fZmlsdGVycyA9IEFycmF5LmlzQXJyYXkoZmlsdGVycykgPyBbLi4uZmlsdGVyc10gOiBbXTtcbiAgfVxuXG4gIGdldCBmaWx0ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLl9maWx0ZXJzO1xuICB9XG5cbiAgLyoqIE9iamV0byBjb20gYXMgbGl0ZXJhaXMgdXNhZGFzIG5vIGBwby1hZHZhbmNlZC1maWx0ZXJgLiAqL1xuICBASW5wdXQoJ3AtbGl0ZXJhbHMnKSBzZXQgbGl0ZXJhbHModmFsdWU6IFBvQWR2YW5jZWRGaWx0ZXJMaXRlcmFscykge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICB0aGlzLl9saXRlcmFscyA9IHtcbiAgICAgICAgLi4ucG9BZHZhbmNlZEZpbHRlcnNMaXRlcmFsc0RlZmF1bHRbcG9Mb2NhbGVEZWZhdWx0XSxcbiAgICAgICAgLi4ucG9BZHZhbmNlZEZpbHRlcnNMaXRlcmFsc0RlZmF1bHRbdGhpcy5sYW5ndWFnZV0sXG4gICAgICAgIC4uLnZhbHVlXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saXRlcmFscyA9IHBvQWR2YW5jZWRGaWx0ZXJzTGl0ZXJhbHNEZWZhdWx0W3RoaXMubGFuZ3VhZ2VdO1xuICAgIH1cblxuICAgIHRoaXMucHJpbWFyeUFjdGlvbi5sYWJlbCA9IHRoaXMubGl0ZXJhbHMuY29uZmlybUxhYmVsO1xuICAgIHRoaXMuc2Vjb25kYXJ5QWN0aW9uLmxhYmVsID0gdGhpcy5saXRlcmFscy5jYW5jZWxMYWJlbDtcbiAgfVxuXG4gIGdldCBsaXRlcmFscygpIHtcbiAgICByZXR1cm4gdGhpcy5fbGl0ZXJhbHMgfHwgcG9BZHZhbmNlZEZpbHRlcnNMaXRlcmFsc0RlZmF1bHRbdGhpcy5sYW5ndWFnZV07XG4gIH1cblxuICAvKiogRnVuw6fDo28gcXVlIHNlcsOhIGRpc3BhcmFkYSBlIHJlY2ViZXLDoSBvcyB2YWxvcmVzIGRvIGZvcm11bMOhcmlvIGFvIHNlciBjbGljYWRvIG5vIGJvdMOjbyBidXNjYXIuICovXG4gIEBPdXRwdXQoJ3Atc2VhcmNoLWV2ZW50Jykgc2VhcmNoRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBjb25zdHJ1Y3RvcihsYW5ndWFnZVNlcnZpY2U6IFBvTGFuZ3VhZ2VTZXJ2aWNlKSB7XG4gICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlU2VydmljZS5nZXRTaG9ydExhbmd1YWdlKCk7XG4gIH1cblxuICAgIC8vIFJldG9ybmEgb3MgbW9kZWxzIGRvcyBjYW1wb3MgcHJlZW5jaGlkb3NcbiAgcHJpdmF0ZSBnZXRWYWx1ZXNGcm9tRm9ybSgpIHtcbiAgICBPYmplY3Qua2V5cyh0aGlzLmZpbHRlcikuZm9yRWFjaChwcm9wZXJ0eSA9PiB7XG4gICAgICBpZiAodGhpcy5maWx0ZXJbcHJvcGVydHldID09PSB1bmRlZmluZWQgfHwgdGhpcy5maWx0ZXJbcHJvcGVydHldID09PSAnJykge1xuICAgICAgICBkZWxldGUgdGhpcy5maWx0ZXJbcHJvcGVydHldO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyO1xuICB9XG5cbn1cbiJdfQ==