/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { from } from 'rxjs';
import { map } from 'rxjs/operators';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
var PoPageCustomizationService = /** @class */ (function () {
    function PoPageCustomizationService(http) {
        this.http = http;
    }
    /**
     * @param {?} origin
     * @param {?} originalOption
     * @return {?}
     */
    PoPageCustomizationService.prototype.getCustomOptions = /**
     * @param {?} origin
     * @param {?} originalOption
     * @return {?}
     */
    function (origin, originalOption) {
        var _this = this;
        return this.createObservable(origin).pipe(map((/**
         * @param {?} newPageOptions
         * @return {?}
         */
        function (newPageOptions) { return _this.mergePageOptions(originalOption, newPageOptions); })));
    };
    /**
     * @template T, K
     * @param {?} objectToChange
     * @param {?} newOptions
     * @return {?}
     */
    PoPageCustomizationService.prototype.changeOriginalOptionsToNewOptions = /**
     * @template T, K
     * @param {?} objectToChange
     * @param {?} newOptions
     * @return {?}
     */
    function (objectToChange, newOptions) {
        Object.keys(newOptions).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) {
            /** @type {?} */
            var value = newOptions[key];
            if (objectToChange[key]) {
                if (Array.isArray(value)) {
                    objectToChange[key] = tslib_1.__spread(value);
                    return;
                }
                if ((typeof (value) === 'number' || typeof (value) === 'string')) {
                    objectToChange[key] = value;
                    return;
                }
                if (typeof (value) === 'object') {
                    objectToChange[key] = tslib_1.__assign({}, value);
                }
            }
        }));
    };
    /**
     * @private
     * @param {?} origin
     * @return {?}
     */
    PoPageCustomizationService.prototype.createObservable = /**
     * @private
     * @param {?} origin
     * @return {?}
     */
    function (origin) {
        if (typeof origin === 'string') {
            return this.http.post(origin, {});
        }
        return from(Promise.resolve(origin()));
    };
    /**
     * @private
     * @param {?} originalOption
     * @param {?} newPageOptions
     * @return {?}
     */
    PoPageCustomizationService.prototype.mergePageOptions = /**
     * @private
     * @param {?} originalOption
     * @param {?} newPageOptions
     * @return {?}
     */
    function (originalOption, newPageOptions) {
        /** @type {?} */
        var mergePageOptions = {
            filters: this.mergeOptions(originalOption.filters, newPageOptions.filters, 'property'),
            actions: this.mergeOptions(originalOption.actions, newPageOptions.actions, 'label'),
            breadcrumb: newPageOptions.breadcrumb ? newPageOptions.breadcrumb : originalOption.breadcrumb,
            title: newPageOptions.title ? newPageOptions.title : originalOption.title
        };
        Object.keys(mergePageOptions).forEach((/**
         * @param {?} key
         * @return {?}
         */
        function (key) { return !mergePageOptions[key] && delete mergePageOptions[key]; }));
        return mergePageOptions;
    };
    /**
     * @private
     * @template T
     * @param {?} originalOptions
     * @param {?} newOptions
     * @param {?} filterProp
     * @return {?}
     */
    PoPageCustomizationService.prototype.mergeOptions = /**
     * @private
     * @template T
     * @param {?} originalOptions
     * @param {?} newOptions
     * @param {?} filterProp
     * @return {?}
     */
    function (originalOptions, newOptions, filterProp) {
        if (!originalOptions && !newOptions) {
            return;
        }
        if (!newOptions) {
            return originalOptions;
        }
        if (!originalOptions) {
            return newOptions;
        }
        /** @type {?} */
        var deduplicateNewOptions = newOptions.filter((/**
         * @param {?} newItem
         * @return {?}
         */
        function (newItem) { return !originalOptions.find((/**
         * @param {?} originalItem
         * @return {?}
         */
        function (originalItem) { return originalItem[filterProp] === newItem[filterProp]; })); }));
        /** @type {?} */
        var mergedOriginalOptions = originalOptions.map((/**
         * @param {?} originalItem
         * @return {?}
         */
        function (originalItem) {
            /** @type {?} */
            var newItem = newOptions.find((/**
             * @param {?} newOptionsItem
             * @return {?}
             */
            function (newOptionsItem) { return originalItem[filterProp] === newOptionsItem[filterProp]; })) || originalItem;
            return tslib_1.__assign({}, originalItem, newItem);
        }));
        return tslib_1.__spread(mergedOriginalOptions, deduplicateNewOptions);
    };
    PoPageCustomizationService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    PoPageCustomizationService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    /** @nocollapse */ PoPageCustomizationService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function PoPageCustomizationService_Factory() { return new PoPageCustomizationService(i0.ɵɵinject(i1.HttpClient)); }, token: PoPageCustomizationService, providedIn: "root" });
    return PoPageCustomizationService;
}());
export { PoPageCustomizationService };
if (false) {
    /**
     * @type {?}
     * @private
     */
    PoPageCustomizationService.prototype.http;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1jdXN0b21pemF0aW9uLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvcG8tcGFnZS1jdXN0b21pemF0aW9uL3BvLXBhZ2UtY3VzdG9taXphdGlvbi5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBQ2xELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFjLElBQUksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUN4QyxPQUFPLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7OztBQUlyQztJQU1FLG9DQUFvQixJQUFnQjtRQUFoQixTQUFJLEdBQUosSUFBSSxDQUFZO0lBQUksQ0FBQzs7Ozs7O0lBRXpDLHFEQUFnQjs7Ozs7SUFBaEIsVUFBaUIsTUFBb0MsRUFBRSxjQUFvQztRQUEzRixpQkFJQztRQUhDLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FDdkMsR0FBRzs7OztRQUFDLFVBQUEsY0FBYyxJQUFJLE9BQUEsS0FBSSxDQUFDLGdCQUFnQixDQUFDLGNBQWMsRUFBRSxjQUFjLENBQUMsRUFBckQsQ0FBcUQsRUFBQyxDQUM3RSxDQUFDO0lBQ0osQ0FBQzs7Ozs7OztJQUVELHNFQUFpQzs7Ozs7O0lBQWpDLFVBQXdDLGNBQWlCLEVBQUUsVUFBYTtRQUN0RSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU87Ozs7UUFBQyxVQUFBLEdBQUc7O2dCQUMzQixLQUFLLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQztZQUM3QixJQUFJLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDdkIsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFD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RUFBQyxJQUFJLFlBQVk7WUFDMUgsNEJBQVcsWUFBWSxFQUFLLE9BQU8sRUFBRTtRQUN2QyxDQUFDLEVBQ0Y7UUFFRCx3QkFBVyxxQkFBcUIsRUFBSyxxQkFBcUIsRUFBRTtJQUM5RCxDQUFDOztnQkExRUYsVUFBVSxTQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQjs7OztnQkFWUSxVQUFVOzs7cUNBQW5CO0NBbUZDLEFBM0VELElBMkVDO1NBdkVZLDBCQUEwQjs7Ozs7O0lBRXpCLDBDQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IE9ic2VydmFibGUsIGZyb20gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IG1hcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgUG9QYWdlRHluYW1pY09wdGlvbnMsIFVybE9yUG9DdXN0b21pemF0aW9uRnVuY3Rpb24gfSBmcm9tICcuL3BvLXBhZ2UtZHluYW1pYy1vcHRpb25zLmludGVyZmFjZSc7XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuXG5leHBvcnQgY2xhc3MgUG9QYWdlQ3VzdG9taXphdGlvblNlcnZpY2Uge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cDogSHR0cENsaWVudCkgeyB9XG5cbiAgZ2V0Q3VzdG9tT3B0aW9ucyhvcmlnaW46IFVybE9yUG9DdXN0b21pemF0aW9uRnVuY3Rpb24sIG9yaWdpbmFsT3B0aW9uOiBQb1BhZ2VEeW5hbWljT3B0aW9ucyk6IE9ic2VydmFibGU8UG9QYWdlRHluYW1pY09wdGlvbnM+IHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVPYnNlcnZhYmxlKG9yaWdpbikucGlwZShcbiAgICAgIG1hcChuZXdQYWdlT3B0aW9ucyA9PiB0aGlzLm1lcmdlUGFnZU9wdGlvbnMob3JpZ2luYWxPcHRpb24sIG5ld1BhZ2VPcHRpb25zKSlcbiAgICApO1xuICB9XG5cbiAgY2hhbmdlT3JpZ2luYWxPcHRpb25zVG9OZXdPcHRpb25zPFQsIEs+KG9iamVjdFRvQ2hhbmdlOiBULCBuZXdPcHRpb25zOiBLKSB7XG4gICAgT2JqZWN0LmtleXMobmV3T3B0aW9ucykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBuZXdPcHRpb25zW2tleV07XG4gICAgICBpZiAob2JqZWN0VG9DaGFuZ2Vba2V5XSkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBvYmplY3RUb0NoYW5nZVtrZXldID0gWy4uLnZhbHVlXTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCh0eXBlb2YgKHZhbHVlKSA9PT0gJ251bWJlcicgfHwgdHlwZW9mICh2YWx1ZSkgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICAgIG9iamVjdFRvQ2hhbmdlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiAodmFsdWUpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIG9iamVjdFRvQ2hhbmdlW2tleV0gPSB7IC4uLnZhbHVlIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlT2JzZXJ2YWJsZShvcmlnaW46IFVybE9yUG9DdXN0b21pemF0aW9uRnVuY3Rpb24pOiBPYnNlcnZhYmxlPFBvUGFnZUR5bmFtaWNPcHRpb25zPiB7XG4gICAgaWYgKHR5cGVvZiBvcmlnaW4gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3Q8UG9QYWdlRHluYW1pY09wdGlvbnM+KG9yaWdpbiwge30pO1xuICAgIH1cbiAgICByZXR1cm4gZnJvbShQcm9taXNlLnJlc29sdmUob3JpZ2luKCkpKTtcbiAgfVxuXG4gIHByaXZhdGUgbWVyZ2VQYWdlT3B0aW9ucyhvcmlnaW5hbE9wdGlvbjogUG9QYWdlRHluYW1pY09wdGlvbnMsIG5ld1BhZ2VPcHRpb25zOiBQb1BhZ2VEeW5hbWljT3B0aW9ucyk6IFBvUGFnZUR5bmFtaWNPcHRpb25zIHtcbiAgICBjb25zdCBtZXJnZVBhZ2VPcHRpb25zOiBQb1BhZ2VEeW5hbWljT3B0aW9ucyA9IHtcbiAgICAgIGZpbHRlcnM6IHRoaXMubWVyZ2VPcHRpb25zKG9yaWdpbmFsT3B0aW9uLmZpbHRlcnMsIG5ld1BhZ2VPcHRpb25zLmZpbHRlcnMsICdwcm9wZXJ0eScpLFxuICAgICAgYWN0aW9uczogdGhpcy5tZXJnZU9wdGlvbnMob3JpZ2luYWxPcHRpb24uYWN0aW9ucywgbmV3UGFnZU9wdGlvbnMuYWN0aW9ucywgJ2xhYmVsJyksXG4gICAgICBicmVhZGNydW1iOiBuZXdQYWdlT3B0aW9ucy5icmVhZGNydW1iID8gbmV3UGFnZU9wdGlvbnMuYnJlYWRjcnVtYiA6IG9yaWdpbmFsT3B0aW9uLmJyZWFkY3J1bWIsXG4gICAgICB0aXRsZTogbmV3UGFnZU9wdGlvbnMudGl0bGUgPyBuZXdQYWdlT3B0aW9ucy50aXRsZSA6IG9yaWdpbmFsT3B0aW9uLnRpdGxlXG4gICAgfTtcblxuICAgIE9iamVjdC5rZXlzKG1lcmdlUGFnZU9wdGlvbnMpLmZvckVhY2goa2V5ID0+ICFtZXJnZVBhZ2VPcHRpb25zW2tleV0gJiYgZGVsZXRlIG1lcmdlUGFnZU9wdGlvbnNba2V5XSk7XG5cbiAgICByZXR1cm4gbWVyZ2VQYWdlT3B0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgbWVyZ2VPcHRpb25zPFQ+KG9yaWdpbmFsT3B0aW9uczogQXJyYXk8VD4sIG5ld09wdGlvbnM6IEFycmF5PFQ+LCBmaWx0ZXJQcm9wOiBrZXlvZiBUKTogQXJyYXk8VD4ge1xuXG4gICAgaWYgKCFvcmlnaW5hbE9wdGlvbnMgJiYgIW5ld09wdGlvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFuZXdPcHRpb25zKSB7XG4gICAgICByZXR1cm4gb3JpZ2luYWxPcHRpb25zO1xuICAgIH1cbiAgICBpZiAoIW9yaWdpbmFsT3B0aW9ucykge1xuICAgICAgcmV0dXJuIG5ld09wdGlvbnM7XG4gICAgfVxuXG4gICAgY29uc3QgZGVkdXBsaWNhdGVOZXdPcHRpb25zID0gbmV3T3B0aW9ucy5maWx0ZXIoXG4gICAgICBuZXdJdGVtID0+ICFvcmlnaW5hbE9wdGlvbnMuZmluZChvcmlnaW5hbEl0ZW0gPT4gb3JpZ2luYWxJdGVtW2ZpbHRlclByb3BdID09PSBuZXdJdGVtW2ZpbHRlclByb3BdKSk7XG4gICAgY29uc3QgbWVyZ2VkT3JpZ2luYWxPcHRpb25zID0gb3JpZ2luYWxPcHRpb25zLm1hcChvcmlnaW5hbEl0ZW0gPT4ge1xuICAgICAgICBjb25zdCBuZXdJdGVtID0gbmV3T3B0aW9ucy5maW5kKG5ld09wdGlvbnNJdGVtID0+IG9yaWdpbmFsSXRlbVtmaWx0ZXJQcm9wXSA9PT0gbmV3T3B0aW9uc0l0ZW1bZmlsdGVyUHJvcF0pIHx8IG9yaWdpbmFsSXRlbTtcbiAgICAgICAgcmV0dXJuIHsuLi5vcmlnaW5hbEl0ZW0sIC4uLm5ld0l0ZW19O1xuICAgICAgfVxuICAgICk7XG5cbiAgICByZXR1cm4gWy4uLm1lcmdlZE9yaWdpbmFsT3B0aW9ucywgLi4uZGVkdXBsaWNhdGVOZXdPcHRpb25zXTtcbiAgfVxufVxuIl19