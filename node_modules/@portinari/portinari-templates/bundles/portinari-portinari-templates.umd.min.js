!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("@portinari/portinari-ui"),require("@angular/router"),require("@angular/common/http"),require("rxjs/operators"),require("rxjs")):"function"==typeof define&&define.amd?define("@portinari/portinari-templates",["exports","@angular/core","@angular/common","@angular/forms","@portinari/portinari-ui","@angular/router","@angular/common/http","rxjs/operators","rxjs"],t):t(((e=e||self).portinari=e.portinari||{},e.portinari["portinari-templates"]={}),e.ng.core,e.ng.common,e.ng.forms,e.portinariUi,e.ng.router,e.ng.common.http,e.rxjs.operators,e.rxjs)}(this,(function(e,t,o,r,n,i,s,a,c){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)};function l(e,t){function o(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}var u=function(){return(u=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function d(e,t,o,r){return new(o||(o=Promise))((function(n,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function h(e,t){var o,r,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,r&&(n=2&i[0]?r.return:i[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,i[1])).done)return n;switch(r=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function m(e,t){var o="function"==typeof Symbol&&e[Symbol.iterator];if(!o)return e;var r,n,i=o.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return s}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(m(arguments[t]));return e}var f=["pt","en","es","ru"];function y(){return b()}function v(){return navigator.language||navigator.userLanguage}function b(){var e=(v()||"pt").toLowerCase().substring(0,2);return f.includes(e)?e:"pt"}function P(e){return"string"==typeof e?"true"===(e=e.toLowerCase().trim())||"on"===e||""===e:"number"==typeof e?1===e:!!e}function w(e,t){return typeof e===t}function k(e){return!!e&&e.startsWith("http")}function S(e,t){void 0===e&&(e={}),void 0===t&&(t=[]);return t.reduce((function(t,o){var r;return u({},t,((r={})[o]=e[o],r))}),{})}function C(e){return void 0===e&&(e={}),Object.keys(e).map((function(t){return e[t]}))}function A(e){return e?e<10?"0"+e:e:"00"}var E={en:{cancelButton:"Cancel",closeButton:"Close",continueButton:"Continue",email:"e-mail",emailErrorMessagePhrase:"Invalid e-mail format",emailSentConfirmationPhrase:"We have sent the instructions and new password creation link to your e-mail.\n    If you did not receive it after a few minutes, check your spam box or click Resend.",emailSentTitle:"E-mail sent",forgotPasswordTitle:"Forgot your password?",insertCode:"Type the code",insertEmail:"Enter your e-mail",insertPhone:"Enter your mobile number",phoneErrorMessagePhrase:"Invalid phone number",prepositionIn:"in",prepositionOr:"or",recoveryPasswordPhrase:"To recover your password we will send you a {0} with instructions.",resendEmailButton:"Resend",resendSmsCodePhrase:"If the code does not arrive within a few minutes, please send it again.",sendAgainPhrase:"If the code does not arrive within a few minutes",sendAgain:"send again.",sendButton:"Submit",sentSmsCodePhrase:"We sent a code for your mobile phone.",sms:"SMS",smsCodeErrorMessagePhrase:"Invalid code. Please re-enter or contact support",supportContact:"If you do not have access to {0} contact support",telephone:"telephone",typeCodeTitle:"Enter sent code"},es:{cancelButton:"Cancelar",closeButton:"Cerrar",continueButton:"Continuar",email:"e-mail",emailErrorMessagePhrase:"Formato de correo electrónico no válido",emailSentConfirmationPhrase:"Enviamos las instrucciones y enlace de creación de nueva contraseña para su correo electrónico.\n    Si no ha recibido después de unos minutos, compruebe su caja de spam o haga clic en Reenviar",emailSentTitle:"E-mail enviado",forgotPasswordTitle:"Olvidaste tu contraseña?",insertCode:"Introduzca el código",insertEmail:"Introduce tu e-mail",insertPhone:"Introduce tu número de celular",phoneErrorMessagePhrase:"Número de teléfono no válido",prepositionIn:"en",prepositionOr:"u",recoveryPasswordPhrase:"Para recuperar su contraseña vamos a enviar un {0} con instrucciones.",resendEmailButton:"Reenviar",resendSmsCodePhrase:"Si el código no llega dentro de unos minutos, vuelva a enviar.",sendAgain:"envíe de nuevo.",sendAgainPhrase:"Si el código no llega dentro de unos minutos",sendButton:"Enviar",sentSmsCodePhrase:"Enviamos un código para su celular.",sms:"SMS",smsCodeErrorMessagePhrase:"Código no válido. Escriba de nuevo o póngase en contacto con el soporte",supportContact:"Si no tiene acceso a {0} póngase en contacto con el soporte",telephone:"teléfono",typeCodeTitle:"Escribir código enviado"},pt:{cancelButton:"Cancelar",closeButton:"Fechar",continueButton:"Continuar",email:"e-mail",emailErrorMessagePhrase:"Formato de e-mail inválido",emailSentConfirmationPhrase:"Enviamos as instruções e link de criação de nova senha para o seu e-mail.\n    Caso não tenha recebido após alguns minutos, verifique sua caixa de spam ou clique em Reenviar.",emailSentTitle:"E-mail enviado",forgotPasswordTitle:"Esqueceu sua senha?",insertCode:"Digite o código",insertEmail:"Insira seu e-mail",insertPhone:"Insira seu número de celular",phoneErrorMessagePhrase:"Número de telefone inválido",prepositionIn:"em",prepositionOr:"ou",recoveryPasswordPhrase:"Para recuperar sua senha vamos enviar um {0} com instruções.",resendEmailButton:"Reenviar",resendSmsCodePhrase:"Se o código não chegar dentro de alguns minutos envie novamente",sendAgain:"envie novamente.",sendAgainPhrase:"Se o código não chegar dentro de alguns minutos",sendButton:"Enviar",sentSmsCodePhrase:"Enviamos um código para seu celular cadastrado.",sms:"SMS",smsCodeErrorMessagePhrase:"Código inválido. Digite novamente ou contacte o suporte",supportContact:"Se não tiver acesso ao {0} contacte o suporte",telephone:"telefone",typeCodeTitle:"Digitar código enviado"},ru:{cancelButton:"отменить",closeButton:"близко",continueButton:"близко",email:"по электронной почте",emailErrorMessagePhrase:"Неверный формат электронной почты",emailSentConfirmationPhrase:"Мы отправили инструкции и новую ссылку для создания пароля для вашей электронной почты.\nЕсли вы не получили его в течение нескольких минут, установите флажок Спам или нажмите Далее.",emailSentTitle:"Письмо отправлено",forgotPasswordTitle:"Забыли пароль?",insertCode:"Введите код",insertEmail:"Введите адрес электронной почты",insertPhone:"Введите номер вашего мобильного телефона",phoneErrorMessagePhrase:"Неверный номер телефона",prepositionIn:"в",prepositionOr:"или",recoveryPasswordPhrase:"Для восстановления вашего пароля мы вышлем {0} с инструкциями.",resendEmailButton:"Отправить еще раз",resendSmsCodePhrase:"Если код не приходит через несколько минут, попробуйте еще раз.",sendAgain:"отправить снова.",sendAgainPhrase:"Если код не приходит через несколько минут",sendButton:"послать",sentSmsCodePhrase:"Мы отправляем код на ваш зарегистрированный мобильный телефон.",sms:"SMS",smsCodeErrorMessagePhrase:"Неверный код. Повторите или обратитесь в службу поддержки",supportContact:"Если у вас нет доступа к {0}, обратитесь в службу поддержки",telephone:"телефон",typeCodeTitle:"Введите отправленный код"}},I={All:"all",Email:"email",SMS:"sms"},M=I.Email,F=function(){function e(){this._phoneMask="(99) 99999-9999",this._type=M,this.maxLength=15,this.minLength=15,this.literals=u({},E.pt,E[y()]),this.codeSubmit=new t.EventEmitter,this.submit=new t.EventEmitter}return Object.defineProperty(e.prototype,"contactEmail",{get:function(){return this._contactEmail},set:function(e){this._contactEmail=e,this.smsCodeErrorMessage=this.concatenateSMSErrorMessage(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phoneMask",{get:function(){return this._phoneMask},set:function(e){this._phoneMask=e||"(99) 99999-9999",this.minLength=this.maxLength=this._phoneMask.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(e){this._type=Object.values(I).includes(e)?e:M},enumerable:!0,configurable:!0}),e.prototype.concatenateSMSErrorMessage=function(e){var t=this.literals.smsCodeErrorMessagePhrase;return e&&""!==e?t+" "+this.literals.prepositionIn+" "+e+".":t},e.propDecorators={contactEmail:[{type:t.Input,args:["p-contact-email"]}],codeError:[{type:t.Input,args:["p-code-error"]}],phoneMask:[{type:t.Input,args:["p-phone-mask"]}],type:[{type:t.Input,args:["p-type"]}],urlRecovery:[{type:t.Input,args:["p-url-recovery"]}],codeSubmit:[{type:t.Output,args:["p-code-submit"]}],submit:[{type:t.Output,args:["p-submit"]}]},e}();var R={Email:"email",SMSCode:"smsCode",Confirmation:"confirmation"},O=function(){function e(e){this.http=e}return e.prototype.post=function(e,t,o){return this.http.post(e,t,{observe:"response",params:o})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e}();var x=function(e){function o(t,o,r){var n=e.call(this)||this;return n.router=t,n.poI18nPipe=o,n.poModalPasswordRecoveryService=r,n.chosenTypeFormOption=I.Email,n.codeMask="9 9 9 9 9 9",n.emailModal=!0,n.emailModalPhrases={firstPhrase:null,secondPhrase:null},n.endpoint=".",n.invalidCode=!1,n.invalidEmail=!1,n.modalType=R.Email,n.submittedCodeValue={},n.submittedContactValue={},n.primaryAction={label:void 0,action:function(){}},n.secondaryAction={label:void 0,action:function(){}},n.typeFormOptions=[{label:"e-mail",value:I.Email},{label:"SMS",value:I.SMS}],n}return l(o,e),o.prototype.ngOnDestroy=function(){this.passwordRecoverySubscription&&this.passwordRecoverySubscription.unsubscribe(),this.smsCodeSubscription&&this.smsCodeSubscription.unsubscribe()},o.prototype.completed=function(){this.cancelAction()},o.prototype.formModelChangesCheck=function(e){var t=e.invalid;if(this.invalidEmail=t&&e.dirty,this.primaryAction.disabled=t,this.modalType===R.SMSCode){var o=void 0!==this.codeError&&""!==this.codeError;this.showCustomCodeError=o&&e.pristine}},o.prototype.getInputType=function(e){var t=this;this.type=e,this.pipeModalPhrases(),setTimeout((function(){t.control=t.emailForm.controls[e],t.formModelChangesCheck(t.emailForm),t.resetFormFields(t.control)}))},o.prototype.open=function(){var e=this.checkFormType(this.type);this.control=this.emailForm.controls[e],this.setEmailModalPhrasesAndActions(),this.formModelChangesCheck(this.emailForm),this.recoveryModalElement.open()},o.prototype.openConfirmation=function(){this.modalTitle=this.literals.emailSentTitle,this.modalType=R.Confirmation,this.setActions(this.cancelAction,this.literals.closeButton,this.submitAction,this.literals.resendEmailButton,!1)},o.prototype.openSmsCode=function(){var e=this;this.modalTitle=this.literals.typeCodeTitle,this.modalType=R.SMSCode,this.setActions(this.submitSmsCodeAction,this.literals.continueButton,this.cancelAction,this.literals.cancelButton,!0),setTimeout((function(){e.control=e.smsCodeForm.controls.sms,e.formModelChangesCheck(e.smsCodeForm)}))},o.prototype.resendSmsCode=function(){this.incrementRetryAttempts(),this.urlRecovery?this.submitActionRequest(this.submittedContactValue,this.type):this.submit.emit(this.submittedContactValue)},o.prototype.assignSmsResponse=function(e){this.smsBodyResponse=Object.assign({},{hash:e.hash}),e.urlValidationCode&&(this.smsBodyResponse=Object.assign(this.smsBodyResponse,{urlValidationCode:e.urlValidationCode}))},o.prototype.cancelAction=function(){this.resetFormFields(this.control),this.submittedContactValue={},this.chosenTypeFormOption=I.Email,this.modalType=R.Email,this.type=this.modalPasswordRecoveryTypeAll?I.All:this.type,this.recoveryModalElement.close()},o.prototype.checkFormType=function(e){return e!==I.All?e:I.Email},o.prototype.formReset=function(e){e.markAsPristine(),e.markAsUntouched(),e.updateValueAndValidity()},o.prototype.getEmitValue=function(e){return e===I.SMS?this.phone:this.email},o.prototype.incrementRetryAttempts=function(){this.submittedContactValue.retry=this.submittedContactValue.retry+1||1},o.prototype.openExternalLink=function(e,t){window.open(e+"?token="+t,"_self")},o.prototype.openInternalLink=function(e,t,o){this.router.navigate([e+"/"+t],{queryParams:{token:o}})},o.prototype.pipeModalPhrases=function(){this.type===I.SMS?(this.emailModalPhrases.firstPhrase=this.setPipeArguments(this.literals.recoveryPasswordPhrase,this.literals.sms),this.emailModalPhrases.secondPhrase=this.setPipeArguments(this.literals.supportContact,this.literals.telephone)):(this.emailModalPhrases.firstPhrase=this.setPipeArguments(this.literals.recoveryPasswordPhrase,this.literals.email),this.emailModalPhrases.secondPhrase=this.setPipeArguments(this.literals.supportContact,this.literals.email))},o.prototype.redirectToChangePassword=function(e){var t=e.urlChangePassword;if(t)k(t)?this.openExternalLink(t,e.token):this.openInternalLink(this.urlRecovery,t,e.token);else{this.openInternalLink(this.urlRecovery,"changePassword",e.token)}},o.prototype.resetFormFields=function(e){this.formReset(e),this.email=void 0,this.phone=void 0,this.smsCode=void 0},o.prototype.setActions=function(e,t,o,r,n){var i=this;this.primaryAction.action=function(){return e.call(i)},this.primaryAction.label=t,this.secondaryAction.action=function(){return o.call(i)},this.secondaryAction.label=r,this.primaryAction.disabled=n},o.prototype.setEmailModalPhrasesAndActions=function(){this.modalTitle=this.literals.forgotPasswordTitle,this.pipeModalPhrases(),this.modalPasswordRecoveryTypeAll=this.type===I.All,this.setActions(this.submitAction,this.literals.sendButton,this.cancelAction,this.literals.cancelButton,!0)},o.prototype.setRequestEndpoint=function(e){var t=e||"validation";return this.urlRecovery+"/"+t},o.prototype.setPipeArguments=function(e,t){return this.poI18nPipe.transform(e,t)},o.prototype.submitAction=function(){this.modalType===R.Confirmation?this.incrementRetryAttempts():this.formReset(this.control),this.submittedContactValue[this.checkFormType(this.type)]=this.getEmitValue(this.type),this.urlRecovery?this.submitActionRequest(this.submittedContactValue,this.type):this.submit.emit(this.submittedContactValue)},o.prototype.submitActionRequest=function(e,t){var o=this,r=t===I.SMS?{type:"sms"}:void 0;this.passwordRecoverySubscription=this.poModalPasswordRecoveryService.post(this.urlRecovery,e,r).subscribe((function(e){t!==I.Email&&t!==I.All||204!==e.status?t===I.SMS&&200===e.status&&(o.assignSmsResponse(e.body),o.openSmsCode()):o.openConfirmation()}))},o.prototype.submitSmsCodeAction=function(){this.submittedCodeValue.code=this.smsCode,this.urlRecovery?(this.submittedCodeValue=Object.assign(this.submittedCodeValue,{hash:this.smsBodyResponse.hash}),this.submitSmsCodeRequest(this.submittedCodeValue)):this.codeSubmit.emit(this.submittedCodeValue),this.resetFormFields(this.control)},o.prototype.submitSmsCodeRequest=function(e){var t=this;this.smsCodeSubscription=this.poModalPasswordRecoveryService.post(this.setRequestEndpoint(this.smsBodyResponse.urlValidationCode),e).subscribe((function(e){200===e.status&&(t.completed(),t.redirectToChangePassword(e.body))}),(function(e){t.codeError=e.error.message,t.openSmsCode()}))},o.decorators=[{type:t.Component,args:[{selector:"po-modal-password-recovery",template:'<po-modal #recoveryModal\n  p-hide-close\n  p-size="auto"\n  [ngSwitch]="modalType"\n  [p-primary-action]="primaryAction"\n  [p-secondary-action]="secondaryAction"\n  [p-title]="modalTitle"> \n  <div class="po-modal-password-recovery-wrapper">\n    <div *ngSwitchCase="\'email\'" class="po-modal-password-recovery-content po-row">\n      <div class="po-modal-password-recovery-text po-md-12 po-mb-1">\n        {{ emailModalPhrases.firstPhrase }}\n      </div>\n      <div class="po-mb-2 po-md-12">\n        <form #emailForm="ngForm">\n\n          <div *ngIf="modalPasswordRecoveryTypeAll">\n            <po-radio-group \n              name="type"\n              [(ngModel)]="chosenTypeFormOption"\n              [p-options]="typeFormOptions"\n              (p-change)="getInputType($event)">\n            </po-radio-group>\n          </div>\n\n          <div class="po-mt-1">\n            <po-email *ngIf="type === \'email\' || type === \'all\'"\n              name="email"\n              [(ngModel)]="email"\n              p-required\n              [p-label]="literals.insertEmail"\n              (p-change-model)="formModelChangesCheck(emailForm)">\n            </po-email>\n    \n            <po-input *ngIf="type === \'sms\'"\n              name="sms"\n              [(ngModel)]="phone"\n              p-icon="po-icon-telephone"\n              p-required\n              [p-label]="literals.insertPhone"\n              [p-mask]="phoneMask"\n              [p-maxlength]="maxLength"\n              [p-minlength]="minLength"\n              (p-change-model)="formModelChangesCheck(emailForm)">\n            </po-input>\n          </div>\n          \n          <div class="po-field-container-bottom po-field-container-error-container">\n            <po-modal-password-recovery-error-message *ngIf="invalidEmail && control.dirty" \n              [p-text]="type === \'sms\' ? literals.phoneErrorMessagePhrase : literals.emailErrorMessagePhrase">\n            </po-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class="po-modal-password-recovery-text po-md-12">{{ emailModalPhrases.secondPhrase }}<span *ngIf="contactEmail">\n        {{ literals.prepositionIn }} \n          <a class="po-modal-password-recovery-link" href="mailto:{{ contactEmail }}" target="_self">{{ contactEmail }}</a>\n        </span>{{ endpoint }}\n      </div>\n    </div>\n\n    <div #smsCodeModal *ngSwitchCase="\'smsCode\'" class="po-modal-password-recovery-content po-row">\n      <div class="po-modal-password-recovery-text po-md-12 po-mb-1">{{ literals.sentSmsCodePhrase }}</div>\n      <div class="po-mb-2 po-md-12">\n        <form #smsCodeForm="ngForm">\n          <po-input\n            name="sms"\n            [(ngModel)]="smsCode"\n            p-maxlength="11"\n            p-minlength="11"\n            p-required\n            [p-label]="literals.insertCode"\n            [p-mask]="codeMask"\n            (p-change-model)="formModelChangesCheck(smsCodeForm)">\n          </po-input>\n          <div class="po-field-container-bottom po-field-container-error-container">\n            <po-modal-password-recovery-error-message *ngIf="invalidEmail"\n              [p-text]="smsCodeErrorMessage || this.literals.smsCodeErrorMessagePhrase">\n            </po-modal-password-recovery-error-message>\n            <po-modal-password-recovery-error-message *ngIf="showCustomCodeError"\n              [p-text]="codeError">\n            </po-modal-password-recovery-error-message>\n          </div>\n        </form>\n      </div>\n      <div class="po-modal-password-recovery-text po-md-12">\n        {{ literals.sendAgainPhrase }} \n        <span class="po-modal-password-recovery-link" (click)="resendSmsCode()">{{ literals.sendAgain }}</span>\n      </div>\n    </div>\n    \n    <div #confirmationModal *ngSwitchCase="\'confirmation\'" class="po-modal-password-recovery-content po-row">\n      <img \n        class="po-modal-password-recovery-user-image po-mb-2" \n        src="./assets/images/email-sent.svg"> \n      <div class="po-modal-password-recovery-text">\n        {{ literals.emailSentConfirmationPhrase }}\n      </div>\n    </div>\n  </div>\n</po-modal>\n'}]}],o.ctorParameters=function(){return[{type:i.Router},{type:n.PoI18nPipe},{type:O}]},o.propDecorators={emailForm:[{type:t.ViewChild,args:["emailForm",{static:!1}]}],recoveryModalElement:[{type:t.ViewChild,args:["recoveryModal",{static:!0}]}],smsCodeForm:[{type:t.ViewChild,args:["smsCodeForm",{static:!1}]}]},o}(F);var D=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"po-modal-password-recovery-error-message",template:'<div class="po-field-container-bottom-text-error po-field-container-error-item">\n  <span class="po-icon po-icon-exclamation"></span>\n  <span class="po-field-container-error-text">{{ text }}</span>\n</div>\n'}]}],e.propDecorators={text:[{type:t.Input,args:["p-text"]}]},e}();var L=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,n.PoFieldModule,n.PoModalModule],declarations:[x,D],exports:[x,D],providers:[n.PoI18nPipe,O]}]}],e}(),T=function(){function e(){this._showSelectLanguage=!1,this.selectLanguageOptions=[{label:"English",value:"en"},{label:"Español",value:"es"},{label:"Português",value:"pt"},{label:"Pусский",value:"ru"}],this.selectedLanguage=new t.EventEmitter}return Object.defineProperty(e.prototype,"logo",{get:function(){return this._logo},set:function(e){this._logo=w(e,"string")&&e.trim()?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondaryLogo",{get:function(){return this._secondaryLogo},set:function(e){this._secondaryLogo=w(e,"string")&&e.trim()?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelectLanguage",{get:function(){return this._showSelectLanguage},set:function(e){this._showSelectLanguage=P(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.selectedLanguageOption=y()},e.prototype.onChangeLanguage=function(){this.selectedLanguage.emit(this.selectedLanguageOption)},e.decorators=[{type:t.Component,args:[{selector:"po-page-background",template:'<div class="po-page-login-container">\n  <div class="po-page-login-panel">\n    <img *ngIf="logo"\n      class="po-page-background-main-logo"\n      [class.po-page-background-hide-logo]="hideLogo"\n      alt="main-logo"\n      [src]="logo">\n\n    <div class="po-page-login-body">\n      <div class="po-page-login-panel-content">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div class="po-page-background-footer po-sm-12">\n\n      <po-divider class="po-page-background-footer-mobile-only"></po-divider>\n\n      <div class="po-page-background-footer-content">\n        <div *ngIf="showSelectLanguage" class="po-page-background-footer-select">\n          <po-select\n            name="selectedLanguageOption"\n            [(ngModel)]="selectedLanguageOption"\n            [p-options]="selectLanguageOptions"\n            (p-change) = "onChangeLanguage()">\n          </po-select>\n        </div>\n\n        <div class="po-page-background-secondary-logo"\n          [ngClass]="showSelectLanguage ? \'po-page-background-secondary-logo-right\' : \'po-page-background-secondary-logo-centered\'">\n\n          <img *ngIf="secondaryLogo"\n            class="po-page-background-secondary-logo-image"\n            alt="secondary-logo"\n            [src]="secondaryLogo">\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf="background"\n    [ngClass]="background ? \'po-page-login-highlight-image\' : \'po-page-login-highlight-image-off\'"\n    [style.background-image]="\'url(\' + background + \')\'">\n    <div class="po-page-login-highlight-text">\n      <div class="po-font-display">{{ highlightInfo }}</div>\n    </div>\n  </div>\n</div>\n'}]}],e.propDecorators={background:[{type:t.Input,args:["p-background"]}],hideLogo:[{type:t.Input,args:["p-hide-logo"]}],highlightInfo:[{type:t.Input,args:["p-highlight-info"]}],logo:[{type:t.Input,args:["p-logo"]}],secondaryLogo:[{type:t.Input,args:["p-secondary-logo"]}],showSelectLanguage:[{type:t.Input,args:["p-show-select-language"]}],selectedLanguage:[{type:t.Output,args:["p-selected-language"]}]},e}();var N=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoDividerModule,n.PoFieldModule],declarations:[T],exports:[T]}]}],e}(),_={None:"none",ExceededAttempts:"exceededAttempts",ExpiredPassword:"expiredPassword"},j=_.None,q={attempts:5,days:90,hours:24},B=function(){function e(){this._params=u({},q),this._reason=_.None,this._urlBack="/"}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},set:function(e){if(e instanceof Object){var t=Object.keys(e),o=u({},q);t.forEach((function(t){o[t]=e[t]})),this._params=o}else this._params=u({},q)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this._reason},set:function(e){this._reason=Object.values(_).includes(e)?e:j},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlBack",{get:function(){return this._urlBack},set:function(e){this._urlBack=e},enumerable:!0,configurable:!0}),e.propDecorators={contactEmail:[{type:t.Input,args:["p-contact-email"]}],contactPhone:[{type:t.Input,args:["p-contact-phone"]}],params:[{type:t.Input,args:["p-params"]}],logo:[{type:t.Input,args:["p-logo"]}],reason:[{type:t.Input,args:["p-reason"]}],secondaryLogo:[{type:t.Input,args:["p-secondary-logo"]}],urlBack:[{type:t.Input,args:["p-url-back"]}]},e}();var U={en:{primaryButton:"Back to home screen"},es:{primaryButton:"Volver al inicio"},pt:{primaryButton:"Voltar para o início"},ru:{primaryButton:"Перейти к началу страницы"}},V=function(e){function o(t,o){var r=e.call(this)||this;return r.activatedRoute=t,r.router=o,r.literals=u({},U.pt,U[y()]),r}return l(o,e),o.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},o.prototype.navigateTo=function(e){k(e)?window.open(e):this.router.navigate([e||"/"])},o.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},o.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.contactEmail=this.checkingForMetadataProperty(e,"contactEmail")||this.contactEmail,this.contactPhone=this.checkingForMetadataProperty(e,"contactPhone")||this.contactPhone,this.reason=this.checkingForMetadataProperty(e,"reason")||this.reason,this.urlBack=this.checkingForMetadataProperty(e,"urlBack")||this.urlBack)},o.decorators=[{type:t.Component,args:[{selector:"po-page-blocked-user",template:'<div class="po-page-blocked-user-wrapper">\n  <div class="po-page-background-wrap">\n    <po-page-background\n      [p-hide-logo]="true"\n      [p-logo]="logo"\n      [p-secondary-logo]="secondaryLogo">\n\n      <po-page-blocked-user-reason\n        [p-params]="params"\n        [p-reason]="reason">\n      </po-page-blocked-user-reason>\n\n      <div class="po-page-blocked-user-mobile-bottom-alignment">\n        <po-page-blocked-user-contacts\n          [p-email]="contactEmail"\n          [p-phone]="contactPhone">\n        </po-page-blocked-user-contacts>\n\n        <div class="po-row">\n          <po-button\n            class="po-lg-12 po-sm-12 po-page-blocked-user-button"\n            p-type="primary"\n            [p-label]="literals.primaryButton"\n            (p-click)="navigateTo(urlBack)">\n          </po-button>\n        </div>\n      </div>\n    </po-page-background>\n  </div>\n</div>\n'}]}],o.ctorParameters=function(){return[{type:i.ActivatedRoute},{type:i.Router}]},o}(B);var H=function(){function e(e){this.changeDetector=e,this.overflowItem=!1}return e.prototype.ngAfterViewInit=function(){this.checkContactItemWidth()},e.prototype.ngOnChanges=function(e){(e.email||e.phone)&&this.checkContactItemWidth()},e.prototype.checkContactItemWidth=function(){var e=this;this.email&&this.phone?(setTimeout((function(){var t=e.phoneItem.nativeElement.offsetWidth,o=e.mailItem.nativeElement.offsetWidth,r=e.contactGroup.nativeElement.offsetWidth/2;e.overflowItem=t>r||o>r-16})),this.changeDetector.detectChanges()):this.overflowItem=!0},e.decorators=[{type:t.Component,args:[{selector:"po-page-blocked-user-contacts",template:'<div #contactGroup class="po-page-blocked-user-contact-group po-row po-mb-3">\n  <div *ngIf="phone"\n    class="po-page-blocked-user-contact-item"\n    [ngClass]="overflowItem ? \'po-md-12\' : \'po-md-6\'">\n    <a\n      class="po-page-blocked-user-link po-clickable"\n      [class.po-page-blocked-user-contact-content-inline]="overflowItem"\n      href="tel:{{ phone }}"\n      target="_self">\n      <div class="po-page-blocked-user-contact-group-item">\n        <span class="po-page-blocked-user-contact-icon po-icon po-icon-telephone po-pr-1"></span>\n        <span #phoneItem class="po-page-blocked-user-contact-text po-font-text">{{ phone }}</span>\n      </div>\n    </a>\n  </div>\n  <div *ngIf="email"\n    class="po-page-blocked-user-contact-item po-page-blocked-user-contact-mail"\n    [ngClass]="overflowItem ? \'po-md-12\' : \'po-md-6\'">\n    <a\n      class="po-page-blocked-user-link po-clickable"\n      [class.po-page-blocked-user-contact-content-inline]="overflowItem"\n      href="mailto:{{ email }}"\n      target="_self">\n      <div class="po-page-blocked-user-contact-group-item">\n        <span class="po-page-blocked-user-contact-icon po-icon po-icon-mail po-pr-1 "></span>\n        <span #mailItem class="po-page-blocked-user-contact-text po-font-text">{{ email }}</span>\n      </div>\n    </a>\n  </div>\n</div>'}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},e.propDecorators={email:[{type:t.Input,args:["p-email"]}],phone:[{type:t.Input,args:["p-phone"]}],contactGroup:[{type:t.ViewChild,args:["contactGroup",{static:!0}]}],mailItem:[{type:t.ViewChild,args:["mailItem",{static:!0}]}],phoneItem:[{type:t.ViewChild,args:["phoneItem",{static:!0}]}]},e}();var W={none:{pt:{title:"Opa!",firstPhrase:"Tivemos que bloquear essa tela temporariamente.",secondPhrase:"Mas não se preocupe! Basta fazer seu login novamente."},en:{title:"Oops!",firstPhrase:"We had to temporarily block this screen.",secondPhrase:"But do not worry! Just sign in again."},es:{title:"Opa!",firstPhrase:"Tuvimos que bloquear esta pantalla temporalmente.",secondPhrase:"¡Pero no se preocupe! Sólo tienes que iniciar sesión de nuevo."}},exceededAttempts:{pt:{title:"Opa!",firstPhrase:"Para sua segurança, após {0} tentativa(s) de senha seu usuário fica bloqueado e não pode ser acessado em {1} hora(s) :( ",secondPhrase:"Isso é para evitar que hackers invadam sua conta.",thirdPhrase:"Mas não se preocupe! Se você for o dono da conta e apenas esqueceu sua senha, basta entrar em contato com o suporte."},en:{title:"Oops!",firstPhrase:"For your security, after {0} attempt(s) of password\n        your user gets blocked and can not be accessed in {1} hour(s) :(",secondPhrase:"This is to prevent hackers from hacking into your account.",thirdPhrase:"But do not worry! If you are the owner of the account and just forgot your password, just contact support."},es:{title:"Opa!",firstPhrase:"Para su seguridad, después de {0} intento(s) de contraseña\n        su usuario queda bloqueado y no puede ser accedido en {1} hora(s) :(",secondPhrase:"Esto es para evitar que los hackers invadan su cuenta.",thirdPhrase:"¡Pero no se preocupe! Si usted es el dueño de la cuenta\n        y acaba de olvidar su contraseña, simplemente póngase en contacto con el soporte."}},expiredPassword:{pt:{title:"Opa! Sua senha expirou",firstPhrase:"A cada {0} dia(s) é preciso criar uma nova senha por questão de segurança. Após esses {0} dia(s) seu acesso é bloqueado :(",secondPhrase:"Mas não se preocupe! Basta entrar em contato com o administrador do sistema."},en:{title:"Oops! Your Password has expired",firstPhrase:"Every {0} day(s) you need to create a new password for security reasons.\n        After these {0} day(s) your access is blocked :(",secondPhrase:"But do not worry! Just contact your system administrator."},es:{title:"Opa! Su contraseña ha caducado",firstPhrase:"Cada {0} día(s) es necesario crear una nueva contraseña por razones de seguridad.\n        Después de estos {0} día(s) su acceso está bloqueado :(",secondPhrase:"¡Pero no se preocupe! Sólo tienes que ponerse en contacto con el administrador del sistema."}}},z=function(){function e(e){this.changeDetector=e}return e.prototype.ngOnChanges=function(e){(e.reason||e.params)&&this.getLiterals()},e.prototype.ngOnInit=function(){this.getLiterals()},e.prototype.getImageByReasonType=function(){var e;switch(this.reason){case"none":e="big-lock";break;case"exceededAttempts":e="blocked-user";break;case"expiredPassword":e="expired"}return"./assets/images/"+e+".svg"},e.prototype.getParams=function(){this.literalParams="expiredPassword"===this.reason?[this.params.days,this.params.days]:[this.params.attempts,this.params.hours]},e.prototype.getLiterals=function(){this.getParams(),this.literals=u({},W[this.reason].pt,W[this.reason][y()]),this.changeDetector.detectChanges()},e.decorators=[{type:t.Component,args:[{selector:"po-page-blocked-user-reason",template:'<div class="po-page-blocked-user-reason-content">\n  <img \n    class="po-page-blocked-user-image po-mb-3" \n    [src]="getImageByReasonType()"> \n  <div class="po-page-blocked-user-header po-mb-md-3 po-row">\n    <div class="po-md-12">{{ literals?.title }}</div>\n  </div>\n  <div class="po-page-blocked-user-text po-font-text po-row">\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12 po-page-blocked-user-text-bold">{{ literals?.firstPhrase | poI18n:literalParams }}</div>\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12">{{ literals?.secondPhrase }}</div>\n    <div class="po-mb-sm-2 po-mb-md-3 po-md-12" *ngIf="literals?.thirdPhrase">{{ literals?.thirdPhrase }}</div>\n  </div>\n</div>'}]}],e.ctorParameters=function(){return[{type:t.ChangeDetectorRef}]},e.propDecorators={params:[{type:t.Input,args:["p-params"]}],reason:[{type:t.Input,args:["p-reason"]}]},e}();var J=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,i.RouterModule,n.PoModule,N],declarations:[V,H,z],exports:[V,H,z]}]}],e}(),G=function(){function e(){this._hideCurrentPassword=!1,this._requirements=[],this._urlHome="/",this.urlBack="/",this.submit=new t.EventEmitter}return Object.defineProperty(e.prototype,"hideCurrentPassword",{get:function(){return this._hideCurrentPassword},set:function(e){this._hideCurrentPassword=P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e,w(e,"string")&&(this.recoveryUrlType=k(e)?"externalLink":"internalLink")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requirements",{get:function(){return this._requirements},set:function(e){this._requirements=e||[],this.showRequirements=this._requirements.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlHome",{get:function(){return this._urlHome},set:function(e){this._urlHome=e,this.modalAction.action=this.navigateTo.bind(this,this.urlHome)},enumerable:!0,configurable:!0}),e.propDecorators={hideCurrentPassword:[{type:t.Input,args:["p-hide-current-password"]}],logo:[{type:t.Input,args:["p-logo"]}],recovery:[{type:t.Input,args:["p-recovery"]}],requirements:[{type:t.Input,args:["p-requirements"]}],secondaryLogo:[{type:t.Input,args:["p-secondary-logo"]}],token:[{type:t.Input,args:["p-token"]}],urlBack:[{type:t.Input,args:["p-url-back"]}],urlNewPassword:[{type:t.Input,args:["p-url-new-password"]}],urlHome:[{type:t.Input,args:["p-url-home"]}],submit:[{type:t.Output,args:["p-submit"]}]},e}();var Y={en:{backButton:"Back",confirmPassword:"Confirm password",createNewPassword:"Create new password",createNewPasswordPhrase:"Protect your account with a personal password created by you",currentPassword:"Current password",enterSystemButton:"Enter the system",forgotPassword:"Forgot your password?",newPassword:"New password",passwordSuccessfullyCreated:"Password successfully created!",passwordSuccessfullyUpdated:"Password successfully updated!",requirements:"Password requirements",safetyTips:"Safety tips!",safetyTipsFirst:"is used in other accounts;",safetyTipsPhrase:"Avoid a password that:",safetyTipsSecond:"has personal information like your name, nickname or family names;",safetyTipsThird:'that uses obvious sequences like "123" or obvious words like "password";',saveButton:"Save"},es:{backButton:"Volver",confirmPassword:"Confirmar seña",createNewPassword:"Crear nueva contraseña",createNewPasswordPhrase:"Proteger su cuenta con una contraseña personal creada por usted",currentPassword:"Contraseña actual",enterSystemButton:"Entrar en el sistema",forgotPassword:"¿Olvidaste tu contraseña?",newPassword:"Nueva contraseña",passwordSuccessfullyCreated:"Contraseña creada correctamente!",passwordSuccessfullyUpdated:"Contraseña correctamente actualizada!",requirements:"Requisitos de contraseña",safetyTips:"Consejos de seguridad!",safetyTipsFirst:"se utilice en otras cuentas;",safetyTipsPhrase:"Evite una contraseña que:",safetyTipsSecond:"utiliza información personal como su nombre, apellido o nombre de familia;",safetyTipsThird:'utilice secuencias muy obvias como "1234" o "abcd" o palabras obvias como "contraseña";',saveButton:"Guardar"},pt:{backButton:"Voltar",confirmPassword:"Confirmar senha",createNewPassword:"Criar nova senha",createNewPasswordPhrase:"Proteja sua conta com uma senha pessoal criada por você",currentPassword:"Senha atual",enterSystemButton:"Entrar no sistema",forgotPassword:"Esqueceu sua senha?",newPassword:"Nova senha",passwordSuccessfullyCreated:"Senha criada com sucesso!",passwordSuccessfullyUpdated:"Senha alterada com sucesso!",requirements:"Requisitos de senha",safetyTips:"Dicas de segurança!",safetyTipsFirst:"seja usada em outras contas;",safetyTipsPhrase:"Evite uma senha que:",safetyTipsSecond:"usa informações pessoais como seu nome, apelido ou nome de familiares;",safetyTipsThird:'use sequências muito óbvias como "1234" ou "abcd" ou palavras óbvias como “senha”;',saveButton:"Salvar"},ru:{backButton:"возвращение",confirmPassword:"Подтвердите пароль",createNewPassword:"Создать новый пароль",createNewPasswordPhrase:"Защитите свой аккаунт с помощью личного пароля.",currentPassword:"Текущий пароль",enterSystemButton:"Вход в систему",forgotPassword:"Забыли пароль?",newPassword:"Новый пароль",passwordSuccessfullyCreated:"Пароль успешно создан!",passwordSuccessfullyUpdated:"Пароль успешно изменен!",requirements:"Требования к паролю",safetyTips:"Советы по безопасности!",safetyTipsFirst:"использоваться на других счетах;",safetyTipsPhrase:"Избегайте пароля, который:",safetyTipsSecond:"использует личную информацию, такую ​​как ваше имя, фамилию или фамилию;",safetyTipsThird:'используйте очень очевидные строки, такие как "1234" или "abcd", или такие очевидные слова, как "пароль";',saveButton:"экономить"}},K=function(){function e(e){this.http=e}return e.prototype.post=function(e,t){return this.http.post(e,t,{observe:"response"})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e}();var $=function(e){function o(t,o,r,n,i,s){var a=e.call(this)||this;return a.activatedRoute=t,a.route=o,a.router=r,a.service=n,a.poComponentInjector=i,a.literals=u({},Y.pt,Y[y()]),a.componentRef=null,a.modalAction={action:a.navigateTo.bind(a,a.urlHome),label:a.literals.enterSystemButton},a.parentRef=s._view.component,a}return l(o,e),o.prototype.ngAfterViewInit=function(){this.urlNewPassword&&this.subscribeToTokenParameter()},o.prototype.ngOnDestroy=function(){this.newPasswordSubscription&&this.newPasswordSubscription.unsubscribe()},o.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},o.prototype.navigateTo=function(e){k(e)?window.open(e):this.router.navigate([e||"/"])},o.prototype.onForgotPasswordClick=function(e){w(e,"function")?e():this.createModalPasswordRecoveryComponent(e)},o.prototype.onLoginSubmit=function(){var e=this.getLoginForm();this.urlNewPassword?this.postUrlNewPassword(e):this.submit&&this.submit.observers.length&&this.emitSubmit(e)},o.prototype.openConfirmation=function(){this.modal.open()},o.prototype.validatePassword=function(){var e=this,t=this.passwordForm.form.controls,o=t.confirmPassword,r=t.newPassword;this.newPassword?this.confirmPassword?this.newPassword&&this.confirmPassword&&this.newPassword!==this.confirmPassword?this.setFormErrors({equalPassword:!0},[r,o]):this.setFormErrors(null,[o,r]):this.setFormErrors({required:!0},[o]):this.setFormErrors({required:!0},[r]),this.requirements.length&&this.requirements.find((function(t){return!1===e.validateRequirement(t)}))&&this.setFormErrors({requirement:!0},[r])},o.prototype.validateRequirement=function(e){return"function"==typeof e.status?e.status.call(this.parentRef,this.newPassword):e.status},o.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},o.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.urlNewPassword=this.checkingForMetadataProperty(e,"serviceApi")||this.urlNewPassword,this.recovery=this.checkingForMetadataProperty(e,"recovery")||this.recovery,this.hideCurrentPassword=this.checkingForMetadataProperty(e,"hideCurrentPassword")||this.hideCurrentPassword)},o.prototype.createModalPasswordRecoveryComponent=function(e){var t=this;this.componentRef&&this.poComponentInjector.destroyComponentInApplication(this.componentRef),this.componentRef=this.poComponentInjector.createComponentInApplication(x),this.componentRef.instance.recovery=e.url,this.componentRef.instance.contactEmail=e.contactMail,this.componentRef.instance.phoneMask=e.phoneMask,this.componentRef.instance.type=e.type||I.Email,this.componentRef.changeDetectorRef.detectChanges(),setTimeout((function(){t.componentRef.instance.open()}))},o.prototype.emitSubmit=function(e){this.submit.emit(e)},o.prototype.getLoginForm=function(){return{currentPassword:this.currentPassword,newPassword:this.newPassword}},o.prototype.postUrlNewPassword=function(e){var t=this;e.token=this.token,this.service.post(this.urlNewPassword,e).subscribe((function(e){204===e.status&&t.openConfirmation()}))},o.prototype.setFormErrors=function(e,t){t.forEach((function(t){t.setErrors(e)}))},o.prototype.subscribeToTokenParameter=function(){var e=this;this.route.queryParams.subscribe((function(t){var o=t.token;o&&(e.token=o)}))},o.decorators=[{type:t.Component,args:[{selector:"po-page-change-password",template:'<div class="po-page-change-password-wrapper" #pageChangePassword>\n  <div class="po-page-change-password-container">\n    <po-page-background class="po-page-change-password"\n      [p-logo]="logo"\n      [p-secondary-logo]="secondaryLogo">\n\n      <div class="po-page-blocked-user-header po-row">\n        <div class="po-md-12">{{literals.createNewPassword}}</div>\n        <div class="po-md-12 po-text-center po-font-text">\n          {{literals.createNewPasswordPhrase}}\n        </div>\n      </div>\n\n      <form #passwordForm="ngForm">\n\n        <div class="po-row po-mt-3 po-mt-sm-1">\n          <div class="po-md-6"\n            [ngClass]="{\'po-offset-md-3 po-offset-lg-3 po-offset-xl-3\': !showRequirements}">\n            <div *ngIf="!hideCurrentPassword">\n              <po-password\n                name="currentPassword"\n                [(ngModel)]="currentPassword"\n                p-required\n                [p-label]="literals.currentPassword">\n              </po-password>\n            </div>\n            <div *ngIf="!hideCurrentPassword && recovery" class="po-text-center po-mb-sm-1 po-mb-2">\n              <a *ngIf="recoveryUrlType === \'internalLink\'"\n                class="po-font-text-bold po-page-change-password-forgot-password"\n                [routerLink]="recovery">\n                {{literals.forgotPassword}}\n              </a>\n              <a *ngIf="recoveryUrlType === \'externalLink\'"\n                class="po-font-text-bold po-page-change-password-forgot-password"\n                [href]="recovery">\n                {{literals.forgotPassword}}\n              </a>\n              <a *ngIf="!recoveryUrlType"\n                class="po-font-text-bold po-page-change-password-forgot-password po-clickable"\n                (click)="onForgotPasswordClick(recovery)">\n                {{literals.forgotPassword}}\n              </a>\n            </div>\n            <div>\n              <po-password\n                name="newPassword"\n                [(ngModel)]="newPassword"\n                p-required\n                [p-label]="literals.newPassword"\n                (p-change-model)="validatePassword()">\n              </po-password>\n            </div>\n            <div>\n              <po-password\n                name="confirmPassword"\n                [(ngModel)]="confirmPassword"\n                p-required\n                [p-label]="literals.confirmPassword"\n                (p-change-model)="validatePassword()">\n              </po-password>\n            </div>\n          </div>\n          <div *ngIf="showRequirements"\n            class="po-md-6 po-page-change-password-required-container">\n            <po-container>\n              <ul class="po-page-change-password-required-list">\n                <li class="po-page-change-password-required-item">\n                  <p class="po-mb-1 po-font-text-bold po-page-change-password-required-title">\n                    {{literals?.requirements}}\n                  </p>\n                </li>\n                <li *ngFor="let requirement of requirements"\n                  class="po-page-change-password-required-item">\n                  <span class="po-icon po-page-change-password-required-icon"\n                    [ngClass]="validateRequirement(requirement) ? \'po-icon-ok po-page-change-password-required-ok\' : \'po-icon-minus po-page-change-password-required-minus\'">\n                  </span>\n                  <p class="po-page-change-password-required-text po-font-text">\n                    {{requirement.requirement}}\n                  </p>\n                </li>\n              </ul>\n            </po-container>\n          </div>\n        </div>\n      </form>\n\n      <po-divider class="po-sm-12"></po-divider>\n\n      <div class="po-page-change-password-tips po-row">\n        <div class="po-md-2 po-mr-3">\n          <img\n            class="po-page-change-password-lock-image po-mb-3"\n            alt="Blocked user image"\n            src="./assets/images/big-lock.svg"\n          />\n        </div>\n        <div class="po-md-9 po-page-change-password-tips-text">\n          <div class="po-font-text-bold po-pb-1">{{literals.safetyTips}}</div>\n          <div class="po-font-text-small">\n            <div class="po-row po-pb-1">{{literals.safetyTipsPhrase}}</div>\n            <div class="po-row po-pb-1">• {{literals.safetyTipsFirst}}</div>\n            <div class="po-row po-pb-1">• {{literals.safetyTipsSecond}}</div>\n            <div class="po-row po-pb-1">• {{literals.safetyTipsThird}}</div>\n          </div>\n        </div>\n      </div>\n\n      <div class="po-page-change-password-buttons po-row">\n\n        <po-divider class="po-sm-12 po-mobile-only"></po-divider>\n\n        <po-button *ngIf="!hideCurrentPassword"\n          class="po-sm-6 po-mb-sm-1"\n          [p-label]="literals.backButton"\n          (p-click)="navigateTo(urlBack)">\n        </po-button>\n\n        <po-button\n          [ngClass]="hideCurrentPassword ? \'po-md-12\':\'po-sm-6\'"\n          p-type="primary"\n          [p-disabled]="passwordForm.invalid"\n          [p-label]="literals.saveButton"\n          (p-click)="onLoginSubmit()">\n        </po-button>\n\n      </div>\n\n    </po-page-background>\n\n  </div>\n</div>\n\n<po-modal\n  [p-primary-action]="modalAction"\n  p-hide-close\n  p-size="auto"\n  [p-title]="hideCurrentPassword ? literals.passwordSuccessfullyCreated : literals.passwordSuccessfullyUpdated">\n\n  <div class="po-text-center">\n    <img\n      alt="Blocked user image"\n      class="po-page-change-password-lock-image po-mb-3"\n      src="./assets/images/success.svg"\n    />\n  </div>\n</po-modal>\n'}]}],o.ctorParameters=function(){return[{type:i.ActivatedRoute},{type:i.ActivatedRoute},{type:i.Router},{type:K},{type:n.PoComponentInjectorService},{type:t.ViewContainerRef}]},o.propDecorators={modal:[{type:t.ViewChild,args:[n.PoModalComponent,{static:!0}]}],pageChangePassword:[{type:t.ViewChild,args:["pageChangePassword",{read:t.ViewContainerRef,static:!0}]}],passwordForm:[{type:t.ViewChild,args:["passwordForm",{read:r.NgForm,static:!0}]}]},o}(G);var Q=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoModule,N],declarations:[$],entryComponents:[x],providers:[K],exports:[$]}]}],e}(),X=function(){function e(e){this.http=e,this.endpoint="/",this.headers=new s.HttpHeaders({"X-PORTINARI-SCREEN-LOCK":"true"})}return e.prototype.configServiceApi=function(e){void 0===e&&(e={}),this.endpoint=e.endpoint,this.metadata=e.metadata||this.metadata},e.prototype.getMetadata=function(e){void 0===e&&(e="list");var t=this.endpoint+"-"+e+"-metadata",o=JSON.parse(localStorage.getItem(t))||{},r=(this.metadata||this.endpoint+"/metadata")+"?type="+e+"&version="+(o.version||"");return this.http.get(r).pipe(a.map((function(e){return e.version===o.version?o:(localStorage.setItem(t,JSON.stringify(e)),u({},o,e))})))},e.prototype.deleteResource=function(e){return this.http.delete(this.endpoint+"/"+e,{headers:this.headers})},e.prototype.deleteResources=function(e){return this.http.request("delete",""+this.endpoint,{headers:this.headers,body:e})},e.prototype.getResources=function(e){return this.http.get(this.endpoint,{headers:this.headers,params:e})},e.prototype.getResource=function(e){return this.http.get(this.endpoint+"/"+e,{headers:this.headers})},e.prototype.createResource=function(e){return this.http.post(""+this.endpoint,e,{headers:this.headers})},e.prototype.updateResource=function(e,t){return this.http.put(this.endpoint+"/"+e,t,{headers:this.headers})},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e}();var Z={en:{pageActionEdit:"Edit",pageActionRemove:"Delete",pageActionBack:"Back",confirmRemoveTitle:"Confirm delete",confirmRemoveMessage:"Are you sure you want to delete this record? You can not undo this action.",removeNotificationSuccess:"Item deleted successfully.",registerNotFound:"Register not found."},es:{pageActionEdit:"Editar",pageActionRemove:"Borrar",pageActionBack:"Regreso",confirmRemoveTitle:"Confirmar la exclusión",confirmRemoveMessage:"¿Está seguro de que desea eliminar este registro? No puede deshacer esta acción.",removeNotificationSuccess:"Elemento eliminado con éxito.",registerNotFound:"Registro no encontrado."},pt:{pageActionEdit:"Editar",pageActionRemove:"Excluir",pageActionBack:"Voltar",confirmRemoveTitle:"Confirmar exclusão",confirmRemoveMessage:"Tem certeza de que deseja excluir esse registro? Você não poderá desfazer essa ação.",removeNotificationSuccess:"Item excluído com sucesso.",registerNotFound:"Registro não encontrado."}},ee=function(){function e(e,t,o,r,n){this.router=e,this.activatedRoute=t,this.poNotification=o,this.poDialogService=r,this.poPageDynamicService=n,this._actions={},this._autoRouter=!1,this._duplicates=[],this._fields=[],this._keys=[],this._pageActions=[],this.literals=u({},Z.pt,Z[y()]),this.model={},this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"actions",{set:function(e){this._actions=this.isObject(e)?e:{},this._pageActions=this.getPageActions(this._actions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?g(e):[],this._keys=this.getKeysByFields(this.fields),this._duplicates=this.getDuplicatesByFields(this.fields)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.activatedRoute.snapshot.params.id;this.activatedRoute.snapshot.data.serviceApi?(this.serviceApi=this.activatedRoute.snapshot.data.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi}),this.loadMetadata(e)):(this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi}),this.loadData(e))},Object.defineProperty(e.prototype,"duplicates",{get:function(){return g(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return g(this._keys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageActions",{get:function(){return g(this._pageActions)},enumerable:!0,configurable:!0}),e.prototype.confirmRemove=function(e){var t={title:this.literals.confirmRemoveTitle,message:this.literals.confirmRemoveMessage,confirm:this.remove.bind(this,e)};this.poDialogService.confirm(t)},e.prototype.formatUniqueKey=function(e){return C(S(e,this.keys)).join("|")},e.prototype.goBack=function(){window.history.back()},e.prototype.loadData=function(e){var t=this;this.poPageDynamicService.getResource(e).toPromise().then((function(e){t.model=e})).catch((function(){t.model=void 0,t.actions=void 0}))},e.prototype.loadMetadata=function(e){var t=this;this.poPageDynamicService.getMetadata("detail").toPromise().then((function(o){t.autoRouter=o.autoRouter,t.actions=o.actions||{},t.breadcrumb=o.breadcrumb||{items:[]},t.fields=o.fields||[],t.title=o.title,t.loadData(e)}))},e.prototype.navigateTo=function(e,t){var o=this;void 0===t&&(t=!1),this.router.navigate([e.url||e.path],{queryParams:e.params}).catch((function(){!t&&o.autoRouter&&(o.router.config.unshift({path:e.path,component:e.component,data:{serviceApi:o.serviceApi,autoRouter:!0}}),o.navigateTo(e,!0))}))},e.prototype.openEdit=function(e){var t=this.resolveUrl(this.model,e);this.navigateTo({path:e,url:t})},e.prototype.remove=function(e){var t=this,o=this.formatUniqueKey(this.model);this.poPageDynamicService.deleteResource(o).toPromise().then((function(){t.poNotification.success(t.literals.removeNotificationSuccess),t.navigateTo({path:e})}))},e.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},e.prototype.getPageActions=function(e){void 0===e&&(e={});var t=[];return e.edit&&t.push({label:this.literals.pageActionEdit,action:this.openEdit.bind(this,e.edit)}),e.remove&&t.push({label:this.literals.pageActionRemove,action:this.confirmRemove.bind(this,e.remove)}),(void 0===e.back||e.back)&&t.push({label:this.literals.pageActionBack,action:this.goBack.bind(this,e.back)}),t},e.prototype.getKeysByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.key})).map((function(e){return e.property}))},e.prototype.getDuplicatesByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},e.prototype.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)},e.decorators=[{type:t.Component,args:[{selector:"po-page-dynamic-detail",template:'<po-page-default\n  [p-actions]="pageActions"\n  [p-breadcrumb]="breadcrumb"\n  [p-title]="title">\n\n  <ng-container *ngIf="model; then viewFieldsTemplate; else registerNotFoundTemplate">\n  </ng-container>\n\n</po-page-default>\n\n<ng-template #registerNotFoundTemplate>\n\n  <po-widget>\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.registerNotFound }}\n    </span>\n  </po-widget>\n\n</ng-template>\n\n<ng-template #viewFieldsTemplate>\n\n  <po-dynamic-view [p-fields]="fields" [p-value]="model">\n  </po-dynamic-view>\n\n</ng-template>\n',providers:[X]}]}],e.ctorParameters=function(){return[{type:i.Router},{type:i.ActivatedRoute},{type:n.PoNotificationService},{type:n.PoDialogService},{type:X}]},e.propDecorators={actions:[{type:t.Input,args:["p-actions"]}],autoRouter:[{type:t.Input,args:["p-auto-router"]}],breadcrumb:[{type:t.Input,args:["p-breadcrumb"]}],fields:[{type:t.Input,args:["p-fields"]}],title:[{type:t.Input,args:["p-title"]}],serviceApi:[{type:t.Input,args:["p-service-api"]}]},e}();var te=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,s.HttpClientModule],providers:[X]}]}],e}(),oe=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoDynamicModule,n.PoModalModule,n.PoPageModule,n.PoWidgetModule,te],declarations:[ee],exports:[ee]}]}],e}(),re={en:{cancelConfirmMessage:"Are you sure you want to cancel this operation?",detailActionNew:"New",pageActionCancel:"Cancel",pageActionSave:"Save",pageActionSaveNew:"Save and new",registerNotFound:"Register not found.",saveNewNotificationSuccessSave:"Resource successfully saved.",saveNewNotificationSuccessUpdate:"Resource successfully updated.",saveNewNotificationWarning:"Form must be filled out correctly.",saveNotificationSuccessSave:"Resource successfully saved.",saveNotificationSuccessUpdate:"Resource successfully updated.",saveNotificationWarning:"Form must be filled out correctly."},es:{cancelConfirmMessage:"Está seguro de que desea cancelar esta operación?",detailActionNew:"Nuevo",pageActionCancel:"Cancelar",pageActionSave:"Guardar",pageActionSaveNew:"Guardar y nuevo",registerNotFound:"Registro no encontrado.",saveNewNotificationSuccessSave:"Recurso salvo con éxito.",saveNewNotificationSuccessUpdate:"Recurso actualizado con éxito.",saveNewNotificationWarning:"El formulario debe llenarse correctamente.",saveNotificationSuccessSave:"Recurso salvo con éxito.",saveNotificationSuccessUpdate:"Recurso actualizado con éxito.",saveNotificationWarning:"El formulario debe llenarse correctamente."},pt:{cancelConfirmMessage:"Tem certeza que deseja cancelar esta operação?",detailActionNew:"Novo",pageActionCancel:"Cancelar",pageActionSave:"Salvar",pageActionSaveNew:"Salvar e novo",registerNotFound:"Registro não encontrado.",saveNewNotificationSuccessSave:"Recurso salvo com sucesso.",saveNewNotificationSuccessUpdate:"Recurso atualizado com sucesso.",saveNewNotificationWarning:"Formulário precisa ser preenchido corretamente.",saveNotificationSuccessSave:"Recurso salvo com sucesso.",saveNotificationSuccessUpdate:"Recurso atualizado com sucesso.",saveNotificationWarning:"Formulário precisa ser preenchido corretamente."}},ne=function(){function e(e,t,o,r,n){this.router=e,this.activatedRoute=t,this.poNotification=o,this.poDialogService=r,this.poPageDynamicService=n,this._actions={},this._autoRouter=!1,this._controlFields=[],this._detailFields=[],this._duplicates=[],this._fields=[],this._keys=[],this._pageActions=[],this.literals=u({},re.pt,re[y()]),this.model={},this.detailActions={},this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"actions",{set:function(e){this._actions=this.isObject(e)?e:{},this._pageActions=this.getPageActions(this._actions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?g(e):[],this._keys=this.getKeysByFields(this._fields),this._duplicates=this.getDuplicatesByFields(this._fields),this._controlFields=this.getControlFields(this._fields),this._detailFields=this.getDetailFields(this._fields)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this.activatedRoute.snapshot.params.id,t=this.activatedRoute.snapshot.queryParams.duplicate,o=this.activatedRoute.snapshot.data,r=o.serviceApi,n=o.serviceMetadataApi;this.serviceApi=r||this.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi,metadata:n}),r?this.loadMetadata(e,t):this.loadData(e,t)},Object.defineProperty(e.prototype,"duplicates",{get:function(){return g(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return g(this._keys)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageActions",{get:function(){return g(this._pageActions)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controlFields",{get:function(){return this._controlFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"detailFields",{get:function(){return this._detailFields},enumerable:!0,configurable:!0}),e.prototype.detailActionNew=function(){this.gridDetail.insertRow()},e.prototype.cancel=function(e){this.dynamicForm&&this.dynamicForm.form.dirty?this.poDialogService.confirm({message:this.literals.cancelConfirmMessage,title:this.literals.pageActionCancel,confirm:this.goBack.bind(this,e)}):this.goBack(e)},e.prototype.formatUniqueKey=function(e){return C(S(e,this.keys)).join("|")},e.prototype.goBack=function(e){e?this.router.navigate([e]):window.history.back()},e.prototype.loadData=function(e,t){var o=this;if(e)this.poPageDynamicService.getResource(e).toPromise().then((function(e){o.model=e})).catch((function(){o.model=void 0,o.actions=void 0,o._pageActions=[]}));else try{this.model=JSON.parse(t)||{}}catch(e){this.model={}}},e.prototype.loadMetadata=function(e,t){var o=this,r=e?"edit":"create";this.poPageDynamicService.getMetadata(r).toPromise().then((function(r){o.autoRouter=r.autoRouter,o.actions=r.actions||{},o.breadcrumb=r.breadcrumb||{items:[]},o.fields=r.fields||[],o.title=r.title,o.loadData(e,t)}))},e.prototype.navigateTo=function(e){if(e){var t=this.resolveUrl(this.model,e);this.router.navigate([t])}else window.history.back()},e.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},e.prototype.save=function(e){var t=this;if(this.dynamicForm.form.invalid)this.poNotification.warning(this.literals.saveNotificationWarning);else{var o=this.activatedRoute.snapshot.params.id,r=o?this.poPageDynamicService.updateResource(o,this.model):this.poPageDynamicService.createResource(this.model),n=o?this.literals.saveNotificationSuccessUpdate:this.literals.saveNotificationSuccessSave;r.toPromise().then((function(){t.poNotification.success(n),t.navigateTo(e)}))}},e.prototype.saveNew=function(e){var t=this;if(this.dynamicForm.form.invalid)this.poNotification.warning(this.literals.saveNewNotificationWarning);else{var o=this.activatedRoute.snapshot.params.id;o?this.poPageDynamicService.updateResource(o,this.model).toPromise().then((function(){t.poNotification.success(t.literals.saveNewNotificationSuccessUpdate),t.navigateTo(e)})):this.poPageDynamicService.createResource(this.model).toPromise().then((function(){t.poNotification.success(t.literals.saveNewNotificationSuccessSave),t.model={},t.dynamicForm.form.reset()}))}},e.prototype.getKeysByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.key})).map((function(e){return e.property}))},e.prototype.getControlFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return"detail"!==e.type}))},e.prototype.getDetailFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return"detail"===e.type}))},e.prototype.getDuplicatesByFields=function(e){return void 0===e&&(e=[]),e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},e.prototype.getPageActions=function(e){void 0===e&&(e={});var t=[{label:this.literals.pageActionSave,action:this.save.bind(this,e.save)}];return e.saveNew&&t.push({label:this.literals.pageActionSaveNew,action:this.saveNew.bind(this,e.saveNew)}),(void 0===e.cancel||e.cancel)&&t.push({label:this.literals.pageActionCancel,action:this.cancel.bind(this,e.cancel)}),t},e.prototype.isObject=function(e){return!!e&&"object"==typeof e&&!Array.isArray(e)},e.decorators=[{type:t.Component,args:[{selector:"po-page-dynamic-edit",template:'<po-page-default\n  [p-actions]="pageActions"\n  [p-breadcrumb]="breadcrumb"\n  [p-title]="title">\n\n  <ng-container *ngIf="model; then formFieldsTemplate; else registerNotFoundTemplate">\n  </ng-container>\n\n</po-page-default>\n\n<ng-template #registerNotFoundTemplate>\n\n  <po-widget>\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.registerNotFound }}\n    </span>\n  </po-widget>\n\n</ng-template>\n\n<ng-template #formFieldsTemplate>\n\n  <po-dynamic-form #dynamicForm [p-fields]="controlFields" [p-value]="model">\n  </po-dynamic-form>\n\n  <div *ngIf="detailFields.length > 0" class="po-sm-12">\n    <po-divider [p-label]="detailFields[0].divider"></po-divider>\n\n    <div class="po-row po-mb-2">\n      <po-button [p-label]="literals.detailActionNew" (p-click)="detailActionNew()" p-small></po-button>\n    </div>\n\n    <po-grid #gridDetail\n      [p-row-actions]="detailActions"\n      [p-columns]="detailFields[0].detail.columns"\n      [p-data]="model[detailFields[0].property]">\n    </po-grid>\n  </div>\n\n</ng-template>\n',providers:[X]}]}],e.ctorParameters=function(){return[{type:i.Router},{type:i.ActivatedRoute},{type:n.PoNotificationService},{type:n.PoDialogService},{type:X}]},e.propDecorators={actions:[{type:t.Input,args:["p-actions"]}],autoRouter:[{type:t.Input,args:["p-auto-router"]}],breadcrumb:[{type:t.Input,args:["p-breadcrumb"]}],fields:[{type:t.Input,args:["p-fields"]}],serviceApi:[{type:t.Input,args:["p-service-api"]}],title:[{type:t.Input,args:["p-title"]}],dynamicForm:[{type:t.ViewChild,args:["dynamicForm",{static:!1}]}],gridDetail:[{type:t.ViewChild,args:["gridDetail",{static:!1}]}]},e}();var ie=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoButtonModule,n.PoDividerModule,n.PoDynamicModule,n.PoGridModule,n.PoPageModule,n.PoWidgetModule,te],declarations:[ne],exports:[ne]}]}],e}(),se=function(){function e(e){this.http=e}return e.prototype.getCustomOptions=function(e,t,o){var r=this;return this.createObservable(e).pipe(a.map((function(e){return r.mergePageOptions(t,e,o)})))},e.prototype.changeOriginalOptionsToNewOptions=function(e,t){Object.keys(t).forEach((function(o){var r=t[o];if(e[o]){if(Array.isArray(r))return void(e[o]=g(r));if("number"==typeof r||"string"==typeof r)return void(e[o]=r);"object"==typeof r&&(e[o]=u({},r))}}))},e.prototype.createObservable=function(e){return"string"==typeof e?this.http.post(e,{}):c.from(Promise.resolve(e()))},e.prototype.mergePageOptions=function(e,t,o){var r=this,n=o.schema.reduce((function(o,n){var i;return u({},o,((i={})[n.nameProp]=r.createNewProp(n,e,t),i))}),{});return Object.keys(n).forEach((function(e){return!n[e]&&delete n[e]})),n},e.prototype.createNewProp=function(e,t,o){return e.merge?this.mergeOptions(t[e.nameProp],o[e.nameProp],e.keyForMerge):o[e.nameProp]||t[e.nameProp]},e.prototype.mergeOptions=function(e,t,o){if(e||t)return t?e?e instanceof Array&&t instanceof Array?this.mergeOptionsArray(e,t,o):u({},e,t):t:e},e.prototype.mergeOptionsArray=function(e,t,o){var r=t.filter((function(t){return!e.find((function(e){return e[o]===t[o]}))}));return g(e.map((function(e){var r=t.find((function(t){return e[o]===t[o]}))||e;return u({},e,r)})),r)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(s.HttpClient))},token:e,providedIn:"root"}),e}();var ae=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,s.HttpClientModule],providers:[se]}]}],e}(),ce={en:{title:"Advanced search",cancelLabel:"Cancel",confirmLabel:"Apply filters"},es:{title:"Búsqueda avanzada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},pt:{title:"Busca avançada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},ru:{title:"Расширенный поиск",cancelLabel:"отменить",confirmLabel:"Применить фильтры"}},pe=function(){function e(e){var o=this;this._filters=[],this.filter={},this.language="pt",this.primaryAction={action:function(){var e=o.getValuesFromForm();o.searchEvent.emit(e),o.poModal.close()},label:this.literals.confirmLabel},this.secondaryAction={action:function(){o.poModal.close()},label:this.literals.cancelLabel},this.searchEvent=new t.EventEmitter,this.language=e.getShortLanguage()}return Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=Array.isArray(e)?g(e):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"literals",{get:function(){return this._literals||ce[this.language]},set:function(e){this._literals=e instanceof Object&&!(e instanceof Array)?u({},ce.pt,ce[this.language],e):ce[this.language],this.primaryAction.label=this.literals.confirmLabel,this.secondaryAction.label=this.literals.cancelLabel},enumerable:!0,configurable:!0}),e.prototype.getValuesFromForm=function(){var e=this;return Object.keys(this.filter).forEach((function(t){void 0!==e.filter[t]&&""!==e.filter[t]||delete e.filter[t]})),this.filter},e.propDecorators={poModal:[{type:t.ViewChild,args:[n.PoModalComponent,{static:!0}]}],filters:[{type:t.Input,args:["p-filters"]}],literals:[{type:t.Input,args:["p-literals"]}],searchEvent:[{type:t.Output,args:["p-search-event"]}]},e}();var le=function(e){function o(t){return e.call(this,t)||this}return l(o,e),o.prototype.open=function(){this.filter={},this.poModal.open()},o.decorators=[{type:t.Component,args:[{selector:"po-advanced-filter",template:'<po-modal\n  p-hide-close\n  [p-primary-action]="primaryAction"\n  [p-secondary-action]="secondaryAction"\n  [p-title]="literals.title">\n\n  <po-dynamic-form\n    [p-fields]="filters"\n    [p-value]="filter">\n  </po-dynamic-form>\n\n</po-modal>\n'}]}],o.ctorParameters=function(){return[{type:n.PoLanguageService}]},o.propDecorators={poDynamicForm:[{type:t.ViewChild,args:[n.PoDynamicFormComponent,{static:!0}]}]},o}(pe);var ue={en:{disclaimerGroupTitle:"Displaying results filtered by:",filterTitle:ce.en.title,filterCancelLabel:ce.en.cancelLabel,filterConfirmLabel:ce.en.confirmLabel,quickSearchLabel:"Quick search:",searchPlaceholder:"Search"},es:{disclaimerGroupTitle:"Presentando resultados filtrados por:",filterTitle:ce.es.title,filterCancelLabel:ce.es.cancelLabel,filterConfirmLabel:ce.es.confirmLabel,quickSearchLabel:"Búsqueda rápida:",searchPlaceholder:"Buscar"},pt:{disclaimerGroupTitle:"Apresentando resultados filtrados por:",filterTitle:ce.pt.title,filterCancelLabel:ce.pt.cancelLabel,filterConfirmLabel:ce.pt.confirmLabel,quickSearchLabel:"Pesquisa rápida:",searchPlaceholder:"Pesquisar"},ru:{disclaimerGroupTitle:"Отображение результатов, отфильтрованных по:",filterTitle:ce.ru.title,filterCancelLabel:ce.ru.cancelLabel,filterConfirmLabel:ce.ru.confirmLabel,quickSearchLabel:"Быстрый поиск:",searchPlaceholder:"исследование"}},de=function(){function e(e){this._filters=[],this.actions=[],this.breadcrumb={items:[]},this.advancedSearch=new t.EventEmitter,this.changeDisclaimers=new t.EventEmitter,this.quickSearch=new t.EventEmitter,this.language=e.getShortLanguage()}return Object.defineProperty(e.prototype,"literals",{get:function(){return this._literals||ue[this.language]},set:function(e){this._literals=e instanceof Object&&!(e instanceof Array)?u({},ue.pt,ue[this.language],e):ue[this.language],this.setAdvancedFilterLiterals(this.literals)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=Array.isArray(e)?g(e):[]},enumerable:!0,configurable:!0}),e.prototype.setAdvancedFilterLiterals=function(e){this.advancedFilterLiterals={cancelLabel:e.filterCancelLabel,confirmLabel:e.filterConfirmLabel,title:e.filterTitle}},e.propDecorators={actions:[{type:t.Input,args:["p-actions"]}],breadcrumb:[{type:t.Input,args:["p-breadcrumb"]}],literals:[{type:t.Input,args:["p-literals"]}],filters:[{type:t.Input,args:["p-filters"]}],onLoad:[{type:t.Input,args:["p-load"]}],title:[{type:t.Input,args:["p-title"]}],advancedSearch:[{type:t.Output,args:["p-advanced-search"]}],changeDisclaimers:[{type:t.Output,args:["p-change-disclaimers"]}],quickSearch:[{type:t.Output,args:["p-quick-search"]}]},e}();var he=function(e){function o(t,o){var r=e.call(this,t)||this;return r.poPageCustomizationService=o,r._disclaimerGroup={change:r.onChangeDisclaimerGroup.bind(r),disclaimers:[],title:r.literals.disclaimerGroupTitle},r._filterSettings={action:"onAction",advancedAction:"onAdvancedAction",ngModel:"quickFilter",placeholder:r.literals.searchPlaceholder},r.changeDisclaimersEnabled=!1,r}return l(o,e),Object.defineProperty(o.prototype,"disclaimerGroup",{get:function(){return Object.assign({},this._disclaimerGroup,{title:this.literals.disclaimerGroupTitle})},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"filterSettings",{get:function(){return this._filterSettings.advancedAction=0===this.filters.length?void 0:"onAdvancedAction",Object.assign({},this._filterSettings,{placeholder:this.literals.searchPlaceholder})},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.setAdvancedFilterLiterals(this.literals),this.onLoad&&this.loadOptionsOnInitialize(this.onLoad)},o.prototype.ngOnDestroy=function(){this.loadSubscription&&this.loadSubscription.unsubscribe()},o.prototype.onAction=function(){this.changeDisclaimersEnabled=!1,this._disclaimerGroup.disclaimers=[{property:"search",label:this.literals.quickSearchLabel+" "+this.quickFilter,value:this.quickFilter}],this.quickSearch.observers&&this.quickSearch.observers.length>0&&this.quickSearch.emit(this.quickFilter),this.quickFilter=void 0},o.prototype.onAdvancedAction=function(){this.poAdvancedFilter.open()},o.prototype.onAdvancedSearch=function(e){this.changeDisclaimersEnabled=!1,this._disclaimerGroup.disclaimers=this.setDisclaimers(e),this.advancedSearch.emit(e)},o.prototype.applyDisclaimerLabelValue=function(e,t){return(Array.isArray(t)?t:[t]).map((function(t){var o=e.options.find((function(e){return e.value===t}));return o.label||o.value})).join(", ")},o.prototype.formatDate=function(e){var t=parseInt(e.substr(0,4),10),o=parseInt(e.substr(5,2),10),r=parseInt(e.substr(8,2),10);return new Date(t,o-1,r).toLocaleDateString(v())},o.prototype.getFieldByProperty=function(e,t){return e.find((function(e){return e.property===t}))},o.prototype.getFilterValueToDisclaimer=function(e,t){return e.type===n.PoDynamicFieldType.Date?this.formatDate(t):e.options?this.applyDisclaimerLabelValue(e,t):t},o.prototype.onChangeDisclaimerGroup=function(e){this.changeDisclaimersEnabled?this.changeDisclaimers.emit(e):this.changeDisclaimersEnabled=!0},o.prototype.setDisclaimers=function(e){var t=this,o=[];return Object.keys(e).forEach((function(r){var n,i=t.getFieldByProperty(t.filters,r),s=i.label||""+(n=i.property).charAt(0).toUpperCase()+n.slice(1),a=e[r];o.push({label:s+": "+t.getFilterValueToDisclaimer(i,a),property:r,value:a})})),o},o.prototype.loadOptionsOnInitialize=function(e){var t=this;this.loadSubscription=this.getPoDynamicPageOptions(e).subscribe((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))},o.prototype.getPoDynamicPageOptions=function(e){var t={title:this.title,actions:this.actions,breadcrumb:this.breadcrumb,filters:this.filters};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"filters",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0,keyForMerge:"label"},{nameProp:"breadcrumb"},{nameProp:"title"}]})},o.decorators=[{type:t.Component,args:[{selector:"po-page-dynamic-search",template:'<po-page-list\n  [p-actions]="actions"\n  [p-breadcrumb]="breadcrumb"\n  [p-disclaimer-group]="disclaimerGroup"\n  [p-filter]="filterSettings"\n  [p-title]="title">\n\n  <po-advanced-filter\n    [p-filters]="filters"\n    [p-literals]="advancedFilterLiterals"\n    (p-search-event)="onAdvancedSearch($event)">\n  </po-advanced-filter>\n\n  <ng-content></ng-content>\n</po-page-list>\n'}]}],o.ctorParameters=function(){return[{type:n.PoLanguageService},{type:se}]},o.propDecorators={poAdvancedFilter:[{type:t.ViewChild,args:[le,{static:!0}]}]},o}(de);var me=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoDynamicModule,n.PoLanguageModule,n.PoModalModule,n.PoPageModule,ae],declarations:[le,he],exports:[he]}]}],e}(),ge=function(){function e(){this._autoRouter=!1,this._columns=[],this._duplicates=[],this._fields=[],this._filters=[],this._keys=[],this.breadcrumb={items:[]}}return Object.defineProperty(e.prototype,"autoRouter",{get:function(){return this._autoRouter},set:function(e){this._autoRouter=P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},set:function(e){this._fields=Array.isArray(e)?g(e):[],this.setFieldsProperties(this.fields)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return g(this._columns)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duplicates",{get:function(){return g(this._duplicates)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return g(this._filters)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return g(this._keys)},enumerable:!0,configurable:!0}),e.prototype.setFieldsProperties=function(e){this._filters=e.filter((function(e){return!0===e.filter})),this._columns=e.filter((function(e){return void 0===e.visible||!0===e.visible})),this._keys=e.filter((function(e){return!0===e.key})).map((function(e){return e.property})),this._duplicates=e.filter((function(e){return!0===e.duplicate})).map((function(e){return e.property}))},e.propDecorators={autoRouter:[{type:t.Input,args:["p-auto-router"]}],breadcrumb:[{type:t.Input,args:["p-breadcrumb"]}],fields:[{type:t.Input,args:["p-fields"]}],serviceApi:[{type:t.Input,args:["p-service-api"]}],title:[{type:t.Input,args:["p-title"]}]},e}();var fe={en:{pageAction:"New",pageActionRemoveAll:"Delete",tableActionView:"View",tableActionEdit:"Edit",tableActionDuplicate:"Duplicate",tableActionDelete:"Delete",confirmRemoveTitle:"Confirm delete",confirmRemoveMessage:"Are you sure you want to delete this record? You can not undo this action.",confirmRemoveAllTitle:"Confirm batch deletion",confirmRemoveAllMessage:"Are you sure you want to delete all these records? You can not undo this action.",loadDataErrorNotification:"Service not found",removeSuccessNotification:"Item deleted successfully",removeAllSuccessNotification:"Items deleted successfully"},es:{pageAction:"Nuevo",pageActionRemoveAll:"Borrar",tableActionView:"Visualizar",tableActionEdit:"Editar",tableActionDuplicate:"Duplicar",tableActionDelete:"Borrar",confirmRemoveTitle:"Confirmar la exclusión",confirmRemoveMessage:"¿Está seguro de que desea eliminar este registro? No puede deshacer esta acción.",confirmRemoveAllTitle:"Confirmar la exclusión por lotes",confirmRemoveAllMessage:"¿Está seguro de que desea eliminar todos estos registros? No puede deshacer esta acción.",loadDataErrorNotification:"Servicio no informado.",removeSuccessNotification:"Elemento eliminado con éxito",removeAllSuccessNotification:"Elementos eliminados con éxito"},pt:{pageAction:"Novo",pageActionRemoveAll:"Excluir",tableActionView:"Visualizar",tableActionEdit:"Editar",tableActionDuplicate:"Duplicar",tableActionDelete:"Excluir",confirmRemoveTitle:"Confirmar exclusão",confirmRemoveMessage:"Tem certeza de que deseja excluir esse registro? Você não poderá desfazer essa ação.",confirmRemoveAllTitle:"Confirmar exclusão em lote",confirmRemoveAllMessage:"Tem certeza de que deseja excluir todos esses registros? Você não poderá desfazer essa ação.",loadDataErrorNotification:"Serviço não informado.",removeSuccessNotification:"Item excluido com sucesso",removeAllSuccessNotification:"Items excluidos com sucesso"}},ye=function(e){function o(t,o,r,n,i,s){var a=e.call(this)||this;return a.router=t,a.activatedRoute=o,a.poDialogService=r,a.poNotification=n,a.poPageDynamicService=i,a.poPageCustomizationService=s,a._actions={},a._pageActions=[],a._tableActions=[],a.page=1,a.params={},a.subscriptions=[],a.hasNext=!1,a.items=[],a.literals=u({},fe.pt,fe[y()]),a}return l(o,e),Object.defineProperty(o.prototype,"actions",{get:function(){return this._actions},set:function(e){this._actions=e&&"object"==typeof e&&Object.keys(e).length>0?e:{},this.setPageActions(this.actions),this.setRemoveAllAction(),this.setTableActions(this.actions)},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){this.loadDataFromAPI()},o.prototype.ngOnDestroy=function(){this.subscriptions&&this.subscriptions.forEach((function(e){e.unsubscribe()}))},o.prototype.onAdvancedSearch=function(e){this.subscriptions.push(this.loadData(u({page:1},e)).subscribe()),this.params=e},o.prototype.onChangeDisclaimers=function(e){var t={};e.forEach((function(e){t[e.property]=e.value})),this.onAdvancedSearch(t)},o.prototype.onQuickSearch=function(e){this.subscriptions.push(this.loadData(e?{page:1,search:e}:void 0).subscribe()),this.params=e?{search:e}:{}},o.prototype.onSort=function(e){this.sortedColumn=e},o.prototype.showMore=function(){this.subscriptions.push(this.loadData(u({page:++this.page},this.params)).subscribe())},Object.defineProperty(o.prototype,"hasActionRemoveAll",{get:function(){return!!this.actions.removeAll},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pageActions",{get:function(){return g(this._pageActions)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tableActions",{get:function(){return this._tableActions},enumerable:!0,configurable:!0}),o.prototype.confirmRemove=function(e){var t={title:this.literals.confirmRemoveTitle,message:this.literals.confirmRemoveMessage,confirm:this.remove.bind(this,e)};this.poDialogService.confirm(t)},o.prototype.confirmRemoveAll=function(){var e={title:this.literals.confirmRemoveAllTitle,message:this.literals.confirmRemoveAllMessage,confirm:this.removeAll.bind(this)};this.poDialogService.confirm(e)},o.prototype.formatUniqueKey=function(e){return C(S(e,this.keys)).join("|")},o.prototype.getOrderParam=function(e){void 0===e&&(e={type:void 0});var t=e.column,o=e.type;return t?o===n.PoTableColumnSortType.Descending?{order:"-"+t.property}:{order:""+t.property}:{}},o.prototype.loadData=function(e){var t=this;if(void 0===e&&(e={}),!this.serviceApi)return this.poNotification.error(this.literals.loadDataErrorNotification),c.throwError(this.literals.loadDataErrorNotification);var o=this.getOrderParam(this.sortedColumn),r=u({},{page:1,pageSize:10},e,o);return this.poPageDynamicService.getResources(r).pipe(a.tap((function(e){t.items=1===r.page?e.items:g(t.items,e.items),t.page=r.page,t.hasNext=e.hasNext})))},o.prototype.getMetadata=function(e){var t=this;return e?this.poPageDynamicService.getMetadata().pipe(a.tap((function(e){t.autoRouter=e.autoRouter||t.autoRouter,t.actions=e.actions||t.actions,t.breadcrumb=e.breadcrumb||t.breadcrumb,t.fields=e.fields||t.fields,t.title=e.title||t.title}))):c.EMPTY},o.prototype.navigateTo=function(e,t){var o=this;void 0===t&&(t=!1),this.router.navigate([e.url||e.path],{queryParams:e.params}).catch((function(){!t&&o.autoRouter&&(o.router.config.unshift({path:e.path,component:e.component,data:{serviceApi:o.serviceApi,autoRouter:!0}}),o.navigateTo(e,!0))}))},o.prototype.openDetail=function(e,t){var o=this.resolveUrl(t,e);this.navigateTo({path:e,url:o,component:ee})},o.prototype.openDuplicate=function(e,t){var o=S(t,this.duplicates);this.navigateTo({path:e,params:{duplicate:JSON.stringify(o)}})},o.prototype.openEdit=function(e,t){var o=this.resolveUrl(t,e);this.navigateTo({path:e,url:o})},o.prototype.openNew=function(e){this.navigateTo({path:e})},o.prototype.remove=function(e){var t=this,o=this.formatUniqueKey(e);this.poPageDynamicService.deleteResource(o).toPromise().then((function(){t.removeLocalItems([e]),t.poNotification.success(t.literals.removeSuccessNotification)}))},o.prototype.removeAll=function(){var e=this,t=this.items.filter((function(e){return e.$selected}));if(0!==t.length){var o,r,n=(o=t,r=this.keys,void 0===o&&(o=[]),void 0===r&&(r=[]),o.map((function(e){return S(e,r)})));this.poPageDynamicService.deleteResources(n).toPromise().then((function(){e.removeLocalItems(t),e.poNotification.success(e.literals.removeAllSuccessNotification)}))}},o.prototype.removeLocalItems=function(e){var t=this;void 0===e&&(e=[]),e.forEach((function(e){var o=t.items.indexOf(e);t.items.splice(o,1)}))},o.prototype.resolveUrl=function(e,t){var o=this.formatUniqueKey(e);return t.replace(/:id/g,o)},o.prototype.setPageActions=function(e){e&&(this._pageActions=[{label:this.literals.pageAction,action:this.openNew.bind(this,e.new),disabled:!this._actions.new}])},o.prototype.setRemoveAllAction=function(){this._actions.removeAll&&this._pageActions.push({label:this.literals.pageActionRemoveAll,action:this.confirmRemoveAll.bind(this),disabled:!this._actions.removeAll})},o.prototype.setTableActions=function(e){e&&(this._tableActions=[{action:this.openDetail.bind(this,e.detail),label:this.literals.tableActionView,visible:!!this._actions.detail},{action:this.openEdit.bind(this,e.edit),label:this.literals.tableActionEdit,visible:!!this._actions.edit},{action:this.openDuplicate.bind(this,e.duplicate),label:this.literals.tableActionDuplicate,visible:!!this._actions.duplicate},{action:this.confirmRemove.bind(this),label:this.literals.tableActionDelete,separator:!0,type:"danger",visible:!!this._actions.remove}])},o.prototype.loadDataFromAPI=function(){var e=this.activatedRoute.snapshot.data,t=e.serviceApi,o=e.serviceMetadataApi;this.serviceApi=t||this.serviceApi,this.poPageDynamicService.configServiceApi({endpoint:this.serviceApi,metadata:o});var r=this.getMetadata(t),n=this.loadData(),i=this.loadOptionsOnInitialize(this.onLoad);this.subscriptions.push(c.concat(r,n,i).subscribe())},o.prototype.loadOptionsOnInitialize=function(e){var t=this;return e?this.getPoDynamicPageOptions(e).pipe(a.tap((function(e){return t.poPageCustomizationService.changeOriginalOptionsToNewOptions(t,e)}))):c.EMPTY},o.prototype.getPoDynamicPageOptions=function(e){var t={fields:this.fields,actions:this.actions,breadcrumb:this.breadcrumb,title:this.title};return this.poPageCustomizationService.getCustomOptions(e,t,{schema:[{nameProp:"fields",merge:!0,keyForMerge:"property"},{nameProp:"actions",merge:!0},{nameProp:"breadcrumb"},{nameProp:"title"}]})},o.decorators=[{type:t.Component,args:[{selector:"po-page-dynamic-table",template:'<po-page-dynamic-search\n  [p-actions]="pageActions"\n  [p-breadcrumb]="breadcrumb"\n  [p-filters]="filters"\n  [p-title]="title"\n  (p-advanced-search)="onAdvancedSearch($event)"\n  (p-change-disclaimers)="onChangeDisclaimers($event)"\n  (p-quick-search)="onQuickSearch($event)">\n\n  <po-table\n    p-sort="true"\n    [p-actions]="tableActions"\n    [p-checkbox]="hasActionRemoveAll"\n    [p-columns]="columns"\n    [p-items]="items"\n    [p-show-more-disabled]="!hasNext"\n    (p-show-more)="showMore()"\n    (p-sort-by)="onSort($event)">\n  </po-table>\n\n</po-page-dynamic-search>\n',providers:[X]}]}],o.ctorParameters=function(){return[{type:i.Router},{type:i.ActivatedRoute},{type:n.PoDialogService},{type:n.PoNotificationService},{type:X},{type:se}]},o.propDecorators={onLoad:[{type:t.Input,args:["p-load"]}],actions:[{type:t.Input,args:["p-actions"]}]},o}(ge);var ve=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,n.PoTableModule,me,ae,te],declarations:[ye],exports:[ye]}]}],e}(),be=function(){function e(){this.periodicity="single",this.firstExecution=new Date,this.firstExecutionHour=this.getCurrentHour(this.firstExecution),this.recurrent=!0}return e.prototype.getCurrentHour=function(e){return(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())},e}();var Pe=function(){function e(e){this.poPageJobSchedulerService=e,this.breadcrumb={items:[]},this.model=new be}return e.prototype.loadData=function(e){var t=this;e?this.poPageJobSchedulerService.getResource(e).toPromise().then((function(e){t.model=e})).catch((function(){t.model=new be})):this.model=new be},e.prototype.markAsDirtyInvalidControls=function(e){for(var t in e)if(e.hasOwnProperty(t)){var o=e[t];o.invalid&&o.markAsDirty()}},e.propDecorators={breadcrumb:[{type:t.Input,args:["p-breadcrumb"]}],serviceApi:[{type:t.Input,args:["p-service-api"]}],title:[{type:t.Input,args:["p-title"]}]},e}();var we={en:{at:"at",back:"Back",next:"Next",periodicity:"Periodicity",execution:"Execution",process:"Process",enterProcess:"Enter a process",recurrent:"Recurrent",single:"Single",daily:"Daily",weekly:"Weekly",monthly:"Monthly",scheduling:"Scheduling",parameterization:"Parameterization",conclude:"Conclude",firstExecution:"First Execution",hour:"Hour",day:"Day",weekDays:"Week days",sunday:"Sunday",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",parameters:"Parameters",yes:"Yes",no:"No",notReported:"Not reported",periodicityData:"Periodicity data",confirmation:"Confirmation",confirmSaveMessage:"Are you sure you want to complete this schedule?",confirmUpdateMessage:"Are you sure you want to update this schedule?",saveNotificationSuccessUpdate:"Successfully updated scheduling",saveNotificationSuccessSave:"Successfully saved scheduling",parametersNotFound:"Parameters not found."},es:{at:"a las",back:"Volver",next:"Avanzar",periodicity:"Periodicidad",execution:"Ejecución",process:"Proceso",enterProcess:"Informe un proceso",recurrent:"Recurrente",single:"Única",daily:"Diaria",weekly:"Semanal",monthly:"Mensual",scheduling:"Programación",parameterization:"Parametrización",conclude:"Completar",firstExecution:"Primera ejecución",hour:"Horario",day:"Día",weekDays:"Dias de la semana",sunday:"Domingo",monday:"Lunes",tuesday:"Martes",wednesday:"Miércoles",thursday:"Jueves",friday:"Viernes",saturday:"Sábado",parameters:"Parámetros",yes:"Sí",no:"No",notReported:"No informado",periodicityData:"Dados da periodicidade",confirmation:"Confirmación",confirmSaveMessage:"¿Está seguro de que desea completar esta programación de proceso?",confirmUpdateMessage:"¿Está seguro de que desea cambiar esta programación de proceso?",saveNotificationSuccessUpdate:"Programación de proceso actualizada con éxito.",saveNotificationSuccessSave:"Programación de proceso salvo con éxito.",parametersNotFound:"No se encontraron parámetros."},pt:{at:"às",back:"Voltar",next:"Avançar",periodicity:"Periodicidade",execution:"Execução",process:"Processo",enterProcess:"Informe um processo",recurrent:"Recorrente",single:"Única",daily:"Diária",weekly:"Semanal",monthly:"Mensal",scheduling:"Agendamento",parameterization:"Parametrização",conclude:"Concluir",firstExecution:"Primeira execução",hour:"Horário",day:"Dia",weekDays:"Dias de semana",sunday:"Domingo",monday:"Segunda-feira",tuesday:"Terça-feira",wednesday:"Quarta-feira",thursday:"Quinta-feira",friday:"Sexta-feira",saturday:"Sábado",parameters:"Parâmetros",yes:"Sim",no:"Não",notReported:"Não informado",periodicityData:"Dados da periodicidade",confirmation:"Confirmação",confirmSaveMessage:"Tem certeza que deseja concluir este agendamento de processo?",confirmUpdateMessage:"Tem certeza que deseja alterar este agendamento de processo?",saveNotificationSuccessUpdate:"Agendamento de processo atualizado com sucesso.",saveNotificationSuccessSave:"Agendamento de processo salvo com sucesso.",parametersNotFound:"Parâmetros não foram encontrados."}},ke=function(){function e(e){this.http=e,this.endpoint="/",this.headers=new s.HttpHeaders({"X-PORTINARI-SCREEN-LOCK":"true"})}return e.prototype.configServiceApi=function(e){void 0===e&&(e={}),this.endpoint=e.endpoint},e.prototype.createResource=function(e){var t=this.convertToJobScheduler(e);return this.http.post(""+this.endpoint,t,{headers:this.headers})},e.prototype.getHeadProcesses=function(){return this.http.head(this.endpoint+"/processes",{headers:{"X-Portinari-No-Error":"true"}})},e.prototype.getParametersByProcess=function(e){return this.http.get(this.endpoint+"/processes/"+e+"/parameters",{headers:this.headers}).pipe(a.map((function(e){return e.items})))},e.prototype.getProcess=function(e){return this.http.get(this.endpoint+"/processes/"+e,{headers:this.headers})},e.prototype.getProcesses=function(e){return void 0===e&&(e={}),this.http.get(this.endpoint+"/processes",{params:e})},e.prototype.getResource=function(e){var t=this;return this.http.get(this.endpoint+"/"+e,{headers:this.headers}).pipe(a.map((function(e){return t.convertToJobSchedulerInternal(e)})))},e.prototype.updateResource=function(e,t){var o=this.convertToJobScheduler(t);return this.http.put(this.endpoint+"/"+e,o,{headers:this.headers})},e.prototype.convertToJobScheduler=function(e){var t=u({},e);return e.periodicity&&("single"===e.periodicity?t.recurrent=!1:Object.assign(t,this.convertToPeriodicity(e))),e.firstExecutionHour&&(t.firstExecution=this.replaceHourFirstExecution(e.firstExecution,e.firstExecutionHour)),Object.keys(this.returnValidExecutionParameter(t.executionParameter)).length||delete t.executionParameter,this.removeInvalidKeys(t),t},e.prototype.convertToJobSchedulerInternal=function(e){void 0===e&&(e={});var t=u({},e);return e.firstExecution&&(t.firstExecutionHour=this.getHourFirstExecution(e.firstExecution)),Object.assign(t,this.convertToPeriodicityInternal(e)),this.removeInvalidKeys(t,["weekly","monthly","daily"]),t},e.prototype.convertToPeriodicity=function(e){var t={},o=e.periodicity;return o&&(t[o]={},"monthly"===o?t[o].day=e.dayOfMonth?parseInt(e.dayOfMonth,10):0:"weekly"===o&&(t[o].daysOfWeek=e.daysOfWeek),t[o].hour=e.hour?parseInt(e.hour.split(":")[0],10):0,t[o].minute=e.hour?parseInt(e.hour.split(":")[1],10):0),t},e.prototype.convertToPeriodicityInternal=function(e){return void 0===e&&(e={}),e.monthly?{periodicity:"monthly",hour:A(e.monthly.hour)+":"+A(e.monthly.minute),dayOfMonth:e.monthly.day}:e.daily?{periodicity:"daily",hour:A(e.daily.hour)+":"+A(e.daily.minute)}:e.weekly?{periodicity:"weekly",hour:A(e.weekly.hour)+":"+A(e.weekly.minute),daysOfWeek:g(e.weekly.daysOfWeek)}:{periodicity:"single"}},e.prototype.getCurrentHour=function(e){return A(e.getHours())+":"+A(e.getMinutes())},e.prototype.getHourFirstExecution=function(e){return this.getCurrentHour(new Date(e))},e.prototype.removeInvalidKeys=function(e,t){var o=t||["periodicity","hour","minute","day","daysOfWeek","dayOfMonth","firstExecutionHour"];Object.keys(e).forEach((function(t){o.includes(t)&&delete e[t]}))},e.prototype.replaceHourFirstExecution=function(e,t){var o=new Date(e),r=t.split(":"),n=parseInt(r[0],10),i=parseInt(r[1],10);return o.setHours(n,i),function(e,t){if(e){var o=e.getMonth()+1,r=e.getDate()<10?"0"+e.getDate():e.getDate(),n=o<10?"0"+o:o,i=function(e){if(e>=1e3)return e.toString();if(e>99&&e<1e3)return"0"+e;if(e>9&&e<100)return"00"+e;if(e>=0&&e<10)return"000"+e}(e.getFullYear()),s=e.toString();return t?i+"-"+n+"-"+r+t:i+"-"+n+"-"+r+"T"+s.substring(16,24)+s.substring(28,31)+":"+s.substring(31,33)}return null}(o)},e.prototype.returnValidExecutionParameter=function(e){var t=u({},e);for(var o in t)t.hasOwnProperty(o)&&void 0===t[o]&&delete t[o];return t},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e}();var Se=function(){function e(e){this.poPageJobSchedulerService=e}return e.prototype.getFilteredData=function(e,t,o){var r={page:t,pageSize:o,search:e};return this.poPageJobSchedulerService.getProcesses(r)},e.prototype.getObjectByValue=function(e){return this.poPageJobSchedulerService.getProcess(e)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:ke}]},e}();var Ce=function(e){function o(t,o,r,n,i,s){var a=e.call(this,s)||this;return a.poPageDynamicLookupService=t,a.activatedRoute=o,a.poDialogService=r,a.poNotification=n,a.router=i,a.isEdit=!1,a.literals=u({},we.pt,we[y()]),a.parameters=[],a.step=1,a.backPageAction={label:a.literals.back,action:a.nextStepOperation.bind(a,"back"),disabled:a.isDisabledBack.bind(a)},a.concludePageActions=[{label:a.literals.conclude,action:a.confirmJobScheduler.bind(a)},u({},a.backPageAction)],a.nextPageActions=[{label:a.literals.next,action:a.nextStepOperation.bind(a,"next"),disabled:a.isDisabledAdvance.bind(a)},u({},a.backPageAction)],a.jobSchedulerActions=g(a.nextPageActions),a.steps=[{label:a.literals.scheduling},{label:a.literals.parameterization},{label:a.literals.conclude}],a}return l(o,e),Object.defineProperty(o.prototype,"stepperOrientation",{get:function(){return window.innerWidth>481&&window.innerWidth<960?"horizontal":"vertical"},enumerable:!0,configurable:!0}),o.prototype.ngOnInit=function(){var e=this.activatedRoute.snapshot.params.id;this.isEdit=!!e,this.poPageJobSchedulerService.configServiceApi({endpoint:this.serviceApi}),this.loadData(e)},o.prototype.changePageActionsBySteps=function(e,t){var o=this.steps.length;t===o?this.jobSchedulerActions=g(this.concludePageActions):e===o&&t<e&&(this.jobSchedulerActions=g(this.nextPageActions))},o.prototype.nextStep=function(e){if(e>1&&this.schedulerExecution.form.invalid)this.markAsDirtyInvalidControls(this.schedulerExecution.form.controls);else if(e>2&&this.schedulerParameters&&this.schedulerParameters.form&&this.schedulerParameters.form.invalid)this.markAsDirtyInvalidControls(this.schedulerParameters.form.controls);else{this.changePageActionsBySteps(this.step,e);var t=this.steps[this.step-1];this.step=e,t&&(t.status=n.PoStepperStatus.Done)}},o.prototype.onChangeProcess=function(e){if(e.existAPI&&e.processId)return this.getParametersByProcess(e.processId),void(this.isEdit||(this.model.executionParameter={}))},o.prototype.confirmJobScheduler=function(){var e=this,t=this.activatedRoute.snapshot.params.id,o=t?this.literals.confirmUpdateMessage:this.literals.confirmSaveMessage;this.poDialogService.confirm({title:this.literals.confirmation,message:o,confirm:function(){var o=Object.assign({},e.model);e.save(o,t)}})},o.prototype.emitSuccessMessage=function(e,t){return d(this,void 0,void 0,(function(){return h(this,(function(o){switch(o.label){case 0:return[4,t.toPromise()];case 1:return o.sent(),this.poNotification.success(e),this.resetJobSchedulerForm(),[2]}}))}))},o.prototype.getParametersByProcess=function(e){var t=this;this.poPageJobSchedulerService.getParametersByProcess(e).subscribe((function(e){t.parameters=e}))},o.prototype.isDisabledAdvance=function(){return!!this.schedulerExecution&&this.schedulerExecution.form.invalid},o.prototype.isDisabledBack=function(){return 1===this.step},o.prototype.nextStepOperation=function(e){var t="back"===e?this.step-1:this.step+1;this.nextStep(t)},o.prototype.resetJobSchedulerForm=function(){var e=this;this.schedulerExecution.form.reset(),setTimeout((function(){e.model=new be,e.step=1,e.steps.forEach((function(e){e.status=n.PoStepperStatus.Default})),e.jobSchedulerActions=g(e.nextPageActions)}))},o.prototype.save=function(e,t){var o=t?this.poPageJobSchedulerService.updateResource(t,e):this.poPageJobSchedulerService.createResource(e),r=t?this.literals.saveNotificationSuccessUpdate:this.literals.saveNotificationSuccessSave;this.emitSuccessMessage(r,o)},o.decorators=[{type:t.Component,args:[{selector:"po-page-job-scheduler",template:'<po-page-default\n  [p-actions]="jobSchedulerActions"\n  [p-breadcrumb]="breadcrumb"\n  [p-title]="title">\n\n  <div class="po-row">\n\n    <po-stepper\n      class="po-lg-3 po-xl-2"\n      p-sequential="true"\n      [p-orientation]="stepperOrientation"\n      [p-step]="step"\n      [p-steps]="steps"\n      (p-change-step)="nextStep($event)">\n    </po-stepper>\n\n    <po-container class="po-lg-8 po-xl-6">\n      <form #formScheduler="ngForm">\n        <div class="po-row">\n          <po-page-job-scheduler-execution [hidden]="step !== 1"\n            #schedulerExecution\n            class="po-md-12"\n            [p-is-edit]="isEdit"\n            [p-literals]="literals"\n            [p-value]="model"\n            (p-change-process)="onChangeProcess($event)">\n          </po-page-job-scheduler-execution>\n\n          <po-page-job-scheduler-parameters *ngIf="step === 2"\n            #schedulerParameters\n            class="po-md-12"\n            [p-literals]="literals"\n            [p-parameters]="parameters || []"\n            [(p-value)]="model.executionParameter">\n          </po-page-job-scheduler-parameters>\n\n          <po-page-job-scheduler-summary *ngIf="step === 3"\n            class="po-md-12"\n            [p-literals]="literals"\n            [p-parameters]="parameters"\n            [p-value]="model">\n          </po-page-job-scheduler-summary>\n        </div>\n      </form>\n    </po-container>\n  </div>\n\n</po-page-default>\n',encapsulation:t.ViewEncapsulation.None,styles:["\n    po-container .po-container {\n      overflow-y: unset;\n    }\n  "]}]}],o.ctorParameters=function(){return[{type:Se},{type:i.ActivatedRoute},{type:n.PoDialogService},{type:n.PoNotificationService},{type:i.Router},{type:ke}]},o.propDecorators={schedulerExecution:[{type:t.ViewChild,args:["schedulerExecution",{static:!0}]}],schedulerParameters:[{type:t.ViewChild,args:["schedulerParameters",{static:!0}]}]},o}(Pe);var Ae=function(){function e(e,o){this.poPageJobSchedulerService=e,this.poPageJobSchedulerLookup=o,this._value={},this.dayPattern="^(3[0-1]|[0-2][0-9]|[1-9]|0[1-9])$",this.existProcessAPI=!0,this.minDateFirstExecution=new Date,this.periodicityOptions=[],this.timePattern="^(2[0-3]|[01][0-9]):?([0-5][0-9])$",this.weekDays=[],this.isEdit=!1,this.literals={},this.changeProcess=new t.EventEmitter}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e&&w(e,"object")?e:{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startDateFirstExecution",{get:function(){return this.isEdit?void 0:this.minDateFirstExecution},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){e.subscribeProcessIdValueChanges()}))},e.prototype.ngOnInit=function(){this.periodicityTemplates={daily:this.dailyTemplate,monthly:this.monthlyTemplate,weekly:this.weeklyTempalte},this.checkExistsProcessesAPI(),this.periodicityOptions=this.getPeriodicityOptions(),this.weekDays=this.getWeekDays()},e.prototype.checkExistsProcessesAPI=function(){var e=this;this.poPageJobSchedulerService.getHeadProcesses().subscribe(void 0,(function(t){e.existProcessAPI=!1}))},e.prototype.getPeriodicityOptions=function(){return[{label:this.literals.single,value:"single"},{label:this.literals.daily,value:"daily"},{label:this.literals.weekly,value:"weekly"},{label:this.literals.monthly,value:"monthly"}]},e.prototype.getWeekDays=function(){return[{label:this.literals.sunday,value:"Sunday"},{label:this.literals.monday,value:"Monday"},{label:this.literals.tuesday,value:"Tuesday"},{label:this.literals.wednesday,value:"Wednesday"},{label:this.literals.thursday,value:"Thursday"},{label:this.literals.friday,value:"Friday"},{label:this.literals.saturday,value:"Saturday"}]},e.prototype.subscribeProcessIdValueChanges=function(){var e=this;this.form.controls.processID.valueChanges.subscribe((function(t){e.changeProcess.emit({processId:t,existAPI:e.existProcessAPI})}))},e.decorators=[{type:t.Component,args:[{selector:"po-page-job-scheduler-execution",template:'<form #formExecution="ngForm">\n  <div class="po-row">\n    <ng-container *ngIf="existProcessAPI; then lookupProcessesID; else inputProcessesID"></ng-container>\n  </div>\n\n  <div class="po-row">\n    <po-divider class="po-md-12" [p-label]="literals.firstExecution"></po-divider>\n\n    <po-datepicker\n      class="po-md-4"\n      name="firstExecution"\n      [(ngModel)]="value.firstExecution"\n      p-placeholder="dd/mm/aaaa"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.day"\n      [p-min-date]="startDateFirstExecution">\n    </po-datepicker>\n\n    <po-input\n      class="po-md-2"\n      name="firstExecutionHour"\n      [(ngModel)]="value.firstExecutionHour"\n      p-mask="99:99"\n      p-mask-format-model\n      p-placeholder="HH:mm"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.hour"\n      [p-pattern]="timePattern">\n    </po-input>\n\n  </div>\n\n  <hr>\n\n  <div class="po-row">\n    <po-radio-group\n      class="po-sm-12"\n      name="periodicity"\n      [(ngModel)]="value.periodicity"\n      p-columns="4"\n      p-required\n      [p-label]="literals.periodicity"\n      [p-options]="periodicityOptions">\n    </po-radio-group>\n\n    <ng-container *ngIf="value.periodicity !== \'single\'">\n      <po-divider class="po-md-12" [p-label]="literals.periodicityData">\n      </po-divider>\n\n      <div class="po-row">\n        <ng-container *ngTemplateOutlet="periodicityTemplates[value.periodicity]">\n        </ng-container>\n      </div>\n\n      <div class="po-row">\n        <po-switch\n          class="po-md-3"\n          name="recurrent"\n          [(ngModel)]="value.recurrent"\n          [p-label]="literals.recurrent"\n          [p-label-off]="literals.no"\n          [p-label-on]="literals.yes">\n        </po-switch>\n      </div>\n    </ng-container>\n  </div>\n\n  <ng-template #lookupProcessesID>\n    <po-lookup\n      class="po-md-12"\n      name="processID"\n      [(ngModel)]="value.processID"\n      p-field-label="description"\n      p-field-value="processID"\n      p-required\n      [p-disabled]="isEdit"\n      [p-filter-service]="poPageJobSchedulerLookup"\n      [p-label]="literals.process"\n      [p-placeholder]="literals.enterProcess">\n    </po-lookup>\n  </ng-template>\n\n  <ng-template #inputProcessesID>\n    <po-input\n      class="po-md-12"\n      name="processID"\n      [(ngModel)]="value.processID"\n      p-required\n      [p-disabled]="isEdit"\n      [p-label]="literals.process"\n      [p-placeholder]="literals.enterProcess">\n    </po-input>\n  </ng-template>\n\n  <ng-template #dailyTemplate>\n    <ng-container *ngTemplateOutlet="inputHourTemplate">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #weeklyTemplate>\n    <div class="po-row">\n      <ng-container *ngTemplateOutlet="inputHourTemplate">\n      </ng-container>\n    </div>\n\n    <po-checkbox-group\n      class="po-md-12"\n      name="daysOfWeek"\n      [(ngModel)]="value.daysOfWeek"\n      p-columns="4"\n      p-required\n      [p-label]="literals.weekDays"\n      [p-options]="weekDays">\n    </po-checkbox-group>\n  </ng-template>\n\n  <ng-template #monthlyTemplate>\n    <po-number\n      class="po-md-3"\n      name="dayOfMonth"\n      [(ngModel)]="value.dayOfMonth"\n      p-required\n      [p-error-pattern]="\'Dia inválido\'"\n      [p-label]="literals.day"\n      [p-max]="31"\n      [p-pattern]="dayPattern">\n    </po-number>\n\n    <ng-container *ngTemplateOutlet="inputHourTemplate">\n    </ng-container>\n  </ng-template>\n\n  <ng-template #inputHourTemplate>\n    <po-input\n      class="po-md-2"\n      name="hour"\n      [(ngModel)]="value.hour"\n      p-mask="99:99"\n      p-mask-format-model\n      p-placeholder="HH:mm"\n      p-required\n      [p-label]="literals.hour"\n      [p-pattern]="timePattern">\n    </po-input>\n  </ng-template>\n</form>\n'}]}],e.ctorParameters=function(){return[{type:ke},{type:Se}]},e.propDecorators={form:[{type:t.ViewChild,args:["formExecution",{static:!0}]}],dailyTemplate:[{type:t.ViewChild,args:["dailyTemplate",{static:!0}]}],monthlyTemplate:[{type:t.ViewChild,args:["monthlyTemplate",{static:!0}]}],weeklyTempalte:[{type:t.ViewChild,args:["weeklyTemplate",{static:!0}]}],isEdit:[{type:t.Input,args:["p-is-edit"]}],literals:[{type:t.Input,args:["p-literals"]}],value:[{type:t.Input,args:["p-value"]}],changeProcess:[{type:t.Output,args:["p-change-process"]}]},e}();var Ee=function(){function e(){this.literals={},this.parameters=[],this.valueChange=new t.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;this.form&&setTimeout((function(){e.form.valueChanges.subscribe((function(t){e.valueChange.emit(t)}))}))},e.decorators=[{type:t.Component,args:[{selector:"po-page-job-scheduler-parameters",template:'<ng-container *ngIf="parameters && parameters.length; then formFieldsTemplate; else parametersNotFoundTemplate">\n</ng-container>\n\n<ng-template #parametersNotFoundTemplate>\n\n  <div class="po-text-center">\n    <span class="po-icon po-icon-info"></span>\n    <span class="po-font-text-large">\n      {{ literals.parametersNotFound }}\n    </span>\n  </div>\n\n</ng-template>\n\n<ng-template #formFieldsTemplate>\n  <form #parametersForm="ngForm">\n    <po-dynamic-form\n      p-group-form\n      [p-fields]="parameters"\n      [p-value]="value">\n    </po-dynamic-form>\n  </form>\n</ng-template>\n'}]}],e.propDecorators={form:[{type:t.ViewChild,args:["parametersForm",{static:!0}]}],literals:[{type:t.Input,args:["p-literals"]}],parameters:[{type:t.Input,args:["p-parameters"]}],value:[{type:t.Input,args:["p-value"]}],valueChange:[{type:t.Output,args:["p-valueChange"]}]},e}();var Ie=function(){function e(e){this.datePipe=e,this.executionValue="",this.firstExecutionValue="",this.infoOrientation=n.PoInfoOrientation.Horizontal,this.periodicityValue="",this.recurrentValue="",this.literals={},this.parameters=[],this.value={}}return e.prototype.ngOnInit=function(){var e=this.value,t=e.periodicity,o=e.hour,r=e.dayOfMonth,n=e.daysOfWeek,i=e.recurrent,s=e.firstExecution,a=e.firstExecutionHour;this.periodicityValue=this.getPeriodicityLabel(t),this.executionValue=this.getExecutionValue(t,o,n,r),this.firstExecutionValue=this.getFirstExecutionLabel(s,a),this.recurrentValue=this.getRecurrentValue(i)},e.prototype.getExecutionValue=function(e,t,o,r){switch(e){case"daily":return this.getHourLabel(t);case"monthly":return this.getMonthlyLabelExecution(r,t);case"weekly":return this.getWeeklyLabelExecution(o,t);default:return this.literals.notReported}},e.prototype.getFirstExecutionLabel=function(e,t){return e?this.datePipe.transform(e,"dd/MM/yyyy","-0200")+" "+this.getHourLabel(t):this.literals.notReported},e.prototype.getHourLabel=function(e){return this.literals.at+" "+(e||"00:00")+"h"},e.prototype.getMonthlyLabelExecution=function(e,t){var o=this.getHourLabel(t);return this.literals.day+" "+e+" "+o},e.prototype.getPeriodicityLabel=function(e){switch(e){case"daily":return this.literals.daily;case"monthly":return this.literals.monthly;case"weekly":return this.literals.weekly;default:return this.literals.single}},e.prototype.getRecurrentValue=function(e){return e?this.literals.yes:this.literals.no},e.prototype.getSorterWeekDays=function(){return{sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6}},e.prototype.getTranslateWeekDay=function(e){return{Sunday:this.literals.sunday,Monday:this.literals.monday,Tuesday:this.literals.tuesday,Wednesday:this.literals.wednesday,Thursday:this.literals.thursday,Friday:this.literals.friday,Saturday:this.literals.saturday}[e]||""},e.prototype.getWeekDaysLabel=function(e){var t=this;return void 0===e&&(e=[]),this.sortWeekDays(e).map((function(e){return t.getTranslateWeekDay(e)})).join(", ")},e.prototype.getWeeklyLabelExecution=function(e,t){return e&&Array.isArray(e)?this.getWeekDaysLabel(e)+" "+this.getHourLabel(t):this.literals.notReported},e.prototype.sortWeekDays=function(e){void 0===e&&(e=[]);var t=this.getSorterWeekDays();return e.sort((function(e,o){var r=e.toLowerCase(),n=o.toLowerCase();return t[r]>t[n]?1:-1}))},e.decorators=[{type:t.Component,args:[{selector:"po-page-job-scheduler-summary",template:'<div class="po-md-12">\n  <po-info\n    [p-label]="literals.process"\n    [p-orientation]="infoOrientation"\n    [p-value]="value.processID">\n  </po-info>\n\n  <po-info\n    [p-label]="literals.periodicity"\n    [p-orientation]="infoOrientation"\n    [p-value]="periodicityValue">\n  </po-info>\n\n  <po-info *ngIf="value.periodicity !== \'single\'"\n    [p-label]="literals.execution"\n    [p-orientation]="infoOrientation"\n    [p-value]="executionValue">\n  </po-info>\n\n  <po-info\n    [p-label]="literals.recurrent"\n    [p-orientation]="infoOrientation"\n    [p-value]="recurrentValue">\n  </po-info>\n\n  <po-info\n    [p-label]="literals.firstExecution"\n    [p-orientation]="infoOrientation"\n    [p-value]="firstExecutionValue">\n  </po-info>\n</div>\n\n<po-widget *ngIf="parameters && parameters.length"\n  class="po-pt-1 po-pb-1 po-md-12"\n  [p-title]="literals.parameters">\n\n  <po-dynamic-view\n    [p-fields]="parameters"\n    [p-value]="value.executionParameter">\n  </po-dynamic-view>\n\n</po-widget>\n\n'}]}],e.ctorParameters=function(){return[{type:o.DatePipe}]},e.propDecorators={literals:[{type:t.Input,args:["p-literals"]}],parameters:[{type:t.Input,args:["p-parameters"]}],value:[{type:t.Input,args:["p-value"]}]},e}();var Me=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{declarations:[Ce,Ae,Ee,Ie],exports:[Ce],imports:[o.CommonModule,r.FormsModule,n.PoButtonModule,n.PoContainerModule,n.PoDialogModule,n.PoDividerModule,n.PoDynamicModule,n.PoFieldModule,n.PoInfoModule,n.PoPageModule,n.PoStepperModule,n.PoWidgetModule],providers:[ke,Se]}]}],e}(),Fe={Basic:"Basic",Bearer:"Bearer"},Re={en:{title:"Welcome",loginErrorPattern:"Invalid Login",loginHint:"Your login user was given to you at your first day.\n    If you don't have this information contact support",loginPlaceholder:"Insert your e-mail",passwordErrorPattern:"Invalid Password",passwordPlaceholder:"Insert your password",customFieldErrorPattern:"Invalid value",customFieldPlaceholder:"Please enter a value",rememberUser:"Automatic login",rememberUserHint:"You can disable this option in system configuration",submitLabel:"Enter",submittedLabel:"Loading...",forgotPassword:"Forgot your Password?",highlightInfo:"",registerUrl:"New register",titlePopover:"Oops!",forgotYourPassword:"Forgot your password?",ifYouTryHarder:"If you try ",attempts:"{0} more time(s) ",yourUserWillBeBlocked:"without success your user will be blocked and you will be left 24 hours without being able to access :(",createANewPasswordNow:"Better create a new password now! You will be able to log into the system right away.",iForgotMyPassword:"I forgot my password"},es:{title:"Bienvenido",loginErrorPattern:"Login inválido",loginHint:"Su usuario ha sido entregado para usted en su primer día.\n    Si no tiene esta información, póngase en contacto con el soporte técnico",loginPlaceholder:"Inserte su e-mail",passwordErrorPattern:"Contraseña inválida",passwordPlaceholder:"Inserte su contraseña",customFieldErrorPattern:"Valor no válido.",customFieldPlaceholder:"Por favor introduzca un valor",rememberUser:"Inicio de sesión automáticamente",rememberUserHint:"Puede deshabilitar esta opción en el menú del sistema.",submitLabel:"Entrar",submittedLabel:"Cargando...",forgotPassword:"Olvidaste tu contraseña?",highlightInfo:"",registerUrl:"Nuevo registro",titlePopover:"Opa!",forgotYourPassword:"Olvidaste tu contraseña?",ifYouTryHarder:"Si intenta más ",attempts:"{0} vez/veces ",yourUserWillBeBlocked:"sin éxito su usuario sera bloqueado y usted vás permanecer 24 horas sin poder acceder a :(",createANewPasswordNow:"¡Mejor crear una nueva contraseña ahora! Usted podrá entrar en el sistema inmediatamente después.",iForgotMyPassword:"Olvide mi contraseña"},pt:{title:"Bem-vindo",loginErrorPattern:"Login inválido",loginHint:"Seu usuário foi entregue a você no seu primeiro dia.\n    Caso não tenha mais essa informação contacte o suporte",loginPlaceholder:"Insira seu e-mail",passwordErrorPattern:"Senha inválida",passwordPlaceholder:"Insira sua senha",customFieldErrorPattern:"Valor inválido.",customFieldPlaceholder:"Por favor insira um valor",rememberUser:"Logar automaticamente",rememberUserHint:"Você pode desabilitar essa opção no menu do sistema",submitLabel:"Entrar",submittedLabel:"Carregando...",forgotPassword:"Esqueceu sua senha?",highlightInfo:"",registerUrl:"Novo registro",titlePopover:"Opa!",forgotYourPassword:"Esqueceu sua senha?",ifYouTryHarder:"Se tentar mais ",attempts:"{0} vez(es) ",yourUserWillBeBlocked:"sem sucesso seu usuário será bloqueado e você fica 24 horas sem poder acessar :(",createANewPasswordNow:"Melhor criar uma senha nova agora! Você vai poder entrar no sistema logo em seguida.",iForgotMyPassword:"Esqueci minha senha"},ru:{title:"Добро пожаловать!",loginErrorPattern:"Неверный логин",loginHint:"Ваш логин был предоставлен вам в первый день.\n    Если у вас нет этой информации, обратитесь в службу поддержки",loginPlaceholder:"Вставьте свой адрес электронной почты",passwordErrorPattern:"Неверный пароль",passwordPlaceholder:"Введите свой пароль",customFieldErrorPattern:"Неверное значение.",customFieldPlaceholder:"Пожалуйста, введите значение",rememberUser:"Автоматический вход",rememberUserHint:"Вы можете отключить эту опцию в конфигурации системы",submitLabel:"Войти",submittedLabel:"3агрузка...",forgotPassword:"Забыли пароль?",highlightInfo:"",registerUrl:"Новый регистр",titlePopover:"Ой!",forgotYourPassword:"Забыли пароль?",ifYouTryHarder:"Если вы безуспешно попытаетесь войти еще ",attempts:"{0} раз(а) ",yourUserWillBeBlocked:"Ваш пользователь будет заблокирован, и Вы останетесь на 24 часа без возможности доступа :(",createANewPasswordNow:"Лучше создайте новый пароль сейчас! Вы сможете сразу войти в систему.",iForgotMyPassword:"Я забыл свой пароль"}},Oe={en:"in",es:"en",pt:"em",ru:"в"},xe={en:"to",es:"al",pt:"ao",ru:"к"},De=function(){function e(e,o){this.loginService=e,this.router=o,this.allLoginErrors=[],this.allPasswordErrors=[],this.rememberUser=!1,this.showExceededAttemptsWarning=!1,this._authenticationType=Fe.Basic,this._hideRememberUser=!1,this._loading=!1,this._loginErrors=[],this._passwordErrors=[],this.loginChange=new t.EventEmitter,this.loginSubmit=new t.EventEmitter,this.passwordChange=new t.EventEmitter}return Object.defineProperty(e.prototype,"customField",{get:function(){return this._customField},set:function(e){if(e){if(w(e,"string"))return this.customFieldType="input",this._customField=e,void(this.customFieldObject=this.getDefaultCustomFieldObject(e));if(w(e,"object")&&!Array.isArray(e)&&e.property)return this._customField=e,this.customFieldObject=e,void(this.customFieldObject.options||this.customFieldObject.url?this.customFieldType=this.customFieldObject.options?"select":"combo":this.customFieldType="input")}this._customField=void 0,this.customFieldObject=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactEmail",{get:function(){return this._contactEmail},set:function(e){this._contactEmail=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"productName",{get:function(){return this._productName},set:function(e){this._productName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"environment",{get:function(){return this._environment},set:function(e){e&&e.length>40?this._environment=e.substring(0,40):this._environment=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceededAttemptsWarning",{get:function(){return this._exceededAttemptsWarning},set:function(e){this._exceededAttemptsWarning=function(e,t){var o=parseInt(e,10),r=parseInt(t,10);return o||0===o?o:r||0===r?r:void 0}(e),this.showExceededAttemptsWarning=this.exceededAttemptsWarning>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideRememberUser",{get:function(){return this._hideRememberUser},set:function(e){this._hideRememberUser=""===e||P(e),this._hideRememberUser&&(this.rememberUser=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"literals",{get:function(){return this._literals},set:function(e){this._literals=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loading",{get:function(){return this._loading},set:function(e){this._loading=P(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"login",{get:function(){return this._login},set:function(e){this._login=e,this.authenticationUrl||this.loginChange.emit(this._login)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loginErrors",{get:function(){return this._loginErrors},set:function(e){this._loginErrors=e||[],this.setLoginErrors(this._loginErrors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"passwordErrors",{get:function(){return this._passwordErrors},set:function(e){this._passwordErrors=e||[],this.setPasswordErrors(this._passwordErrors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"registerUrl",{get:function(){return this._registerUrl},set:function(e){this._registerUrl=w(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authenticationType",{get:function(){return this._authenticationType},set:function(e){this._authenticationType=Object.values(Fe).includes(e)?e:Fe.Basic},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authenticationUrl",{get:function(){return this._authenticationUrl},set:function(e){this._authenticationUrl=w(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockedUrl",{get:function(){return this._blockedUrl},set:function(e){this._blockedUrl=w(e,"string")?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.selectedLanguage||b()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageLoginLiterals",{get:function(){var e=this.contactEmail?this.concatenateLoginHintWithContactEmail(this.contactEmail):void 0,t=this.productName?this.concatenateTitleWithProductName(this.productName):void 0;return u({},Re.pt,Re[this.language],e,t,this.literals)},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this.loginSubscription&&this.loginSubscription.unsubscribe()},e.prototype.closePopover=function(){this.showExceededAttemptsWarning=!1},e.prototype.onLoginSubmit=function(){var e=this,t={login:this.login,password:this.password,rememberUser:this.rememberUser};this.customField&&(t[this.customFieldObject.property]=this.customFieldObject.value),this.authenticationUrl?this.loginSubscription=this.loginService.onLogin(this.authenticationUrl,this.authenticationType,t).subscribe((function(t){e.setValuesToProperties(),sessionStorage.setItem("PO_USER_LOGIN",JSON.stringify(t)),e.openInternalLink("/")}),(function(t){"400"!==t.error.code&&"401"!==t.error.code||(e.setValuesToProperties(t),e.redirectBlockedUrl(e.exceededAttemptsWarning,e.blockedUrl))})):(this.loginSubmit.emit(t),this.showExceededAttemptsWarning=this.exceededAttemptsWarning>0)},e.prototype.getDefaultCustomFieldObject=function(e){return{property:e}},e.prototype.openExternalLink=function(e){window.open(e,"_blank")},e.prototype.openInternalLink=function(e){this.router.navigate([e])},e.prototype.redirectBlockedUrl=function(e,t){0===e&&t&&(this.showExceededAttemptsWarning=!1,k(t)?this.openExternalLink(t):this.openInternalLink(t))},e.prototype.setValuesToProperties=function(e){e?(this.exceededAttemptsWarning=e.error.maxAttemptsRemaining,this.loginErrors=e.error.loginWarnings,this.passwordErrors=e.error.passwordWarnings,this.blockedUrl=e.error.blockedUrl):(this.exceededAttemptsWarning=0,this.loginErrors=[],this.passwordErrors=[],this.blockedUrl="")},e.propDecorators={customField:[{type:t.Input,args:["p-custom-field"]}],background:[{type:t.Input,args:["p-background"]}],contactEmail:[{type:t.Input,args:["p-contact-email"]}],productName:[{type:t.Input,args:["p-product-name"]}],environment:[{type:t.Input,args:["p-environment"]}],exceededAttemptsWarning:[{type:t.Input,args:["p-exceeded-attempts-warning"]}],hideRememberUser:[{type:t.Input,args:["p-hide-remember-user"]}],literals:[{type:t.Input,args:["p-literals"]}],loading:[{type:t.Input,args:["p-loading"]}],login:[{type:t.Input,args:["p-login"]}],logo:[{type:t.Input,args:["p-logo"]}],loginPattern:[{type:t.Input,args:["p-login-pattern"]}],loginErrors:[{type:t.Input,args:["p-login-errors"]}],passwordErrors:[{type:t.Input,args:["p-password-errors"]}],passwordPattern:[{type:t.Input,args:["p-password-pattern"]}],recovery:[{type:t.Input,args:["p-recovery"]}],registerUrl:[{type:t.Input,args:["p-register-url"]}],secondaryLogo:[{type:t.Input,args:["p-secondary-logo"]}],authenticationType:[{type:t.Input,args:["p-authentication-type"]}],authenticationUrl:[{type:t.Input,args:["p-authentication-url"]}],blockedUrl:[{type:t.Input,args:["p-blocked-url"]}],loginChange:[{type:t.Output,args:["p-login-change"]}],loginSubmit:[{type:t.Output,args:["p-login-submit"]}],passwordChange:[{type:t.Output,args:["p-password-change"]}]},e}();var Le=function(){function e(e){this.http=e}return e.prototype.onLogin=function(e,t,o){if(t===Fe.Bearer)return o.password=btoa(o.password),this.http.post(e,o);var r="("+o.login+":"+o.password+")",n=new s.HttpHeaders({Authorization:t+" "+btoa(r)});return delete o.login,delete o.password,this.http.post(e,o,{headers:n})},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e}();var Te=function(e){function o(t,o,r,n,i,s){var a=e.call(this,i,s)||this;return a.changeDetector=t,a.activatedRoute=o,a.poComponentInjector=r,a.componentRef=null,a.customPasswordError={custom:!1},a.differ=n.find([]).create(null),a}return l(o,e),o.prototype.ngAfterViewChecked=function(){this.differ&&this.validateArrayChanges(this.differ,[{array:this.loginErrors,callback:this.generateLoginError.bind(this)},{array:this.passwordErrors,callback:this.generatePasswordError.bind(this)}])},o.prototype.ngOnInit=function(){this.checkingForRouteMetadata(this.activatedRoute.snapshot.data)},o.prototype.changeLoginModel=function(){this.authenticationUrl?this.loginErrors=[]:(this.setLoginErrors(this.loginErrors),this.loginChange.emit(this.login))},o.prototype.changePasswordModel=function(){this.authenticationUrl?this.passwordErrors=[]:(this.setPasswordErrors(this.passwordErrors),this.passwordChange.emit(this.password))},o.prototype.onSelectedLanguage=function(e){this.selectedLanguage=e},o.prototype.openUrl=function(e){switch(typeof e){case"string":this.setUrlRedirect(e);break;case"function":e();break;case"object":this.createModalPasswordRecoveryComponent(e)}},o.prototype.checkingForMetadataProperty=function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]},o.prototype.checkingForRouteMetadata=function(e){0!==Object.keys(e).length&&(this.authenticationUrl=this.checkingForMetadataProperty(e,"serviceApi")||this.authenticationUrl,this.authenticationType=this.checkingForMetadataProperty(e,"authenticationType")||this.authenticationType,this.environment=this.checkingForMetadataProperty(e,"environment")||this.environment,this.recovery=this.checkingForMetadataProperty(e,"recovery")||this.recovery,this.registerUrl=this.checkingForMetadataProperty(e,"registerUrl")||this.registerUrl)},o.prototype.concatenate=function(e,t,o){return e+" "+t+" "+o},o.prototype.concatenateLiteral=function(e,t,o,r){var n;return(n={})[t]=this.concatenate(o,r,e),n},o.prototype.createModalPasswordRecoveryComponent=function(e){var t=this;this.componentRef&&this.poComponentInjector.destroyComponentInApplication(this.componentRef),this.componentRef=this.poComponentInjector.createComponentInApplication(x),this.componentRef.instance.urlRecovery=e.url,this.componentRef.instance.contactEmail=e.contactMail,this.componentRef.instance.phoneMask=e.phoneMask,this.componentRef.instance.type=e.type||I.Email,this.componentRef.changeDetectorRef.detectChanges(),setTimeout((function(){t.componentRef.instance.open()}))},o.prototype.generateLoginError=function(){if(this.loginErrors&&this.loginErrors.length)this.setLoginErrors(this.loginErrors);else{var e=this.loginForm.form.controls.login;e&&this.resetControl(e)}},o.prototype.generatePasswordError=function(){if(this.passwordErrors&&this.passwordErrors.length)this.setPasswordErrors(this.passwordErrors);else{var e=this.loginForm.form.controls.password;e&&this.resetControl(e)}},o.prototype.resetControl=function(e){e.markAsPristine(),e.markAsUntouched(),e.updateValueAndValidity()},o.prototype.setControlErrors=function(e,t,o,r){t&&(this[e]=t.hasError("pattern")?g(o,[r]):g(o),o&&o.length&&(t.valid||t.pristine)&&(t.markAsTouched(),t.markAsDirty(),t.setErrors(this.customPasswordError)))},o.prototype.setUrlRedirect=function(e){k(e)?window.open(e,"_blank"):this.router.navigate([e])},o.prototype.validateArrayChanges=function(e,t){var o=this;t.forEach((function(t){e.diff(t.array)&&(t.callback(),o.changeDetector.detectChanges())}))},o.prototype.concatenateLoginHintWithContactEmail=function(e){var t=Re[this.language].loginHint,o=Oe[this.language];return this.concatenateLiteral(e,"loginHint",t,o)},o.prototype.concatenateTitleWithProductName=function(e){var t=Re[this.language].title,o=xe[this.language];return this.concatenateLiteral(e,"title",t,o)},o.prototype.setLoginErrors=function(e){var t=this.loginForm.form.controls.login;this.setControlErrors("allLoginErrors",t,e,this.pageLoginLiterals.loginErrorPattern)},o.prototype.setPasswordErrors=function(e){var t=this.loginForm.form.controls.password;this.setControlErrors("allPasswordErrors",t,e,this.pageLoginLiterals.passwordErrorPattern)},o.decorators=[{type:t.Component,args:[{selector:"po-page-login",template:'<po-page-background #pageLogin\n  p-show-select-language\n  [p-background]="background"\n  [p-highlight-info]="pageLoginLiterals.highlightInfo"\n  [p-logo]="logo"\n  [p-secondary-logo]="secondaryLogo"\n  (p-selected-language)="onSelectedLanguage($event)">\n\n  <div class="po-page-login-header po-mb-2 po-mb-sm-1 po-pt-sm-1">\n    <div class="po-page-login-header-title po-mb-sm-1">{{ pageLoginLiterals.title }}</div>\n    <po-tag\n      *ngIf="environment"\n      p-type="warning"\n      [p-value]="environment">\n    </po-tag>\n  </div>\n\n  <form #loginForm="ngForm" class="po-page-login-form">\n    <div class="po-row">\n      <div class="po-lg-12">\n        <div class="po-page-login-hint po-page-login-info-container">\n          <po-login\n            class="po-page-login-info-field"\n            name="login"\n            [(ngModel)]="login"\n            p-auto-focus\n            p-required\n            [p-label]="pageLoginLiterals.loginLabel"\n            [p-pattern]="loginPattern"\n            [p-placeholder]="pageLoginLiterals.loginPlaceholder"\n            (click)="closePopover()"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()"\n            (p-change-model)="changeLoginModel()">\n          </po-login>\n\n          <div class="po-page-login-info-icon-container">\n            <span\n              class="po-icon po-field-icon po-icon-info"\n              p-tooltip-position="right"\n              [p-tooltip]="pageLoginLiterals.loginHint">\n            </span>\n          </div>\n        </div>\n\n        <div class="po-field-container-bottom po-field-container-error-container">\n          <div *ngFor="let error of allLoginErrors" class="po-field-container-bottom-text-error po-field-container-error-item">\n            <span class="po-icon po-icon-exclamation"></span>\n            <span class="po-field-container-error-text">{{error}}</span>\n          </div>\n        </div>\n      </div>\n\n      <div class="po-lg-12">\n        <div class="po-page-login-password-container">\n          <po-password\n            class="po-page-login-field-size po-page-login-password-item"\n            name="password"\n            [(ngModel)]="password"\n            p-required\n            [p-label]="pageLoginLiterals.passwordLabel"\n            [p-pattern]="passwordPattern"\n            [p-placeholder]="pageLoginLiterals.passwordPlaceholder"\n            (click)="closePopover()"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()"\n            (p-change-model)="changePasswordModel()">\n          </po-password>\n          <div class="po-page-login-password-item po-page-login-password-popover-container">\n            <po-page-login-popover *ngIf="showExceededAttemptsWarning && exceededAttemptsWarning"\n              [p-literals]="pageLoginLiterals"\n              [p-recovery]="recovery"\n              [p-remaining-attempts]="exceededAttemptsWarning"\n              (p-forgot-password) = "openUrl($event)">\n            </po-page-login-popover>\n          </div>\n        </div>\n        <div class="po-field-container-bottom po-field-container-error-container">\n          <div *ngFor="let error of allPasswordErrors" class="po-field-container-bottom-text-error po-field-container-error-item">\n            <span class="po-icon po-icon-exclamation"></span>\n            <span class="po-field-container-error-text">{{error}}</span>\n          </div>\n        </div>\n      </div>\n\n      <po-input *ngIf="customField && customFieldType === \'input\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldInput"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-error-pattern]="customFieldObject.errorPattern || pageLoginLiterals.customFieldErrorPattern"\n        [p-pattern]="customFieldObject.pattern"\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder"\n        (keyup.enter)="loginForm.valid && onLoginSubmit()">\n      </po-input>\n\n      <po-combo *ngIf="customField && customFieldType === \'combo\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldCombo"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-field-value]="customFieldObject.fieldValue"\n        [p-filter-service]="customFieldObject.url"\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder">\n      </po-combo>\n\n      <po-select *ngIf="customField && customFieldType === \'select\'"\n        class="po-page-login-field-size po-lg-12"\n        name="customFieldSelect"\n        [(ngModel)]="customFieldObject.value"\n        p-required\n        [p-placeholder]="customFieldObject.placeholder || pageLoginLiterals.customFieldPlaceholder"\n        [p-options]="customFieldObject.options">\n      </po-select>\n\n      <div class="po-lg-12">\n        <div *ngIf="!hideRememberUser" class="po-page-login-hint po-page-login-info-container">\n          <po-switch\n            class="po-page-login-info-field po-lg-7 po-offset-lg-5 po-offset-xl-5"\n            name="rememberUser"\n            [(ngModel)]="rememberUser"\n            p-label-position="1"\n            [p-label-off]="pageLoginLiterals.rememberUser"\n            [p-label-on]="pageLoginLiterals.rememberUser"\n            (keyup.enter)="loginForm.valid && onLoginSubmit()">\n          </po-switch>\n\n          <div class="po-page-login-info-icon-container po-page-login-info-icon-remember-user">\n            <span\n              class="po-icon po-field-icon po-icon-info"\n              p-tooltip-position="right"\n              [p-tooltip]="pageLoginLiterals.rememberUserHint">\n            </span>\n          </div>\n        </div>\n      </div>\n\n\n      <po-button\n        class="po-lg-12 po-page-login-button po-page-login-field-size"\n        p-type="primary"\n        [p-disabled]="loginForm.invalid"\n        [p-label]="loading ? pageLoginLiterals.submittedLabel : pageLoginLiterals.submitLabel"\n        [p-loading]="loading"\n        (p-click)="onLoginSubmit()">\n      </po-button>\n\n      <div *ngIf="recovery"\n        class="po-page-login-recovery-link">\n        <a class="po-font-text-large-bold" (click)="openUrl(recovery)">{{ pageLoginLiterals.forgotPassword }}</a>\n      </div>\n\n      <div *ngIf="registerUrl"\n        class="po-page-login-register-link">\n        <a class="po-font-text-large-bold" (click)="openUrl(registerUrl)">{{ pageLoginLiterals.registerUrl }}</a>\n      </div>\n    </div>\n  </form>\n</po-page-background>\n'}]}],o.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:i.ActivatedRoute},{type:n.PoComponentInjectorService},{type:t.IterableDiffers},{type:Le},{type:i.Router}]},o.propDecorators={loginForm:[{type:t.ViewChild,args:["loginForm",{read:r.NgForm,static:!0}]}],pageLogin:[{type:t.ViewChild,args:["pageLogin",{read:t.ViewContainerRef,static:!0}]}]},o}(De);var Ne=function(){function e(){this.forgotPassword=new t.EventEmitter}return Object.defineProperty(e.prototype,"recovery",{get:function(){return this._recovery},set:function(e){this._recovery=e,w(e,"string")&&(this.recoveryType=k(e)?"externalLink":"internalLink")},enumerable:!0,configurable:!0}),e.prototype.onForgotPasswordClick=function(e){this.forgotPassword.emit(e)},e.decorators=[{type:t.Component,args:[{selector:"po-page-login-popover",template:'<div class="po-page-login-popover-container">\n  <div class="po-page-login-popover">\n    <div class="po-page-login-popover-arrow"></div>\n    <div class="po-page-login-popover-content">\n      <p class="po-font-text-bold po-page-login-popover-title">\n        {{ literals?.titlePopover }}\n      </p>\n      <p class="po-font-text">\n        {{ literals?.forgotYourPassword }}\n      </p>\n      <p class="po-font-text">\n        {{ literals?.ifYouTryHarder }}\n        <span class="po-font-text-bold po-page-login-popover-attempts">\n          {{ literals?.attempts | poI18n:remainingAttempts }}\n        </span>{{ literals?.yourUserWillBeBlocked }}\n      </p>\n      <br>\n      <p class="po-font-text">\n        {{ literals?.createANewPasswordNow }}\n      </p>\n      <div *ngIf="recovery" class="po-font-text-bold po-mt-1 po-page-login-popover-link-container">\n        <a *ngIf="recoveryType === \'internalLink\'"\n          class="po-page-login-popover-link"\n          [routerLink]="recovery">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n        <a *ngIf="recoveryType === \'externalLink\'"\n          class="po-page-login-popover-link"\n          [href]="recovery"\n          target="_blank">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n        <a *ngIf="!recoveryType"\n          class="po-page-login-popover-link"\n          (click)="onForgotPasswordClick(recovery)">\n          {{ literals?.iForgotMyPassword }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n'}]}],e.propDecorators={literals:[{type:t.Input,args:["p-literals"]}],recovery:[{type:t.Input,args:["p-recovery"]}],remainingAttempts:[{type:t.Input,args:["p-remaining-attempts"]}],forgotPassword:[{type:t.Output,args:["p-forgot-password"]}]},e}();var _e=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,r.FormsModule,i.RouterModule,N,n.PoModule],declarations:[Te,Ne],entryComponents:[x],exports:[Te],providers:[Le]}]}],e}(),je=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[L,N,J,Q,oe,ie,me,ve,Me,_e],exports:[L,N,J,Q,oe,ie,me,ve,Me,_e]}]}],e}(),qe=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[ae,te],exports:[ae,te]}]}],e}(),Be=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[je,qe],exports:[je,qe]}]}],e}();e.PoComponentsModule=je,e.PoModalPasswordRecoveryComponent=x,e.PoModalPasswordRecoveryModalContent=R,e.PoModalPasswordRecoveryModule=L,e.PoModalPasswordRecoveryType=I,e.PoPageBackgroundComponent=T,e.PoPageBackgroundModule=N,e.PoPageBlockedUserComponent=V,e.PoPageBlockedUserModule=J,e.PoPageBlockedUserReason=_,e.PoPageChangePasswordComponent=$,e.PoPageChangePasswordModule=Q,e.PoPageCustomizationModule=ae,e.PoPageCustomizationService=se,e.PoPageDynamicDetailComponent=ee,e.PoPageDynamicDetailModule=oe,e.PoPageDynamicEditComponent=ne,e.PoPageDynamicEditModule=ie,e.PoPageDynamicModule=te,e.PoPageDynamicSearchComponent=he,e.PoPageDynamicSearchModule=me,e.PoPageDynamicService=X,e.PoPageDynamicTableComponent=ye,e.PoPageDynamicTableModule=ve,e.PoPageJobSchedulerComponent=Ce,e.PoPageJobSchedulerModule=Me,e.PoPageLoginAuthenticationType=Fe,e.PoPageLoginComponent=Te,e.PoPageLoginModule=_e,e.PoServicesModule=qe,e.PoTemplatesModule=Be,e.poModalPasswordRecoveryLiterals=E,e.poPageBlockedUserButtonLiterals=U,e.poPageBlockedUserLiterals=W,e.poPageChangePasswordLiterals=Y,e.poPageDynamicDetailLiteralsDefault=Z,e.poPageDynamicEditLiteralsDefault=re,e.poPageDynamicTableLiteralsDefault=fe,e.ɵa=F,e.ɵb=O,e.ɵc=D,e.ɵd=B,e.ɵe=H,e.ɵf=z,e.ɵg=G,e.ɵh=K,e.ɵi=le,e.ɵj=pe,e.ɵk=de,e.ɵl=ge,e.ɵm=Pe,e.ɵn=ke,e.ɵo=Se,e.ɵp=Ae,e.ɵq=Ee,e.ɵr=Ie,e.ɵs=De,e.ɵt=Le,e.ɵu=Ne,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=portinari-portinari-templates.umd.min.js.map