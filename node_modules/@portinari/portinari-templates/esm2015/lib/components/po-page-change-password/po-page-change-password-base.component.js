/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter, Input, Output } from '@angular/core';
import { convertToBoolean, isExternalLink, isTypeof } from '../../utils/util';
/**
 * \@description
 *
 * O componente `po-page-change-password` é utilizado como template para tela de cadastro ou alteração de senha.
 *
 * Apresenta dicas e regras para senhas mais seguras e também possibilidade de personalizar o redirecionamento para as telas
 * 'esqueceu a senha', 'voltar' e 'entrar no sistema'. Os textos das telas são pré-definidos e imutáveis.
 *
 * A propriedade `p-url-new-password` automatiza a rotina do template e simplifica o processo de cadastro/alteração de senha, bastando
 * definir uma url para POST das informações digitadas pelo usuário.  A flexibilidade e praticidade podem chegar a um nível em que o
 * desenvolvimento da aplicação no *client side* é desprovida de qualquer código-fonte relacionado à rotina de cadastro/alteração de senha.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/\@portinari/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 * @abstract
 */
export class PoPageChangePasswordBaseComponent {
    constructor() {
        this._hideCurrentPassword = false;
        this._requirements = [];
        this._urlHome = '/';
        /**
         * \@optional
         *
         * \@description
         *
         * URL para a ação de retorno da página.
         *
         * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `p-hide-current-password` for
         * falsa.
         *
         * \@default `/`
         */
        this.urlBack = '/';
        /**
         * \@optional
         *
         * \@description
         *
         * Função executada ao submeter o form pelo botão salvar.
         *
         * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
         * método `openConfirmation`. Exemplo:
         *
         * ```
         * \@ViewChild(PoPageChangePasswordComponent) changePassword: PoPageChangePasswordComponent;
         *
         * onSubmit() {
         *  this.changePassword.openConfirmation();
         * }
         *
         * ```
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-new-password`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Esconde o campo `Senha atual` para que o template seja para criação de senha.
     *
     * \@default `false`
     * @param {?} value
     * @return {?}
     */
    set hideCurrentPassword(value) {
        this._hideCurrentPassword = convertToBoolean(value);
    }
    /**
     * @return {?}
     */
    get hideCurrentPassword() {
        return this._hideCurrentPassword;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação do link `Esqueceu a senha`.
     *
     * A propriedade aceita os seguintes tipos:
     *
     * - **String**: informe uma url externa ou uma rota válida;
     * - **Function**: pode-se customizar a ação. Para esta possilidade basta atribuir:
     * ```
     * <po-page-change-password>
     *      [recovery]="this.myFunc.bind(this)";
     * </po-page-change-password>
     * ```
     *
     * - **PoPageChangePasswordRecovery**: cria-se vínculo automático com o template **po-modal-password-recovery**.
     *   O objeto deve conter a **url** para requisição dos recursos e pode-se definir o **tipo** de modal para recuperação de senha,
     *   **email** para contato e **máscara** do campo de telefone.
     *
     * > Caso não tenha valor o link `Esqueceu a senha` desaparece.
     * @param {?} value
     * @return {?}
     */
    set recovery(value) {
        this._recovery = value;
        if (isTypeof(value, 'string')) {
            this.recoveryUrlType = isExternalLink(value) ? 'externalLink' : 'internalLink';
        }
    }
    /**
     * @return {?}
     */
    get recovery() {
        return this._recovery;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Lista de regras para criação e alteração de senha.
     * @param {?} value
     * @return {?}
     */
    set requirements(value) {
        this._requirements = value || [];
        this.showRequirements = this._requirements.length > 0;
    }
    /**
     * @return {?}
     */
    get requirements() {
        return this._requirements;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação do botão `Entrar no sistema` da modal de confirmação que aparece após salvar a senha ou se chamada pelo método
     * `openConfirmation`.
     *
     * \@default `/`
     * @param {?} value
     * @return {?}
     */
    set urlHome(value) {
        this._urlHome = value;
        this.modalAction.action = this.navigateTo.bind(this, this.urlHome);
    }
    /**
     * @return {?}
     */
    get urlHome() {
        return this._urlHome;
    }
}
PoPageChangePasswordBaseComponent.propDecorators = {
    hideCurrentPassword: [{ type: Input, args: ['p-hide-current-password',] }],
    logo: [{ type: Input, args: ['p-logo',] }],
    recovery: [{ type: Input, args: ['p-recovery',] }],
    requirements: [{ type: Input, args: ['p-requirements',] }],
    secondaryLogo: [{ type: Input, args: ['p-secondary-logo',] }],
    token: [{ type: Input, args: ['p-token',] }],
    urlBack: [{ type: Input, args: ['p-url-back',] }],
    urlNewPassword: [{ type: Input, args: ['p-url-new-password',] }],
    urlHome: [{ type: Input, args: ['p-url-home',] }],
    submit: [{ type: Output, args: ['p-submit',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    PoPageChangePasswordBaseComponent.prototype._hideCurrentPassword;
    /**
     * @type {?}
     * @private
     */
    PoPageChangePasswordBaseComponent.prototype._recovery;
    /**
     * @type {?}
     * @private
     */
    PoPageChangePasswordBaseComponent.prototype._requirements;
    /**
     * @type {?}
     * @private
     */
    PoPageChangePasswordBaseComponent.prototype._urlHome;
    /**
     * @type {?}
     * @protected
     */
    PoPageChangePasswordBaseComponent.prototype.validatorChange;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.confirmPassword;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.currentPassword;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.modalAction;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.newPassword;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.recoveryUrlType;
    /** @type {?} */
    PoPageChangePasswordBaseComponent.prototype.showRequirements;
    /**
     * \@optional
     *
     * \@description
     *
     * Caminho para a logomarca localizada na parte superior.
     *
     * > Caso seja indefinida o espaço se mantém preservado porém vazio.
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.logo;
    /**
     * \@optional
     *
     * \@description
     *
     * Caminho para a logomarca localizada no rodapé.
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.secondaryLogo;
    /**
     * Token para solicitação de troca/recuperação de senha.
     *
     * > Esta propriedade será ignorada caso exista um token como parâmetro na URL inicial do template.
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.token;
    /**
     * \@optional
     *
     * \@description
     *
     * URL para a ação de retorno da página.
     *
     * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `p-hide-current-password` for
     * falsa.
     *
     * \@default `/`
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.urlBack;
    /**
     * Endpoint usado pelo template para realizar um POST. Quando preenchido, o método `p-submit` será ignorado e o componente adquirirá
     * automatização para o processo de cadastro/troca de senha.
     *
     * ### Processo
     * Ao digitar um valor válido nos campos de senha e pressionar **salvar**,
     * o componente fará uma requisição `POST` na url especificada nesta propriedade passando o objeto contendo os valores definidos pelo
     * usuário.
     *
     * ```
     * body {
     *  token?: token,
     *  oldPassword?: oldPassword,
     *  newPassword: newPassword
     * }
     * ```
     *
     * O código de resposta HTTP de status esperado é `204`.
     *
     * Em caso de **sucesso**, será exibida a modal de confirmação de senha alterada.
     *
     * > O token será informado pela propriedade `p-token`do componente ou por um *query parameter* na URL do template.
     *
     * *Processo finalizado.*
     *
     * _______________
     *
     * #### Praticidade
     * As informações do serviço de autenticação também podem ser transmitidas diretamente pelas configuraçãos de rota e, desta maneira,
     * dispensa-se qualquer menção e/ou importação do componente `po-page-change-password` no restante da aplicação. O exemplo abaixo
     * exemplifica a forma dinâmica com a qual o template de tela de troca de senha pode ser gerado ao navegar para rota `/change-password`, e
     * também como ele se comunica com o serviço para efetuação do processo de troca de senha do usuário e solicitação de nova senha.
     * Basta definir nas configurações de rota:
     *
     *
     * ```
     *   import { PoModalPasswordRecoveryType, PoPageChangePasswordComponent } from '\@portinari/portinari-templates';
     *
     *   ...
     *   const routes: Routes = [
     *     {
     *       path: 'change-password', component: PoPageChangePasswordComponent, data: {
     *         serviceApi: 'https://portinari.io/sample/api/new-password',
     *         recovery: {
     *           url: 'https://portinari.io/sample/api/users',
     *           type: PoModalPasswordRecoveryType.All,
     *           contactMail: 'dev.portinari\@portinari.com',
     *           phoneMask: '9-999-999-9999'
     *         }
     *       }
     *     }
     *     ...
     *   ];
     *
     * \@NgModule({
     *     imports: [RouterModule.forRoot(routes)],
     *     exports: [RouterModule]
     *   })
     *   export class AppRoutingModule { }
     * ```
     *
     *
     * O metadado `serviceApi` deve ser a **url** para requisição dos recursos de troca de senha. E `recovery` é a interface
     * `PoPageChangePasswordRecovery` responsável pelas especificações contidas na modal de recuperação de senha.
     *
     * > É essencial que siga a nomenclatura dos atributos exemplificados acima para sua efetiva funcionalidade.
     *
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.urlNewPassword;
    /**
     * \@optional
     *
     * \@description
     *
     * Função executada ao submeter o form pelo botão salvar.
     *
     * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
     * método `openConfirmation`. Exemplo:
     *
     * ```
     * \@ViewChild(PoPageChangePasswordComponent) changePassword: PoPageChangePasswordComponent;
     *
     * onSubmit() {
     *  this.changePassword.openConfirmation();
     * }
     *
     * ```
     * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-new-password`.
     * @type {?}
     */
    PoPageChangePasswordBaseComponent.prototype.submit;
    /**
     * @abstract
     * @param {?} url
     * @return {?}
     */
    PoPageChangePasswordBaseComponent.prototype.navigateTo = function (url) { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wby1wYWdlLWNoYW5nZS1wYXNzd29yZC9wby1wYWdlLWNoYW5nZS1wYXNzd29yZC1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBSTVELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQWlDOUUsTUFBTSxPQUFnQixpQ0FBaUM7SUFBdkQ7UUFFVSx5QkFBb0IsR0FBWSxLQUFLLENBQUM7UUFFdEMsa0JBQWEsR0FBMkMsRUFBRSxDQUFDO1FBQzNELGFBQVEsR0FBVyxHQUFHLENBQUM7Ozs7Ozs7Ozs7Ozs7UUFvSFYsWUFBTyxHQUFXLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1FBOEd2QixXQUFNLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7SUFJckUsQ0FBQzs7Ozs7Ozs7Ozs7O0lBbk5DLElBQXNDLG1CQUFtQixDQUFDLEtBQWM7UUFDdEUsSUFBSSxDQUFDLG9CQUFvQixHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3RELENBQUM7Ozs7SUFFRCxJQUFJLG1CQUFtQjtRQUNyQixPQUFPLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztJQUNuQyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQW9DRCxJQUF5QixRQUFRLENBQUMsS0FBdUQ7UUFDdkYsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFFdkIsSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxFQUFFO1lBQzdCLElBQUksQ0FBQyxlQUFlLEdBQUcsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQztTQUNoRjtJQUNILENBQUM7Ozs7SUFFRCxJQUFJLFFBQVE7UUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQzs7Ozs7Ozs7OztJQVNELElBQTZCLFlBQVksQ0FBQyxLQUE2QztRQUNyRixJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUN4RCxDQUFDOzs7O0lBQ0QsSUFBSSxZQUFZO1FBQ2QsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzVCLENBQUM7Ozs7Ozs7Ozs7Ozs7SUFnSEQsSUFBeUIsT0FBTyxDQUFDLEtBQWE7UUFDNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDdEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyRSxDQUFDOzs7O0lBQ0QsSUFBSSxPQUFPO1FBQ1QsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCLENBQUM7OztrQ0F6TEEsS0FBSyxTQUFDLHlCQUF5QjttQkFpQi9CLEtBQUssU0FBQyxRQUFRO3VCQXlCZCxLQUFLLFNBQUMsWUFBWTsyQkFtQmxCLEtBQUssU0FBQyxnQkFBZ0I7NEJBZXRCLEtBQUssU0FBQyxrQkFBa0I7b0JBT3hCLEtBQUssU0FBQyxTQUFTO3NCQWNmLEtBQUssU0FBQyxZQUFZOzZCQXNFbEIsS0FBSyxTQUFDLG9CQUFvQjtzQkFZMUIsS0FBSyxTQUFDLFlBQVk7cUJBNEJsQixNQUFNLFNBQUMsVUFBVTs7Ozs7OztJQXJPbEIsaUVBQThDOzs7OztJQUM5QyxzREFBb0U7Ozs7O0lBQ3BFLDBEQUFtRTs7Ozs7SUFDbkUscURBQStCOzs7OztJQUMvQiw0REFBK0I7O0lBRS9CLDREQUF3Qjs7SUFDeEIsNERBQXdCOztJQUN4Qix3REFBMkI7O0lBQzNCLHdEQUFvQjs7SUFDcEIsNERBQXdCOztJQUN4Qiw2REFBMEI7Ozs7Ozs7Ozs7O0lBNEIxQixpREFBK0I7Ozs7Ozs7OztJQTJEL0IsMERBQWtEOzs7Ozs7O0lBT2xELGtEQUFpQzs7Ozs7Ozs7Ozs7Ozs7SUFjakMsb0RBQTJDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBc0UzQywyREFBcUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUF3Q3JELG1EQUFtRTs7Ozs7O0lBRW5FLDRFQUF1QyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgUG9Nb2RhbEFjdGlvbiB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcclxuXHJcbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xlYW4sIGlzRXh0ZXJuYWxMaW5rLCBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xyXG5cclxuaW1wb3J0IHsgUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1wYWdlLWNoYW5nZS1wYXNzd29yZC1yZWNvdmVyeS5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLXJlcXVpcmVtZW50LmludGVyZmFjZSc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIE8gY29tcG9uZW50ZSBgcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmRgIMOpIHV0aWxpemFkbyBjb21vIHRlbXBsYXRlIHBhcmEgdGVsYSBkZSBjYWRhc3RybyBvdSBhbHRlcmHDp8OjbyBkZSBzZW5oYS5cclxuICpcclxuICogQXByZXNlbnRhIGRpY2FzIGUgcmVncmFzIHBhcmEgc2VuaGFzIG1haXMgc2VndXJhcyBlIHRhbWLDqW0gcG9zc2liaWxpZGFkZSBkZSBwZXJzb25hbGl6YXIgbyByZWRpcmVjaW9uYW1lbnRvIHBhcmEgYXMgdGVsYXNcclxuICogJ2VzcXVlY2V1IGEgc2VuaGEnLCAndm9sdGFyJyBlICdlbnRyYXIgbm8gc2lzdGVtYScuIE9zIHRleHRvcyBkYXMgdGVsYXMgc8OjbyBwcsOpLWRlZmluaWRvcyBlIGltdXTDoXZlaXMuXHJcbiAqXHJcbiAqIEEgcHJvcHJpZWRhZGUgYHAtdXJsLW5ldy1wYXNzd29yZGAgYXV0b21hdGl6YSBhIHJvdGluYSBkbyB0ZW1wbGF0ZSBlIHNpbXBsaWZpY2EgbyBwcm9jZXNzbyBkZSBjYWRhc3Ryby9hbHRlcmHDp8OjbyBkZSBzZW5oYSwgYmFzdGFuZG9cclxuICogZGVmaW5pciB1bWEgdXJsIHBhcmEgUE9TVCBkYXMgaW5mb3JtYcOnw7VlcyBkaWdpdGFkYXMgcGVsbyB1c3XDoXJpby4gIEEgZmxleGliaWxpZGFkZSBlIHByYXRpY2lkYWRlIHBvZGVtIGNoZWdhciBhIHVtIG7DrXZlbCBlbSBxdWUgb1xyXG4gKiBkZXNlbnZvbHZpbWVudG8gZGEgYXBsaWNhw6fDo28gbm8gKmNsaWVudCBzaWRlKiDDqSBkZXNwcm92aWRhIGRlIHF1YWxxdWVyIGPDs2RpZ28tZm9udGUgcmVsYWNpb25hZG8gw6Agcm90aW5hIGRlIGNhZGFzdHJvL2FsdGVyYcOnw6NvIGRlIHNlbmhhLlxyXG4gKiBTZXUgZGV0YWxoYW1lbnRvIHBhcmEgdXNvIHBvZGUgc2VyIHZpc3RvIGxvZ28gYWJhaXhvIGVtICpwcm9wcmllZGFkZXMqLlxyXG4gKiBDYXNvIGp1bGd1ZSBuZWNlc3PDoXJpbywgcG9kZS1zZSB0YW1iw6ltIGRlZmluaXIgbWFudWFsbWVudGUgYSByb3RpbmEgZG8gY29tcG9uZW50ZS5cclxuICpcclxuICogUGFyYSBxdWUgYXMgaW1hZ2VucyBzZWphbSBleGliaWRhcyBjb3JyZXRhbWVudGUsIMOpIG5lY2Vzc8OhcmlvIGluY2x1aXIgbyBjYW1pbmhvIGRlbGFzIGFvIHByb2pldG8uIFBhcmEgaXNzbywgZWRpdGVcclxuICogbyAqYXNzZXRzKiBubyBhcnF1aXZvICoqYW5ndWxhci5qc29uKiogZGEgYXBsaWNhw6fDo28gbmEgc2VndWludGUgb3JkZW06XHJcbiAqIGBgYFxyXG4gKiAgIFwiYXNzZXRzXCI6IFtcclxuICogICAgIFwic3JjL2Fzc2V0c1wiLFxyXG4gKiAgICAgXCJzcmMvZmF2aWNvbi5pY29cIixcclxuICogICAgIHtcclxuICogICAgICAgXCJnbG9iXCI6IFwiKipcXC8qXCIsXHJcbiAqICAgICAgIFwiaW5wdXRcIjogXCJub2RlX21vZHVsZXMvQHBvcnRpbmFyaS9zdHlsZS9pbWFnZXNcIixcclxuICogICAgICAgXCJvdXRwdXRcIjogXCJhc3NldHMvaW1hZ2VzXCJcclxuICogICAgIH1cclxuICogICBdXHJcbiAqIGBgYFxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvUGFnZUNoYW5nZVBhc3N3b3JkQmFzZUNvbXBvbmVudCB7XHJcblxyXG4gIHByaXZhdGUgX2hpZGVDdXJyZW50UGFzc3dvcmQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBwcml2YXRlIF9yZWNvdmVyeTogc3RyaW5nIHwgUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSB8IEZ1bmN0aW9uO1xyXG4gIHByaXZhdGUgX3JlcXVpcmVtZW50czogQXJyYXk8UG9QYWdlQ2hhbmdlUGFzc3dvcmRSZXF1aXJlbWVudD4gPSBbXTtcclxuICBwcml2YXRlIF91cmxIb21lOiBzdHJpbmcgPSAnLyc7XHJcbiAgcHJvdGVjdGVkIHZhbGlkYXRvckNoYW5nZTogYW55O1xyXG5cclxuICBjb25maXJtUGFzc3dvcmQ6IHN0cmluZztcclxuICBjdXJyZW50UGFzc3dvcmQ6IHN0cmluZztcclxuICBtb2RhbEFjdGlvbjogUG9Nb2RhbEFjdGlvbjtcclxuICBuZXdQYXNzd29yZDogc3RyaW5nO1xyXG4gIHJlY292ZXJ5VXJsVHlwZTogc3RyaW5nO1xyXG4gIHNob3dSZXF1aXJlbWVudHM6IGJvb2xlYW47XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBFc2NvbmRlIG8gY2FtcG8gYFNlbmhhIGF0dWFsYCBwYXJhIHF1ZSBvIHRlbXBsYXRlIHNlamEgcGFyYSBjcmlhw6fDo28gZGUgc2VuaGEuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXHJcbiAgICovXHJcbiAgQElucHV0KCdwLWhpZGUtY3VycmVudC1wYXNzd29yZCcpIHNldCBoaWRlQ3VycmVudFBhc3N3b3JkKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9oaWRlQ3VycmVudFBhc3N3b3JkID0gY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXQgaGlkZUN1cnJlbnRQYXNzd29yZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9oaWRlQ3VycmVudFBhc3N3b3JkO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5hIHBhcnRlIHN1cGVyaW9yLlxyXG4gICAqXHJcbiAgICogPiBDYXNvIHNlamEgaW5kZWZpbmlkYSBvIGVzcGHDp28gc2UgbWFudMOpbSBwcmVzZXJ2YWRvIHBvcsOpbSB2YXppby5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtbG9nbycpIGxvZ28/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBVUkwgcGFyYSBhIGHDp8OjbyBkbyBsaW5rIGBFc3F1ZWNldSBhIHNlbmhhYC5cclxuICAgKlxyXG4gICAqIEEgcHJvcHJpZWRhZGUgYWNlaXRhIG9zIHNlZ3VpbnRlcyB0aXBvczpcclxuICAgKlxyXG4gICAqIC0gKipTdHJpbmcqKjogaW5mb3JtZSB1bWEgdXJsIGV4dGVybmEgb3UgdW1hIHJvdGEgdsOhbGlkYTtcclxuICAgKiAtICoqRnVuY3Rpb24qKjogcG9kZS1zZSBjdXN0b21pemFyIGEgYcOnw6NvLiBQYXJhIGVzdGEgcG9zc2lsaWRhZGUgYmFzdGEgYXRyaWJ1aXI6XHJcbiAgICogYGBgXHJcbiAgICogPHBvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkPlxyXG4gICAqICAgICAgW3JlY292ZXJ5XT1cInRoaXMubXlGdW5jLmJpbmQodGhpcylcIjtcclxuICAgKiA8L3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkPlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogLSAqKlBvUGFnZUNoYW5nZVBhc3N3b3JkUmVjb3ZlcnkqKjogY3JpYS1zZSB2w61uY3VsbyBhdXRvbcOhdGljbyBjb20gbyB0ZW1wbGF0ZSAqKnBvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5KiouXHJcbiAgICogICBPIG9iamV0byBkZXZlIGNvbnRlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGUgcG9kZS1zZSBkZWZpbmlyIG8gKip0aXBvKiogZGUgbW9kYWwgcGFyYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLFxyXG4gICAqICAgKiplbWFpbCoqIHBhcmEgY29udGF0byBlICoqbcOhc2NhcmEqKiBkbyBjYW1wbyBkZSB0ZWxlZm9uZS5cclxuICAgKlxyXG4gICAqID4gQ2FzbyBuw6NvIHRlbmhhIHZhbG9yIG8gbGluayBgRXNxdWVjZXUgYSBzZW5oYWAgZGVzYXBhcmVjZS5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtcmVjb3ZlcnknKSBzZXQgcmVjb3ZlcnkodmFsdWU6IHN0cmluZyB8IEZ1bmN0aW9uIHwgUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSkge1xyXG4gICAgdGhpcy5fcmVjb3ZlcnkgPSB2YWx1ZTtcclxuXHJcbiAgICBpZiAoaXNUeXBlb2YodmFsdWUsICdzdHJpbmcnKSkge1xyXG4gICAgICB0aGlzLnJlY292ZXJ5VXJsVHlwZSA9IGlzRXh0ZXJuYWxMaW5rKHZhbHVlKSA/ICdleHRlcm5hbExpbmsnIDogJ2ludGVybmFsTGluayc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgcmVjb3ZlcnkoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmVjb3Zlcnk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogTGlzdGEgZGUgcmVncmFzIHBhcmEgY3JpYcOnw6NvIGUgYWx0ZXJhw6fDo28gZGUgc2VuaGEuXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXJlcXVpcmVtZW50cycpIHNldCByZXF1aXJlbWVudHModmFsdWU6IEFycmF5PFBvUGFnZUNoYW5nZVBhc3N3b3JkUmVxdWlyZW1lbnQ+KSB7XHJcbiAgICB0aGlzLl9yZXF1aXJlbWVudHMgPSB2YWx1ZSB8fCBbXTtcclxuICAgIHRoaXMuc2hvd1JlcXVpcmVtZW50cyA9IHRoaXMuX3JlcXVpcmVtZW50cy5sZW5ndGggPiAwO1xyXG4gIH1cclxuICBnZXQgcmVxdWlyZW1lbnRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlcXVpcmVtZW50cztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBDYW1pbmhvIHBhcmEgYSBsb2dvbWFyY2EgbG9jYWxpemFkYSBubyByb2RhcMOpLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1zZWNvbmRhcnktbG9nbycpIHNlY29uZGFyeUxvZ28/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRva2VuIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYS9yZWN1cGVyYcOnw6NvIGRlIHNlbmhhLlxyXG4gICAqXHJcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIGNhc28gZXhpc3RhIHVtIHRva2VuIGNvbW8gcGFyw6JtZXRybyBuYSBVUkwgaW5pY2lhbCBkbyB0ZW1wbGF0ZS5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtdG9rZW4nKSB0b2tlbj86IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRlIHJldG9ybm8gZGEgcMOhZ2luYS5cclxuICAgKlxyXG4gICAqID4gTyBib3TDo28gYFZvbHRhcmAgYXBhcmVjZSBhcGVuYXMgcGFyYSB0ZWxhcyBkZSBhbHRlcmHDp8OjbyBkZSBzZW5oYSwgb3Ugc2VqYSwgc8OzIGFwYXJlY2Ugc2UgYSBwcm9wcmllZGFkZSBgcC1oaWRlLWN1cnJlbnQtcGFzc3dvcmRgIGZvclxyXG4gICAqIGZhbHNhLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYC9gXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXVybC1iYWNrJykgdXJsQmFjazogc3RyaW5nID0gJy8nO1xyXG5cclxuICAvKipcclxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVhbGl6YXIgdW0gUE9TVC4gUXVhbmRvIHByZWVuY2hpZG8sIG8gbcOpdG9kbyBgcC1zdWJtaXRgIHNlcsOhIGlnbm9yYWRvIGUgbyBjb21wb25lbnRlIGFkcXVpcmlyw6FcclxuICAgKiBhdXRvbWF0aXphw6fDo28gcGFyYSBvIHByb2Nlc3NvIGRlIGNhZGFzdHJvL3Ryb2NhIGRlIHNlbmhhLlxyXG4gICAqXHJcbiAgICogIyMjIFByb2Nlc3NvXHJcbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vcyBjYW1wb3MgZGUgc2VuaGEgZSBwcmVzc2lvbmFyICoqc2FsdmFyKiosXHJcbiAgICogbyBjb21wb25lbnRlIGZhcsOhIHVtYSByZXF1aXNpw6fDo28gYFBPU1RgIG5hIHVybCBlc3BlY2lmaWNhZGEgbmVzdGEgcHJvcHJpZWRhZGUgcGFzc2FuZG8gbyBvYmpldG8gY29udGVuZG8gb3MgdmFsb3JlcyBkZWZpbmlkb3MgcGVsb1xyXG4gICAqIHVzdcOhcmlvLlxyXG4gICAqXHJcbiAgICogYGBgXHJcbiAgICogYm9keSB7XHJcbiAgICogIHRva2VuPzogdG9rZW4sXHJcbiAgICogIG9sZFBhc3N3b3JkPzogb2xkUGFzc3dvcmQsXHJcbiAgICogIG5ld1Bhc3N3b3JkOiBuZXdQYXNzd29yZFxyXG4gICAqIH1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIE8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjA0YC5cclxuICAgKlxyXG4gICAqIEVtIGNhc28gZGUgKipzdWNlc3NvKiosIHNlcsOhIGV4aWJpZGEgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGRlIHNlbmhhIGFsdGVyYWRhLlxyXG4gICAqXHJcbiAgICogPiBPIHRva2VuIHNlcsOhIGluZm9ybWFkbyBwZWxhIHByb3ByaWVkYWRlIGBwLXRva2VuYGRvIGNvbXBvbmVudGUgb3UgcG9yIHVtICpxdWVyeSBwYXJhbWV0ZXIqIG5hIFVSTCBkbyB0ZW1wbGF0ZS5cclxuICAgKlxyXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcclxuICAgKlxyXG4gICAqIF9fX19fX19fX19fX19fX1xyXG4gICAqXHJcbiAgICogIyMjIyBQcmF0aWNpZGFkZVxyXG4gICAqIEFzIGluZm9ybWHDp8O1ZXMgZG8gc2VydmnDp28gZGUgYXV0ZW50aWNhw6fDo28gdGFtYsOpbSBwb2RlbSBzZXIgdHJhbnNtaXRpZGFzIGRpcmV0YW1lbnRlIHBlbGFzIGNvbmZpZ3VyYcOnw6NvcyBkZSByb3RhIGUsIGRlc3RhIG1hbmVpcmEsXHJcbiAgICogZGlzcGVuc2Etc2UgcXVhbHF1ZXIgbWVuw6fDo28gZS9vdSBpbXBvcnRhw6fDo28gZG8gY29tcG9uZW50ZSBgcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmRgIG5vIHJlc3RhbnRlIGRhIGFwbGljYcOnw6NvLiBPIGV4ZW1wbG8gYWJhaXhvXHJcbiAgICogZXhlbXBsaWZpY2EgYSBmb3JtYSBkaW7Dom1pY2EgY29tIGEgcXVhbCBvIHRlbXBsYXRlIGRlIHRlbGEgZGUgdHJvY2EgZGUgc2VuaGEgcG9kZSBzZXIgZ2VyYWRvIGFvIG5hdmVnYXIgcGFyYSByb3RhIGAvY2hhbmdlLXBhc3N3b3JkYCwgZVxyXG4gICAqIHRhbWLDqW0gY29tbyBlbGUgc2UgY29tdW5pY2EgY29tIG8gc2VydmnDp28gcGFyYSBlZmV0dWHDp8OjbyBkbyBwcm9jZXNzbyBkZSB0cm9jYSBkZSBzZW5oYSBkbyB1c3XDoXJpbyBlIHNvbGljaXRhw6fDo28gZGUgbm92YSBzZW5oYS5cclxuICAgKiBCYXN0YSBkZWZpbmlyIG5hcyBjb25maWd1cmHDp8O1ZXMgZGUgcm90YTpcclxuICAgKlxyXG4gICAqXHJcbiAgICogYGBgXHJcbiAgICogICBpbXBvcnQgeyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUsIFBvUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50IH0gZnJvbSAnQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzJztcclxuICAgKlxyXG4gICAqICAgLi4uXHJcbiAgICogICBjb25zdCByb3V0ZXM6IFJvdXRlcyA9IFtcclxuICAgKiAgICAge1xyXG4gICAqICAgICAgIHBhdGg6ICdjaGFuZ2UtcGFzc3dvcmQnLCBjb21wb25lbnQ6IFBvUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50LCBkYXRhOiB7XHJcbiAgICogICAgICAgICBzZXJ2aWNlQXBpOiAnaHR0cHM6Ly9wb3J0aW5hcmkuaW8vc2FtcGxlL2FwaS9uZXctcGFzc3dvcmQnLFxyXG4gICAqICAgICAgICAgcmVjb3Zlcnk6IHtcclxuICAgKiAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9wb3J0aW5hcmkuaW8vc2FtcGxlL2FwaS91c2VycycsXHJcbiAgICogICAgICAgICAgIHR5cGU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5BbGwsXHJcbiAgICogICAgICAgICAgIGNvbnRhY3RNYWlsOiAnZGV2LnBvcnRpbmFyaUBwb3J0aW5hcmkuY29tJyxcclxuICAgKiAgICAgICAgICAgcGhvbmVNYXNrOiAnOS05OTktOTk5LTk5OTknXHJcbiAgICogICAgICAgICB9XHJcbiAgICogICAgICAgfVxyXG4gICAqICAgICB9XHJcbiAgICogICAgIC4uLlxyXG4gICAqICAgXTtcclxuICAgKlxyXG4gICAqICAgQE5nTW9kdWxlKHtcclxuICAgKiAgICAgaW1wb3J0czogW1JvdXRlck1vZHVsZS5mb3JSb290KHJvdXRlcyldLFxyXG4gICAqICAgICBleHBvcnRzOiBbUm91dGVyTW9kdWxlXVxyXG4gICAqICAgfSlcclxuICAgKiAgIGV4cG9ydCBjbGFzcyBBcHBSb3V0aW5nTW9kdWxlIHsgfVxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICpcclxuICAgKiBPIG1ldGFkYWRvIGBzZXJ2aWNlQXBpYCBkZXZlIHNlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGRlIHRyb2NhIGRlIHNlbmhhLiBFIGByZWNvdmVyeWAgw6kgYSBpbnRlcmZhY2VcclxuICAgKiBgUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeWAgcmVzcG9uc8OhdmVsIHBlbGFzIGVzcGVjaWZpY2HDp8O1ZXMgY29udGlkYXMgbmEgbW9kYWwgZGUgcmVjdXBlcmHDp8OjbyBkZSBzZW5oYS5cclxuICAgKlxyXG4gICAqID4gw4kgZXNzZW5jaWFsIHF1ZSBzaWdhIGEgbm9tZW5jbGF0dXJhIGRvcyBhdHJpYnV0b3MgZXhlbXBsaWZpY2Fkb3MgYWNpbWEgcGFyYSBzdWEgZWZldGl2YSBmdW5jaW9uYWxpZGFkZS5cclxuICAgKlxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC11cmwtbmV3LXBhc3N3b3JkJykgdXJsTmV3UGFzc3dvcmQ/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBVUkwgcGFyYSBhIGHDp8OjbyBkbyBib3TDo28gYEVudHJhciBubyBzaXN0ZW1hYCBkYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIHF1ZSBhcGFyZWNlIGFww7NzIHNhbHZhciBhIHNlbmhhIG91IHNlIGNoYW1hZGEgcGVsbyBtw6l0b2RvXHJcbiAgICogYG9wZW5Db25maXJtYXRpb25gLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYC9gXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXVybC1ob21lJykgc2V0IHVybEhvbWUodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fdXJsSG9tZSA9IHZhbHVlO1xyXG4gICAgdGhpcy5tb2RhbEFjdGlvbi5hY3Rpb24gPSB0aGlzLm5hdmlnYXRlVG8uYmluZCh0aGlzLCB0aGlzLnVybEhvbWUpO1xyXG4gIH1cclxuICBnZXQgdXJsSG9tZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl91cmxIb21lO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIEZ1bsOnw6NvIGV4ZWN1dGFkYSBhbyBzdWJtZXRlciBvIGZvcm0gcGVsbyBib3TDo28gc2FsdmFyLlxyXG4gICAqXHJcbiAgICogQ2FzbyBkZWZpbmlkYSBlc3NhIGZ1bsOnw6NvLCBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gbsOjbyBhcGFyZWNlLCBtYXMgcG9kZSBzZXIgY2hhbWFkYSBwZWxvXHJcbiAgICogbcOpdG9kbyBgb3BlbkNvbmZpcm1hdGlvbmAuIEV4ZW1wbG86XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiBAVmlld0NoaWxkKFBvUGFnZUNoYW5nZVBhc3N3b3JkQ29tcG9uZW50KSBjaGFuZ2VQYXNzd29yZDogUG9QYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQ7XHJcbiAgICpcclxuICAgKiBvblN1Ym1pdCgpIHtcclxuICAgKiAgdGhpcy5jaGFuZ2VQYXNzd29yZC5vcGVuQ29uZmlybWF0aW9uKCk7XHJcbiAgICogfVxyXG4gICAqXHJcbiAgICogYGBgXHJcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLW5ldy1wYXNzd29yZGAuXHJcbiAgICovXHJcbiAgQE91dHB1dCgncC1zdWJtaXQnKSBzdWJtaXQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xyXG5cclxuICBhYnN0cmFjdCBuYXZpZ2F0ZVRvKHVybDogc3RyaW5nKTogdm9pZDtcclxuXHJcbn1cclxuIl19