/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { DatePipe } from '@angular/common';
import { PoInfoOrientation } from '@portinari/portinari-ui';
export class PoPageJobSchedulerSummaryComponent {
    /**
     * @param {?} datePipe
     */
    constructor(datePipe) {
        this.datePipe = datePipe;
        this.executionValue = '';
        this.firstExecutionValue = '';
        this.infoOrientation = PoInfoOrientation.Horizontal;
        this.periodicityValue = '';
        this.recurrentValue = '';
        this.literals = (/** @type {?} */ ({}));
        this.parameters = [];
        this.value = (/** @type {?} */ ({}));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        const { periodicity, hour, dayOfMonth, daysOfWeek, recurrent, firstExecution, firstExecutionHour } = this.value;
        this.periodicityValue = this.getPeriodicityLabel(periodicity);
        this.executionValue = this.getExecutionValue(periodicity, hour, daysOfWeek, dayOfMonth);
        this.firstExecutionValue = this.getFirstExecutionLabel(firstExecution, firstExecutionHour);
        this.recurrentValue = this.getRecurrentValue(recurrent);
    }
    /**
     * @private
     * @param {?} periodicity
     * @param {?=} hour
     * @param {?=} daysOfWeek
     * @param {?=} dayOfMonth
     * @return {?}
     */
    getExecutionValue(periodicity, hour, daysOfWeek, dayOfMonth) {
        switch (periodicity) {
            case 'daily':
                return this.getHourLabel(hour);
            case 'monthly':
                return this.getMonthlyLabelExecution(dayOfMonth, hour);
            case 'weekly':
                return this.getWeeklyLabelExecution(daysOfWeek, hour);
            default:
                return this.literals.notReported;
        }
    }
    /**
     * @private
     * @param {?} firstExecution
     * @param {?=} firstExecutionHour
     * @return {?}
     */
    getFirstExecutionLabel(firstExecution, firstExecutionHour) {
        if (firstExecution) {
            /** @type {?} */
            const date = this.datePipe.transform(firstExecution, 'dd/MM/yyyy', '-0200');
            return `${date} ${this.getHourLabel(firstExecutionHour)}`;
        }
        else {
            return this.literals.notReported;
        }
    }
    /**
     * @private
     * @param {?} hour
     * @return {?}
     */
    getHourLabel(hour) {
        return `${this.literals.at} ${hour || '00:00'}h`;
    }
    /**
     * @private
     * @param {?} dayOfMonth
     * @param {?} hour
     * @return {?}
     */
    getMonthlyLabelExecution(dayOfMonth, hour) {
        /** @type {?} */
        const hourLabel = this.getHourLabel(hour);
        return `${this.literals.day} ${dayOfMonth} ${hourLabel}`;
    }
    /**
     * @private
     * @param {?} periodicity
     * @return {?}
     */
    getPeriodicityLabel(periodicity) {
        switch (periodicity) {
            case 'daily':
                return this.literals.daily;
            case 'monthly':
                return this.literals.monthly;
            case 'weekly':
                return this.literals.weekly;
            default:
                return this.literals.single;
        }
    }
    /**
     * @private
     * @param {?} recurrent
     * @return {?}
     */
    getRecurrentValue(recurrent) {
        return recurrent ? this.literals.yes : this.literals.no;
    }
    /**
     * @private
     * @return {?}
     */
    getSorterWeekDays() {
        return {
            'sunday': 0,
            'monday': 1,
            'tuesday': 2,
            'wednesday': 3,
            'thursday': 4,
            'friday': 5,
            'saturday': 6
        };
    }
    /**
     * @private
     * @param {?} day
     * @return {?}
     */
    getTranslateWeekDay(day) {
        /** @type {?} */
        const days = {
            Sunday: this.literals.sunday,
            Monday: this.literals.monday,
            Tuesday: this.literals.tuesday,
            Wednesday: this.literals.wednesday,
            Thursday: this.literals.thursday,
            Friday: this.literals.friday,
            Saturday: this.literals.saturday,
        };
        return days[day] || '';
    }
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    getWeekDaysLabel(days = []) {
        /** @type {?} */
        const weekDaysSorted = this.sortWeekDays(days);
        return weekDaysSorted.map((/**
         * @param {?} day
         * @return {?}
         */
        day => this.getTranslateWeekDay(day))).join(', ');
    }
    /**
     * @private
     * @param {?} daysOfWeek
     * @param {?} hour
     * @return {?}
     */
    getWeeklyLabelExecution(daysOfWeek, hour) {
        if (daysOfWeek && Array.isArray(daysOfWeek)) {
            return `${this.getWeekDaysLabel(daysOfWeek)} ${this.getHourLabel(hour)}`;
        }
        else {
            return this.literals.notReported;
        }
    }
    /**
     * @private
     * @param {?=} days
     * @return {?}
     */
    sortWeekDays(days = []) {
        /** @type {?} */
        const sorterWeekDays = this.getSorterWeekDays();
        return days.sort((/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => {
            /** @type {?} */
            const currDay = a.toLowerCase();
            /** @type {?} */
            const nextDay = b.toLowerCase();
            return sorterWeekDays[currDay] > sorterWeekDays[nextDay] ? 1 : -1;
        }));
    }
}
PoPageJobSchedulerSummaryComponent.decorators = [
    { type: Component, args: [{
                selector: 'po-page-job-scheduler-summary',
                template: "<div class=\"po-md-12\">\r\n  <po-info\r\n    [p-label]=\"literals.process\"\r\n    [p-orientation]=\"infoOrientation\"\r\n    [p-value]=\"value.processID\">\r\n  </po-info>\r\n\r\n  <po-info\r\n    [p-label]=\"literals.periodicity\"\r\n    [p-orientation]=\"infoOrientation\"\r\n    [p-value]=\"periodicityValue\">\r\n  </po-info>\r\n\r\n  <po-info *ngIf=\"value.periodicity !== 'single'\"\r\n    [p-label]=\"literals.execution\"\r\n    [p-orientation]=\"infoOrientation\"\r\n    [p-value]=\"executionValue\">\r\n  </po-info>\r\n\r\n  <po-info\r\n    [p-label]=\"literals.recurrent\"\r\n    [p-orientation]=\"infoOrientation\"\r\n    [p-value]=\"recurrentValue\">\r\n  </po-info>\r\n\r\n  <po-info\r\n    [p-label]=\"literals.firstExecution\"\r\n    [p-orientation]=\"infoOrientation\"\r\n    [p-value]=\"firstExecutionValue\">\r\n  </po-info>\r\n</div>\r\n\r\n<po-widget *ngIf=\"parameters && parameters.length\"\r\n  class=\"po-pt-1 po-pb-1 po-md-12\"\r\n  [p-title]=\"literals.parameters\">\r\n\r\n  <po-dynamic-view\r\n    [p-fields]=\"parameters\"\r\n    [p-value]=\"value.executionParameter\">\r\n  </po-dynamic-view>\r\n\r\n</po-widget>\r\n\r\n"
            }] }
];
/** @nocollapse */
PoPageJobSchedulerSummaryComponent.ctorParameters = () => [
    { type: DatePipe }
];
PoPageJobSchedulerSummaryComponent.propDecorators = {
    literals: [{ type: Input, args: ['p-literals',] }],
    parameters: [{ type: Input, args: ['p-parameters',] }],
    value: [{ type: Input, args: ['p-value',] }]
};
if (false) {
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.executionValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.firstExecutionValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.infoOrientation;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.periodicityValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.recurrentValue;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.literals;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.parameters;
    /** @type {?} */
    PoPageJobSchedulerSummaryComponent.prototype.value;
    /**
     * @type {?}
     * @private
     */
    PoPageJobSchedulerSummaryComponent.prototype.datePipe;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLXN1bW1hcnkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1qb2Itc2NoZWR1bGVyL3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5L3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDekQsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTNDLE9BQU8sRUFBc0IsaUJBQWlCLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQVFoRixNQUFNLE9BQU8sa0NBQWtDOzs7O0lBYzdDLFlBQW9CLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFadEMsbUJBQWMsR0FBRyxFQUFFLENBQUM7UUFDcEIsd0JBQW1CLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLG9CQUFlLEdBQUcsaUJBQWlCLENBQUMsVUFBVSxDQUFDO1FBQy9DLHFCQUFnQixHQUFHLEVBQUUsQ0FBQztRQUN0QixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUVDLGFBQVEsR0FBRyxtQkFBTSxFQUFFLEVBQUEsQ0FBQztRQUVsQixlQUFVLEdBQThCLEVBQUUsQ0FBQztRQUVoRCxVQUFLLEdBQTJCLG1CQUFNLEVBQUUsRUFBQSxDQUFDO0lBRWxCLENBQUM7Ozs7SUFFMUMsUUFBUTtjQUNBLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSztRQUUvRyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixD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QixFQUFFO1FBRS9DLE9BQU8sSUFBSSxDQUFDLElBQUk7Ozs7O1FBQUMsQ0FBQyxDQUFTLEVBQUUsQ0FBUyxFQUFFLEVBQUU7O2tCQUNsQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRTs7a0JBQ3pCLE9BQU8sR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFO1lBRS9CLE9BQU8sY0FBYyxDQUFDLE9BQU8sQ0FBQyxHQUFHLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwRSxDQUFDLEVBQUMsQ0FBQztJQUNMLENBQUM7OztZQWhJRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLCtCQUErQjtnQkFDekMsNG9DQUEyRDthQUM1RDs7OztZQVRRLFFBQVE7Ozt1QkFrQmQsS0FBSyxTQUFDLFlBQVk7eUJBRWxCLEtBQUssU0FBQyxjQUFjO29CQUVwQixLQUFLLFNBQUMsU0FBUzs7OztJQVZoQiw0REFBb0I7O0lBQ3BCLGlFQUF5Qjs7SUFDekIsNkRBQStDOztJQUMvQyw4REFBc0I7O0lBQ3RCLDREQUFvQjs7SUFFcEIsc0RBQXlDOztJQUV6Qyx3REFBa0U7O0lBRWxFLG1EQUEyRDs7Ozs7SUFFL0Msc0RBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IERhdGVQaXBlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuXHJcbmltcG9ydCB7IFBvRHluYW1pY1ZpZXdGaWVsZCwgUG9JbmZvT3JpZW50YXRpb24gfSBmcm9tICdAcG9ydGluYXJpL3BvcnRpbmFyaS11aSc7XHJcblxyXG5pbXBvcnQgeyBQb0pvYlNjaGVkdWxlckludGVybmFsIH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wby1qb2Itc2NoZWR1bGVyLWludGVybmFsLmludGVyZmFjZSc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5JyxcclxuICB0ZW1wbGF0ZVVybDogJ3BvLXBhZ2Utam9iLXNjaGVkdWxlci1zdW1tYXJ5LmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgUG9QYWdlSm9iU2NoZWR1bGVyU3VtbWFyeUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcblxyXG4gIGV4ZWN1dGlvblZhbHVlID0gJyc7XHJcbiAgZmlyc3RFeGVjdXRpb25WYWx1ZSA9ICcnO1xyXG4gIGluZm9PcmllbnRhdGlvbiA9IFBvSW5mb09yaWVudGF0aW9uLkhvcml6b250YWw7XHJcbiAgcGVyaW9kaWNpdHlWYWx1ZSA9ICcnO1xyXG4gIHJlY3VycmVudFZhbHVlID0gJyc7XHJcblxyXG4gIEBJbnB1dCgncC1saXRlcmFscycpIGxpdGVyYWxzID0gPGFueT4ge307XHJcblxyXG4gIEBJbnB1dCgncC1wYXJhbWV0ZXJzJykgcGFyYW1ldGVyczogQXJyYXk8UG9EeW5hbWljVmlld0ZpZWxkPiA9IFtdO1xyXG5cclxuICBASW5wdXQoJ3AtdmFsdWUnKSB2YWx1ZTogUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCA9IDxhbnk+IHt9O1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGVQaXBlOiBEYXRlUGlwZSkge31cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICBjb25zdCB7IHBlcmlvZGljaXR5LCBob3VyLCBkYXlPZk1vbnRoLCBkYXlzT2ZXZWVrLCByZWN1cnJlbnQsIGZpcnN0RXhlY3V0aW9uLCBmaXJzdEV4ZWN1dGlvbkhvdXIgfSA9IHRoaXMudmFsdWU7XHJcblxyXG4gICAgdGhpcy5wZXJpb2RpY2l0eVZhbHVlID0gdGhpcy5nZXRQZXJpb2RpY2l0eUxhYmVsKHBlcmlvZGljaXR5KTtcclxuICAgIHRoaXMuZXhlY3V0aW9uVmFsdWUgPSB0aGlzLmdldEV4ZWN1dGlvblZhbHVlKHBlcmlvZGljaXR5LCBob3VyLCBkYXlzT2ZXZWVrLCBkYXlPZk1vbnRoKTtcclxuICAgIHRoaXMuZmlyc3RFeGVjdXRpb25WYWx1ZSA9IHRoaXMuZ2V0Rmlyc3RFeGVjdXRpb25MYWJlbChmaXJzdEV4ZWN1dGlvbiwgZmlyc3RFeGVjdXRpb25Ib3VyKTtcclxuICAgIHRoaXMucmVjdXJyZW50VmFsdWUgPSB0aGlzLmdldFJlY3VycmVudFZhbHVlKHJlY3VycmVudCk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEV4ZWN1dGlvblZhbHVlKHBlcmlvZGljaXR5OiBzdHJpbmcsIGhvdXI/OiBzdHJpbmcsIGRheXNPZldlZWs/OiBBcnJheTxzdHJpbmc+LCBkYXlPZk1vbnRoPzogbnVtYmVyKSB7XHJcbiAgICBzd2l0Y2ggKHBlcmlvZGljaXR5KSB7XHJcbiAgICAgIGNhc2UgJ2RhaWx5JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRIb3VyTGFiZWwoaG91cik7XHJcbiAgICAgIGNhc2UgJ21vbnRobHknOlxyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vbnRobHlMYWJlbEV4ZWN1dGlvbihkYXlPZk1vbnRoLCBob3VyKTtcclxuICAgICAgY2FzZSAnd2Vla2x5JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRXZWVrbHlMYWJlbEV4ZWN1dGlvbihkYXlzT2ZXZWVrLCBob3VyKTtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5ub3RSZXBvcnRlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0Rmlyc3RFeGVjdXRpb25MYWJlbChmaXJzdEV4ZWN1dGlvbjogRGF0ZSwgZmlyc3RFeGVjdXRpb25Ib3VyPzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChmaXJzdEV4ZWN1dGlvbikge1xyXG4gICAgICBjb25zdCBkYXRlID0gdGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZmlyc3RFeGVjdXRpb24sICdkZC9NTS95eXl5JywgJy0wMjAwJyk7XHJcblxyXG4gICAgICByZXR1cm4gYCR7ZGF0ZX0gJHt0aGlzLmdldEhvdXJMYWJlbChmaXJzdEV4ZWN1dGlvbkhvdXIpfWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5ub3RSZXBvcnRlZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0SG91ckxhYmVsKGhvdXI6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIGAke3RoaXMubGl0ZXJhbHMuYXR9ICR7aG91ciB8fCAnMDA6MDAnfWhgO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRNb250aGx5TGFiZWxFeGVjdXRpb24oZGF5T2ZNb250aDogbnVtYmVyLCBob3VyOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGhvdXJMYWJlbCA9IHRoaXMuZ2V0SG91ckxhYmVsKGhvdXIpO1xyXG5cclxuICAgIHJldHVybiBgJHt0aGlzLmxpdGVyYWxzLmRheX0gJHtkYXlPZk1vbnRofSAke2hvdXJMYWJlbH1gO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRQZXJpb2RpY2l0eUxhYmVsKHBlcmlvZGljaXR5KSB7XHJcbiAgICBzd2l0Y2ggKHBlcmlvZGljaXR5KSB7XHJcbiAgICAgIGNhc2UgJ2RhaWx5JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy5kYWlseTtcclxuICAgICAgY2FzZSAnbW9udGhseSc6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMubW9udGhseTtcclxuICAgICAgY2FzZSAnd2Vla2x5JzpcclxuICAgICAgICByZXR1cm4gdGhpcy5saXRlcmFscy53ZWVrbHk7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMuc2luZ2xlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRSZWN1cnJlbnRWYWx1ZShyZWN1cnJlbnQ6IGJvb2xlYW4pOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHJlY3VycmVudCA/IHRoaXMubGl0ZXJhbHMueWVzIDogdGhpcy5saXRlcmFscy5ubztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0U29ydGVyV2Vla0RheXMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAnc3VuZGF5JzogMCxcclxuICAgICAgJ21vbmRheSc6IDEsXHJcbiAgICAgICd0dWVzZGF5JzogMixcclxuICAgICAgJ3dlZG5lc2RheSc6IDMsXHJcbiAgICAgICd0aHVyc2RheSc6IDQsXHJcbiAgICAgICdmcmlkYXknOiA1LFxyXG4gICAgICAnc2F0dXJkYXknOiA2XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRUcmFuc2xhdGVXZWVrRGF5KGRheTogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGRheXMgPSB7XHJcbiAgICAgIFN1bmRheTogdGhpcy5saXRlcmFscy5zdW5kYXksXHJcbiAgICAgIE1vbmRheTogdGhpcy5saXRlcmFscy5tb25kYXksXHJcbiAgICAgIFR1ZXNkYXk6IHRoaXMubGl0ZXJhbHMudHVlc2RheSxcclxuICAgICAgV2VkbmVzZGF5OiB0aGlzLmxpdGVyYWxzLndlZG5lc2RheSxcclxuICAgICAgVGh1cnNkYXk6IHRoaXMubGl0ZXJhbHMudGh1cnNkYXksXHJcbiAgICAgIEZyaWRheTogdGhpcy5saXRlcmFscy5mcmlkYXksXHJcbiAgICAgIFNhdHVyZGF5OiB0aGlzLmxpdGVyYWxzLnNhdHVyZGF5LFxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gZGF5c1tkYXldIHx8ICcnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRXZWVrRGF5c0xhYmVsKGRheXM6IEFycmF5PHN0cmluZz4gPSBbXSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB3ZWVrRGF5c1NvcnRlZCA9IHRoaXMuc29ydFdlZWtEYXlzKGRheXMpO1xyXG5cclxuICAgIHJldHVybiB3ZWVrRGF5c1NvcnRlZC5tYXAoZGF5ID0+IHRoaXMuZ2V0VHJhbnNsYXRlV2Vla0RheShkYXkpKS5qb2luKCcsICcpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRXZWVrbHlMYWJlbEV4ZWN1dGlvbihkYXlzT2ZXZWVrOiBBcnJheTxzdHJpbmc+LCBob3VyOiBzdHJpbmcpIHtcclxuICAgIGlmIChkYXlzT2ZXZWVrICYmIEFycmF5LmlzQXJyYXkoZGF5c09mV2VlaykpIHtcclxuICAgICAgcmV0dXJuIGAke3RoaXMuZ2V0V2Vla0RheXNMYWJlbChkYXlzT2ZXZWVrKX0gJHt0aGlzLmdldEhvdXJMYWJlbChob3VyKX1gO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMubGl0ZXJhbHMubm90UmVwb3J0ZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNvcnRXZWVrRGF5cyhkYXlzOiBBcnJheTxzdHJpbmc+ID0gW10pIHtcclxuICAgIGNvbnN0IHNvcnRlcldlZWtEYXlzID0gdGhpcy5nZXRTb3J0ZXJXZWVrRGF5cygpO1xyXG5cclxuICAgIHJldHVybiBkYXlzLnNvcnQoKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiB7XHJcbiAgICAgIGNvbnN0IGN1cnJEYXkgPSBhLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGNvbnN0IG5leHREYXkgPSBiLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICByZXR1cm4gc29ydGVyV2Vla0RheXNbY3VyckRheV0gPiBzb3J0ZXJXZWVrRGF5c1tuZXh0RGF5XSA/IDEgOiAtMTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuIl19