/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Input } from '@angular/core';
import { PoPageJobSchedulerInternal } from './po-page-job-scheduler-internal';
/**
 * \@description
 *
 * O `po-page-job-scheduler` é uma página para criação e atualização de agendamentos da execução de processos (Job Scheduler),
 * como por exemplo: a geração da folha de pagamento dos funcionários.
 *
 * Para utilizar esta página, basta informar o serviço (endpoint) para consumo,
 * sem a necessidade de criar componentes e tratamentos dos dados.
 *
 * Veja mais sobre os padrões utilizados nas requisições no [Guia de implementação de APIs](guides/api).
 */
export class PoPageJobSchedulerBaseComponent {
    /**
     * @param {?} poPageJobSchedulerService
     */
    constructor(poPageJobSchedulerService) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        /**
         * Objeto com as propriedades do breadcrumb.
         */
        this.breadcrumb = { items: [] };
        this.model = new PoPageJobSchedulerInternal();
    }
    /**
     * @protected
     * @param {?} id
     * @return {?}
     */
    loadData(id) {
        if (!id) {
            this.model = new PoPageJobSchedulerInternal();
            return;
        }
        this.poPageJobSchedulerService.getResource(id).toPromise().then((/**
         * @param {?} response
         * @return {?}
         */
        (response) => {
            this.model = response;
        })).catch((/**
         * @return {?}
         */
        () => {
            this.model = new PoPageJobSchedulerInternal();
        }));
    }
    /**
     * @protected
     * @param {?} controls
     * @return {?}
     */
    markAsDirtyInvalidControls(controls) {
        for (const key in controls) {
            if (controls.hasOwnProperty(key)) {
                /** @type {?} */
                const control = controls[key];
                if (control.invalid) {
                    control.markAsDirty();
                }
            }
        }
    }
}
PoPageJobSchedulerBaseComponent.propDecorators = {
    breadcrumb: [{ type: Input, args: ['p-breadcrumb',] }],
    serviceApi: [{ type: Input, args: ['p-service-api',] }],
    title: [{ type: Input, args: ['p-title',] }]
};
if (false) {
    /**
     * Objeto com as propriedades do breadcrumb.
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.breadcrumb;
    /**
     * Endpoint usado pelo componente para busca dos processos e parâmetros que serão utilizados para criação e edição dos agendamentos.
     *
     * #### Processos
     *
     * Os processos são as tarefas que estarão disponíveis para o usuário poder fazer os agendamentos.
     * Ao inicializar o componente, será feito uma requisição `GET` para o endpoint `{service-api}/processes`, para buscar
     * essa lista de processos.
     *
     * Este endpoint `{service-api}/processes` deve retornar uma lista de objetos que seguem a definição de dados abaixo:
     *
     * ```
     * GET {service-api}/processes
     * ```
     *
     * ```
     * {
     *   items: [
     *     { "processID": "ac4f", "description": "Gerar folha de pagamento" },
     *     { "processID": "df6l", "description": "Relatório de imposto a recolher" },
     *     { "processID": "dk3p", "description": "Títulos em aberto" },
     *   ]
     * }
     * ```
     *
     * Desta forma será renderizado um componente para selecionar o processo e/ou filtrá-los.
     *
     * Para realizar o filtro de busca do processo, será feita uma requisição enviando o conteúdo digitado na busca através do
     * parâmetro `search`. Da seguinte forma:
     *
     * ```
     * GET {service-api}/processes?search=relatorio
     * ```
     *
     * > Veja mais sobre paginação e filtros no [Guia de implementação de APIs](guides/api).
     *
     * Também é possível fazer um agendamento de um processo específico, sem que seja necessário um endpoint para busca desses
     * processos. Então, caso o endpoint `{service-api}/processes` não seja válido, será apresentado um campo de entrada de
     * texto para o usuário informar diretamente
     * o **identificador do processo - `processID`** e ao salvar será enviado um `POST` para o endpoint difinido `serviceApi` conforme abaixo:
     *
     * ```
     * POST {service-api}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "daily": { "hour": 10, "minute": 12 },
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": true,
     *   "processID": "ac0405"
     *   ...
     * }
     * ```
     *
     * Caso seja necessário informar parâmetros e adicionar configurações no processo selecionado, será realizado um `GET`
     * como exemplificado abaixo. Os parâmetros devem retornar uma lista de objetos que seguem a interface
     * [PoDynamicFormField](/documentation/po-dynamic-form).
     *
     * ```
     * GET {service-api}/processes/:id/parameters
     * ...
     * {
     *   items: [
     *     { "property": "vencimento", type: "date" },
     *     { "property": "imposto-retido", "label": "Imposto Retido", type: "boolean" }
     *   ]
     * }
     * ```
     *
     * #### Salvar e Atualizar
     *
     * Para salvar o agendamento, será feita uma requisição de criação, passando os valores preenchidos pelo usuário via *payload*.
     * Abaixo uma requisição `POST` disparada, onde as propriedades do *Job Scheduler* foram preenchidas:
     *
     * ```
     *  POST {service-api}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": true,
     *   "daily": { "hour": 10, "minute": 12 },
     *   "processID": "ac0405"
     * }
     * ```
     *
     * Caso queira que o componente carregue um agendamento já existente, deve ser incluído um parâmetro na rota chamado `id`.
     *
     * Exemplo de configuração de rota:
     *
     * ```
     *  RouterModule.forRoot([
     *    ...
     *    { path: 'edit/:id', component: ExampleJobSchedulerComponent },
     *    ...
     *  ],
     * ```
     *
     * Baseado nisso, na inicialização do template será disparado uma requisição para buscar o recurso que será editado.
     *
     * ```
     * GET {service-api}/{id}
     * ```
     *
     * Ao atualizar o agendamento, será disparado um `PUT` com os dados preenchidos.
     * Veja abaixo uma requisição `PUT` disparada, onde a propriedade *recurrent* e *daily* foram atualizadas:
     *
     * ```
     *  PUT {service-api}/{id}
     * ```
     *
     * *Request payload* - estrutura de dados enviada no corpo da requisição conforme interface `PoJobScheduler`:
     *
     * ```
     * {
     *   "firstExecution": "2018-12-07T00:00:01-00:00",
     *   "recurrent": false,
     *   "daily": { "hour": 11, "minute": 30 },
     *   "processID": "ac0405"
     * }
     * ```
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.serviceApi;
    /**
     * Título da página.
     * @type {?}
     */
    PoPageJobSchedulerBaseComponent.prototype.title;
    /** @type {?} */
    PoPageJobSchedulerBaseComponent.prototype.model;
    /**
     * @type {?}
     * @protected
     */
    PoPageJobSchedulerBaseComponent.prototype.poPageJobSchedulerService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHBvcnRpbmFyaS9wb3J0aW5hcmktdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvcG8tcGFnZS1qb2Itc2NoZWR1bGVyL3BvLXBhZ2Utam9iLXNjaGVkdWxlci1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQ0EsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUt0QyxPQUFPLEVBQUUsMEJBQTBCLEVBQUUsTUFBTSxrQ0FBa0MsQ0FBQzs7Ozs7Ozs7Ozs7O0FBYzlFLE1BQU0sT0FBTywrQkFBK0I7Ozs7SUE0STFDLFlBQXNCLHlCQUFvRDtRQUFwRCw4QkFBeUIsR0FBekIseUJBQXlCLENBQTJCOzs7O1FBekluRCxlQUFVLEdBQWtCLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBdUlqRSxVQUFLLEdBQTJCLElBQUksMEJBQTBCLEVBQUUsQ0FBQztJQUVZLENBQUM7Ozs7OztJQUVwRSxRQUFRLENBQUMsRUFBbUI7UUFDcEMsSUFBSSxDQUFDLEVBQUUsRUFBRTtZQUNQLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1lBQzlDLE9BQU87U0FDUjtRQUVELElBQUksQ0FBQyx5QkFBeUIsQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUMsSUFBSTs7OztRQUFDLENBQUMsUUFBZ0MsRUFBRSxFQUFFO1lBQ25HLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ3hCLENBQUMsRUFBQyxDQUFDLEtBQUs7OztRQUFDLEdBQUcsRUFBRTtZQUNaLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSwwQkFBMEIsRUFBRSxDQUFDO1FBQ2hELENBQUMsRUFBQyxDQUFDO0lBRUwsQ0FBQzs7Ozs7O0lBRVMsMEJBQTBCLENBQUMsUUFBNEM7UUFDL0UsS0FBSyxNQUFNLEdBQUcsSUFBSSxRQUFRLEVBQUU7WUFDMUIsSUFBSSxRQUFRLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFOztzQkFDMUIsT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUM7Z0JBRTdCLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtvQkFDbkIsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDO2lCQUN2QjthQUNGO1NBQ0Y7SUFDSCxDQUFDOzs7eUJBbktBLEtBQUssU0FBQyxjQUFjO3lCQWtJcEIsS0FBSyxTQUFDLGVBQWU7b0JBR3JCLEtBQUssU0FBQyxTQUFTOzs7Ozs7O0lBckloQixxREFBaUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFrSWpFLHFEQUEyQzs7Ozs7SUFHM0MsZ0RBQWdDOztJQUVoQyxnREFBaUU7Ozs7O0lBRXJELG9FQUE4RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IElucHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvQnJlYWRjcnVtYiB9IGZyb20gJ0Bwb3J0aW5hcmkvcG9ydGluYXJpLXVpJztcblxuaW1wb3J0IHsgUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1qb2Itc2NoZWR1bGVyLWludGVybmFsLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BhZ2VKb2JTY2hlZHVsZXJJbnRlcm5hbCB9IGZyb20gJy4vcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWludGVybmFsJztcbmltcG9ydCB7IFBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UgfSBmcm9tICcuL3BvLXBhZ2Utam9iLXNjaGVkdWxlci5zZXJ2aWNlJztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBPIGBwby1wYWdlLWpvYi1zY2hlZHVsZXJgIMOpIHVtYSBww6FnaW5hIHBhcmEgY3JpYcOnw6NvIGUgYXR1YWxpemHDp8OjbyBkZSBhZ2VuZGFtZW50b3MgZGEgZXhlY3XDp8OjbyBkZSBwcm9jZXNzb3MgKEpvYiBTY2hlZHVsZXIpLFxuICogY29tbyBwb3IgZXhlbXBsbzogYSBnZXJhw6fDo28gZGEgZm9saGEgZGUgcGFnYW1lbnRvIGRvcyBmdW5jaW9uw6FyaW9zLlxuICpcbiAqIFBhcmEgdXRpbGl6YXIgZXN0YSBww6FnaW5hLCBiYXN0YSBpbmZvcm1hciBvIHNlcnZpw6dvIChlbmRwb2ludCkgcGFyYSBjb25zdW1vLFxuICogc2VtIGEgbmVjZXNzaWRhZGUgZGUgY3JpYXIgY29tcG9uZW50ZXMgZSB0cmF0YW1lbnRvcyBkb3MgZGFkb3MuXG4gKlxuICogVmVqYSBtYWlzIHNvYnJlIG9zIHBhZHLDtWVzIHV0aWxpemFkb3MgbmFzIHJlcXVpc2nDp8O1ZXMgbm8gW0d1aWEgZGUgaW1wbGVtZW50YcOnw6NvIGRlIEFQSXNdKGd1aWRlcy9hcGkpLlxuICovXG5leHBvcnQgY2xhc3MgUG9QYWdlSm9iU2NoZWR1bGVyQmFzZUNvbXBvbmVudCB7XG5cbiAgLyoqIE9iamV0byBjb20gYXMgcHJvcHJpZWRhZGVzIGRvIGJyZWFkY3J1bWIuICovXG4gIEBJbnB1dCgncC1icmVhZGNydW1iJykgYnJlYWRjcnVtYj86IFBvQnJlYWRjcnVtYiA9IHsgaXRlbXM6IFtdIH07XG5cbiAgLyoqXG4gICAqIEVuZHBvaW50IHVzYWRvIHBlbG8gY29tcG9uZW50ZSBwYXJhIGJ1c2NhIGRvcyBwcm9jZXNzb3MgZSBwYXLDom1ldHJvcyBxdWUgc2Vyw6NvIHV0aWxpemFkb3MgcGFyYSBjcmlhw6fDo28gZSBlZGnDp8OjbyBkb3MgYWdlbmRhbWVudG9zLlxuICAgKlxuICAgKiAjIyMjIFByb2Nlc3Nvc1xuICAgKlxuICAgKiBPcyBwcm9jZXNzb3Mgc8OjbyBhcyB0YXJlZmFzIHF1ZSBlc3RhcsOjbyBkaXNwb27DrXZlaXMgcGFyYSBvIHVzdcOhcmlvIHBvZGVyIGZhemVyIG9zIGFnZW5kYW1lbnRvcy5cbiAgICogQW8gaW5pY2lhbGl6YXIgbyBjb21wb25lbnRlLCBzZXLDoSBmZWl0byB1bWEgcmVxdWlzacOnw6NvIGBHRVRgIHBhcmEgbyBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgLCBwYXJhIGJ1c2NhclxuICAgKiBlc3NhIGxpc3RhIGRlIHByb2Nlc3Nvcy5cbiAgICpcbiAgICogRXN0ZSBlbmRwb2ludCBge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNgIGRldmUgcmV0b3JuYXIgdW1hIGxpc3RhIGRlIG9iamV0b3MgcXVlIHNlZ3VlbSBhIGRlZmluacOnw6NvIGRlIGRhZG9zIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc1xuICAgKiBgYGBcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBpdGVtczogW1xuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImFjNGZcIiwgXCJkZXNjcmlwdGlvblwiOiBcIkdlcmFyIGZvbGhhIGRlIHBhZ2FtZW50b1wiIH0sXG4gICAqICAgICB7IFwicHJvY2Vzc0lEXCI6IFwiZGY2bFwiLCBcImRlc2NyaXB0aW9uXCI6IFwiUmVsYXTDs3JpbyBkZSBpbXBvc3RvIGEgcmVjb2xoZXJcIiB9LFxuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImRrM3BcIiwgXCJkZXNjcmlwdGlvblwiOiBcIlTDrXR1bG9zIGVtIGFiZXJ0b1wiIH0sXG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBEZXN0YSBmb3JtYSBzZXLDoSByZW5kZXJpemFkbyB1bSBjb21wb25lbnRlIHBhcmEgc2VsZWNpb25hciBvIHByb2Nlc3NvIGUvb3UgZmlsdHLDoS1sb3MuXG4gICAqXG4gICAqIFBhcmEgcmVhbGl6YXIgbyBmaWx0cm8gZGUgYnVzY2EgZG8gcHJvY2Vzc28sIHNlcsOhIGZlaXRhIHVtYSByZXF1aXNpw6fDo28gZW52aWFuZG8gbyBjb250ZcO6ZG8gZGlnaXRhZG8gbmEgYnVzY2EgYXRyYXbDqXMgZG9cbiAgICogcGFyw6JtZXRybyBgc2VhcmNoYC4gRGEgc2VndWludGUgZm9ybWE6XG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXM/c2VhcmNoPXJlbGF0b3Jpb1xuICAgKiBgYGBcbiAgICpcbiAgICogPiBWZWphIG1haXMgc29icmUgcGFnaW5hw6fDo28gZSBmaWx0cm9zIG5vIFtHdWlhIGRlIGltcGxlbWVudGHDp8OjbyBkZSBBUElzXShndWlkZXMvYXBpKS5cbiAgICpcbiAgICogVGFtYsOpbSDDqSBwb3Nzw612ZWwgZmF6ZXIgdW0gYWdlbmRhbWVudG8gZGUgdW0gcHJvY2Vzc28gZXNwZWPDrWZpY28sIHNlbSBxdWUgc2VqYSBuZWNlc3PDoXJpbyB1bSBlbmRwb2ludCBwYXJhIGJ1c2NhIGRlc3Nlc1xuICAgKiBwcm9jZXNzb3MuIEVudMOjbywgY2FzbyBvIGVuZHBvaW50IGB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlc2AgbsOjbyBzZWphIHbDoWxpZG8sIHNlcsOhIGFwcmVzZW50YWRvIHVtIGNhbXBvIGRlIGVudHJhZGEgZGVcbiAgICogdGV4dG8gcGFyYSBvIHVzdcOhcmlvIGluZm9ybWFyIGRpcmV0YW1lbnRlXG4gICAqIG8gKippZGVudGlmaWNhZG9yIGRvIHByb2Nlc3NvIC0gYHByb2Nlc3NJRGAqKiBlIGFvIHNhbHZhciBzZXLDoSBlbnZpYWRvIHVtIGBQT1NUYCBwYXJhIG8gZW5kcG9pbnQgZGlmaW5pZG8gYHNlcnZpY2VBcGlgIGNvbmZvcm1lIGFiYWl4bzpcbiAgICpcbiAgICogYGBgXG4gICAqIFBPU1Qge3NlcnZpY2UtYXBpfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJkYWlseVwiOiB7IFwiaG91clwiOiAxMCwgXCJtaW51dGVcIjogMTIgfSxcbiAgICogICBcImZpcnN0RXhlY3V0aW9uXCI6IFwiMjAxOC0xMi0wN1QwMDowMDowMS0wMDowMFwiLFxuICAgKiAgIFwicmVjdXJyZW50XCI6IHRydWUsXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIlxuICAgKiAgIC4uLlxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBDYXNvIHNlamEgbmVjZXNzw6FyaW8gaW5mb3JtYXIgcGFyw6JtZXRyb3MgZSBhZGljaW9uYXIgY29uZmlndXJhw6fDtWVzIG5vIHByb2Nlc3NvIHNlbGVjaW9uYWRvLCBzZXLDoSByZWFsaXphZG8gdW0gYEdFVGBcbiAgICogY29tbyBleGVtcGxpZmljYWRvIGFiYWl4by4gT3MgcGFyw6JtZXRyb3MgZGV2ZW0gcmV0b3JuYXIgdW1hIGxpc3RhIGRlIG9iamV0b3MgcXVlIHNlZ3VlbSBhIGludGVyZmFjZVxuICAgKiBbUG9EeW5hbWljRm9ybUZpZWxkXSgvZG9jdW1lbnRhdGlvbi9wby1keW5hbWljLWZvcm0pLlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzLzppZC9wYXJhbWV0ZXJzXG4gICAqIC4uLlxuICAgKiB7XG4gICAqICAgaXRlbXM6IFtcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcInZlbmNpbWVudG9cIiwgdHlwZTogXCJkYXRlXCIgfSxcbiAgICogICAgIHsgXCJwcm9wZXJ0eVwiOiBcImltcG9zdG8tcmV0aWRvXCIsIFwibGFiZWxcIjogXCJJbXBvc3RvIFJldGlkb1wiLCB0eXBlOiBcImJvb2xlYW5cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiAjIyMjIFNhbHZhciBlIEF0dWFsaXphclxuICAgKlxuICAgKiBQYXJhIHNhbHZhciBvIGFnZW5kYW1lbnRvLCBzZXLDoSBmZWl0YSB1bWEgcmVxdWlzacOnw6NvIGRlIGNyaWHDp8OjbywgcGFzc2FuZG8gb3MgdmFsb3JlcyBwcmVlbmNoaWRvcyBwZWxvIHVzdcOhcmlvIHZpYSAqcGF5bG9hZCouXG4gICAqIEFiYWl4byB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBkaXNwYXJhZGEsIG9uZGUgYXMgcHJvcHJpZWRhZGVzIGRvICpKb2IgU2NoZWR1bGVyKiBmb3JhbSBwcmVlbmNoaWRhczpcbiAgICpcbiAgICogYGBgXG4gICAqICBQT1NUIHtzZXJ2aWNlLWFwaX1cbiAgICogYGBgXG4gICAqXG4gICAqICpSZXF1ZXN0IHBheWxvYWQqIC0gZXN0cnV0dXJhIGRlIGRhZG9zIGVudmlhZGEgbm8gY29ycG8gZGEgcmVxdWlzacOnw6NvIGNvbmZvcm1lIGludGVyZmFjZSBgUG9Kb2JTY2hlZHVsZXJgOlxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAxMiB9LFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQ2FzbyBxdWVpcmEgcXVlIG8gY29tcG9uZW50ZSBjYXJyZWd1ZSB1bSBhZ2VuZGFtZW50byBqw6EgZXhpc3RlbnRlLCBkZXZlIHNlciBpbmNsdcOtZG8gdW0gcGFyw6JtZXRybyBuYSByb3RhIGNoYW1hZG8gYGlkYC5cbiAgICpcbiAgICogRXhlbXBsbyBkZSBjb25maWd1cmHDp8OjbyBkZSByb3RhOlxuICAgKlxuICAgKiBgYGBcbiAgICogIFJvdXRlck1vZHVsZS5mb3JSb290KFtcbiAgICogICAgLi4uXG4gICAqICAgIHsgcGF0aDogJ2VkaXQvOmlkJywgY29tcG9uZW50OiBFeGFtcGxlSm9iU2NoZWR1bGVyQ29tcG9uZW50IH0sXG4gICAqICAgIC4uLlxuICAgKiAgXSxcbiAgICogYGBgXG4gICAqXG4gICAqIEJhc2VhZG8gbmlzc28sIG5hIGluaWNpYWxpemHDp8OjbyBkbyB0ZW1wbGF0ZSBzZXLDoSBkaXNwYXJhZG8gdW1hIHJlcXVpc2nDp8OjbyBwYXJhIGJ1c2NhciBvIHJlY3Vyc28gcXVlIHNlcsOhIGVkaXRhZG8uXG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS97aWR9XG4gICAqIGBgYFxuICAgKlxuICAgKiBBbyBhdHVhbGl6YXIgbyBhZ2VuZGFtZW50bywgc2Vyw6EgZGlzcGFyYWRvIHVtIGBQVVRgIGNvbSBvcyBkYWRvcyBwcmVlbmNoaWRvcy5cbiAgICogVmVqYSBhYmFpeG8gdW1hIHJlcXVpc2nDp8OjbyBgUFVUYCBkaXNwYXJhZGEsIG9uZGUgYSBwcm9wcmllZGFkZSAqcmVjdXJyZW50KiBlICpkYWlseSogZm9yYW0gYXR1YWxpemFkYXM6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgUFVUIHtzZXJ2aWNlLWFwaX0ve2lkfVxuICAgKiBgYGBcbiAgICpcbiAgICogKlJlcXVlc3QgcGF5bG9hZCogLSBlc3RydXR1cmEgZGUgZGFkb3MgZW52aWFkYSBubyBjb3JwbyBkYSByZXF1aXNpw6fDo28gY29uZm9ybWUgaW50ZXJmYWNlIGBQb0pvYlNjaGVkdWxlcmA6XG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgXCJmaXJzdEV4ZWN1dGlvblwiOiBcIjIwMTgtMTItMDdUMDA6MDA6MDEtMDA6MDBcIixcbiAgICogICBcInJlY3VycmVudFwiOiBmYWxzZSxcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDExLCBcIm1pbnV0ZVwiOiAzMCB9LFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCJcbiAgICogfVxuICAgKiBgYGBcbiAgICovXG4gIEBJbnB1dCgncC1zZXJ2aWNlLWFwaScpIHNlcnZpY2VBcGk6IHN0cmluZztcblxuICAvKiogVMOtdHVsbyBkYSBww6FnaW5hLiAqL1xuICBASW5wdXQoJ3AtdGl0bGUnKSB0aXRsZTogc3RyaW5nO1xuXG4gIG1vZGVsOiBQb0pvYlNjaGVkdWxlckludGVybmFsID0gbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2U6IFBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UpIHt9XG5cbiAgcHJvdGVjdGVkIGxvYWREYXRhKGlkOiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICB0aGlzLm1vZGVsID0gbmV3IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5wb1BhZ2VKb2JTY2hlZHVsZXJTZXJ2aWNlLmdldFJlc291cmNlKGlkKS50b1Byb21pc2UoKS50aGVuKChyZXNwb25zZTogUG9Kb2JTY2hlZHVsZXJJbnRlcm5hbCkgPT4ge1xuICAgICAgdGhpcy5tb2RlbCA9IHJlc3BvbnNlO1xuICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgIHRoaXMubW9kZWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcbiAgICB9KTtcblxuICB9XG5cbiAgcHJvdGVjdGVkIG1hcmtBc0RpcnR5SW52YWxpZENvbnRyb2xzKGNvbnRyb2xzOiB7IFtrZXk6IHN0cmluZ106IEFic3RyYWN0Q29udHJvbCB9ICkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbnRyb2xzKSB7XG4gICAgICBpZiAoY29udHJvbHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBjb25zdCBjb250cm9sID0gY29udHJvbHNba2V5XTtcblxuICAgICAgICBpZiAoY29udHJvbC5pbnZhbGlkKSB7XG4gICAgICAgICAgY29udHJvbC5tYXJrQXNEaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbn1cbiJdfQ==