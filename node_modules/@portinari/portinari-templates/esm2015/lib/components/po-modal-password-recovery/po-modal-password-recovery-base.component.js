/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, poLocaleDefault } from '../../utils/util';
import { poModalPasswordRecoveryLiterals } from './literals/i18n/po-modal-password-recovery-literals';
import { PoModalPasswordRecoveryType } from './enums/po-modal-password-recovery-type.enum';
/** @type {?} */
const PoModalPasswordRecoveryDefaultMaxLength = 15;
/** @type {?} */
const PoModalPasswordRecoveryDefaultMinLength = 15;
/** @type {?} */
const PoModalPasswordRecoveryDefaultPhone = '(99) 99999-9999';
/** @type {?} */
const PoModalPasswordRecoveryTypeDefault = PoModalPasswordRecoveryType.Email;
/**
 * \@description
 *
 * O componente `po-modal-password-recovery` é utilizado como template para solicitação de troca de senha.
 *
 * É composto por uma modal que possui três telas, cada uma com as seguintes características:
 *
 * - A primeira possui campos para preenchimento de email ou número de telefone;
 * - Tela com campo para preenchimento de código SMS enviado para o número de telefone enviado;
 * - A terceira se trata de uma confirmação de envio de link para a caixa de email do usuário.
 *
 *
 * A propriedade `p-url-recovery` automatiza a rotina do componente e simplifica o processo
 * para recuperação de senha, bastando definir uma url para requisição dos recursos.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 *
 * Para a modal de digitação de código SMS, é possível definir uma mensagem de erro
 * customizada com a propriedade `p-code-error` e há um link para
 * reenvio de código por SMS. Ao reenviar, o evento `p-code-submit` envia um objeto com o telefone do usuário e a quantidade
 * de vezes em que o usuário fez a solicitação de reenvio.
 *
 * > É indicada a utilização da tela de digitação para envio de código SMS apenas
 * se a opção por envio SMS for disponibilizada para o usuário.
 *
 *
 * A modal de confirmação contém uma ação de reenvio e o evento `p-submit`
 * é quem passa o objeto contendo o email em conjunto com a quantidade de tentativas de reenvio.
 *
 * > A tela de confirmação é indicada para quando o usuário solicitar a troca através do email.
 *
 * > Os textos das modals são pré-definidos, imutáveis e são traduzidos de acordo com o idioma do *browser* (pt, en e es)
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/\@portinari/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 * @abstract
 */
export class PoModalPasswordRecoveryBaseComponent {
    constructor() {
        this._phoneMask = PoModalPasswordRecoveryDefaultPhone;
        this._type = PoModalPasswordRecoveryTypeDefault;
        this.maxLength = PoModalPasswordRecoveryDefaultMaxLength;
        this.minLength = PoModalPasswordRecoveryDefaultMinLength;
        this.literals = Object.assign({}, poModalPasswordRecoveryLiterals[poLocaleDefault], poModalPasswordRecoveryLiterals[browserLanguage()]);
        /**
         * \@optional
         *
         * \@description
         *
         * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.codeSubmit = new EventEmitter();
        /**
         * \@optional
         *
         * \@description
         *
         * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Definição do e-mail que é exibido na mensagem para contato de suporte.
     * @param {?} value
     * @return {?}
     */
    set contactEmail(value) {
        this._contactEmail = value;
        this.smsCodeErrorMessage = this.concatenateSMSErrorMessage(value);
    }
    /**
     * @return {?}
     */
    get contactEmail() {
        return this._contactEmail;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Definição da mascara do campo de telefone.
     *
     * \@default `(99) 99999-9999`
     * @param {?} value
     * @return {?}
     */
    set phoneMask(value) {
        this._phoneMask = value || PoModalPasswordRecoveryDefaultPhone;
        this.minLength = this.maxLength = this._phoneMask.length;
    }
    /**
     * @return {?}
     */
    get phoneMask() {
        return this._phoneMask;
    }
    /**
     * \@optional
     *
     * \@description
     *
     * Define o tipo de recuperação de senha que será exibido.
     *
     * \@default `PoModalPasswordRecoveryType.Email`
     *
     * @param {?} value
     * @return {?}
     */
    set type(value) {
        this._type = ((/** @type {?} */ (Object))).values(PoModalPasswordRecoveryType).includes(value) ? value : PoModalPasswordRecoveryTypeDefault;
    }
    /**
     * @return {?}
     */
    get type() {
        return this._type;
    }
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    concatenateSMSErrorMessage(value) {
        /** @type {?} */
        const literalCodeErrorMessage = this.literals.smsCodeErrorMessagePhrase;
        return value && value !== '' ? `${literalCodeErrorMessage} ${this.literals.prepositionIn} ${value}.` : literalCodeErrorMessage;
    }
}
PoModalPasswordRecoveryBaseComponent.propDecorators = {
    contactEmail: [{ type: Input, args: ['p-contact-email',] }],
    codeError: [{ type: Input, args: ['p-code-error',] }],
    phoneMask: [{ type: Input, args: ['p-phone-mask',] }],
    type: [{ type: Input, args: ['p-type',] }],
    urlRecovery: [{ type: Input, args: ['p-url-recovery',] }],
    codeSubmit: [{ type: Output, args: ['p-code-submit',] }],
    submit: [{ type: Output, args: ['p-submit',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryBaseComponent.prototype._contactEmail;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryBaseComponent.prototype._phoneMask;
    /**
     * @type {?}
     * @private
     */
    PoModalPasswordRecoveryBaseComponent.prototype._type;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.email;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.maxLength;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.minLength;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.modalPasswordRecoveryTypeAll;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.phone;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.smsCode;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.smsCodeErrorMessage;
    /** @type {?} */
    PoModalPasswordRecoveryBaseComponent.prototype.literals;
    /**
     * \@optional
     *
     * \@description
     *
     * Definição de mensagem de erro customizada para quando o usuário passar um código SMS inválido ou errado.
     * @type {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.codeError;
    /**
     * \@optional
     *
     * \@description
     *
     * Endpoint usado pelo template para requisição do recurso. Quando preenchido,
     * o métodos `p-submit` e `p-submit-code` serão ignorados e o componente adquirirá automatização
     * para o processo de solicitação de troca de senha.
     *
     * ### Processos
     * Ao digitar um valor válido no campo de email/telefone e pressionar **enviar**,
     * o componente fará uma requisição `POST` na url especificada nesta propriedade passando o objeto contendo o valor definido pelo usuário.
     *
     * ```
     * body {
     *  email: email,
     *  retry?: retry
     * }
     * ```
     *
     *
     * #### Recuperação por email
     * Para a recuperação de senha por **email**, o código de resposta HTTP de status esperado é `204`.
     *
     * Em caso de **sucesso**, será exibida a modal de confirmação de e-mail para o usuário.
     *
     *
     * > A ação **Reenviar** na tela de confirmação efetua uma nova requisição
     * passando-se o objeto com incremento para o valor da propriedade **retry**.
     *
     * *Processo finalizado.*
     *
     *
     * #### Recuperação por SMS
     * Se a opção de recuperação for por **SMS**, o código de status de sucesso deve ser `200`.
     * Em caso de **sucesso**, abre-se a modal de digitação de código SMS e a resposta
     * desta requisição deve retornar uma definição de dados abaixo:
     *
     * ```
     * 200:
     *  {
     *    hash: hash,
     *    urlValidationCode?: url
     *  }
     * ```
     *
     *
     * - O **hash** será o código de validação da solicitação do SMS para ser enviado juntamente com o código de verificação do SMS;
     * - **urlValidationCode** é a url usada para validação do código enviado por SMS.
     *
     *
     * > Caso não seja passado urlValidationCode, o endpoint usado para validação do código será `<p-url-recovery>/validation`.
     *
     *
     * #### Validação do código SMS
     * Ao digitar um valor válido no campo de código SMS e pressionar **continuar**, o componente fará uma requisição `POST` contendo:
     *
     * ```
     * POST /<p-url-recovery>/validation OU /<urlValidationCode>
     * Body {
     *  hash: hash,
     *  code: code
     * }
     * ```
     *
     *
     * O código de resposta HTTP de status esperado é `200`.
     *
     * Em caso de **erro** na validação do código SMS, a modal se mantém com o campo para digitação
     * de código SMS
     *
     *
     * > Pode-se atribuir a mensagem de erro (message) para o atributo `p-code-error` conforme retorno abaixo:
     *
     * ```
     * 400
     *  {
     *    error {
     *      message: 'Error Message'
     *    }
     *  }
     * ```
     *
     *
     * Em caso de **sucesso**, espera-se a resposta desta requisição retornando a seguinte definição:
     *
     * ```
     * 200:
     *  {
     *    token: token,
     *    urlChangePassword?: url
     *  }
     * ```
     *
     *
     * - **token**: Token de alteração de senha;
     * - **urlChangePassword**: url para o formulário de alteração de senha.
     *
     *
     * O componente está configurado para redirecionar para a url estabelecida em `urlChangePassword`.
     *
     * > Caso não seja passado valor para urlChangePassword,
     * a url usada para validação será a `<p-url-recovery>/changePassword?token=<token>`.
     *
     * *Processo finalizado.*
     * @type {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.urlRecovery;
    /**
     * \@optional
     *
     * \@description
     *
     * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
     * @type {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.codeSubmit;
    /**
     * \@optional
     *
     * \@description
     *
     * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
     *
     * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
     * @type {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.submit;
    /**
     * Acão para conclusão de processo e fechamento da modal. Indica-se sua utilização
     * para após o envio e validação do código SMS enviado pelo usuário.
     *
     * > Nas modals em que há a ação de 'cancelar' dispensa-se o uso desta ação pois o componente já trata o fechamento da modal.
     * @abstract
     * @return {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.completed = function () { };
    /**
     * Abre a modal de preenchimento de email ou número de telefone para solicitação de troca de senha.
     * @abstract
     * @return {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.open = function () { };
    /**
     * Abre a modal de confirmação de envio de email.
     * @abstract
     * @return {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.openConfirmation = function () { };
    /**
     * Abre a modal de preenchimento do código SMS enviado ao usuário.
     * @abstract
     * @return {?}
     */
    PoModalPasswordRecoveryBaseComponent.prototype.openSmsCode = function () { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AcG9ydGluYXJpL3BvcnRpbmFyaS10ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTVELE9BQU8sRUFBRSxlQUFlLEVBQUUsZUFBZSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFcEUsT0FBTyxFQUFFLCtCQUErQixFQUFFLE1BQU0scURBQXFELENBQUM7QUFDdEcsT0FBTyxFQUFFLDJCQUEyQixFQUFFLE1BQU0sOENBQThDLENBQUM7O01BRXJGLHVDQUF1QyxHQUFHLEVBQUU7O01BQzVDLHVDQUF1QyxHQUFHLEVBQUU7O01BQzVDLG1DQUFtQyxHQUFHLGlCQUFpQjs7TUFDdkQsa0NBQWtDLEdBQWdDLDJCQUEyQixDQUFDLEtBQUs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBa0R6RyxNQUFNLE9BQWdCLG9DQUFvQztJQUExRDtRQUdVLGVBQVUsR0FBRyxtQ0FBbUMsQ0FBQztRQUNqRCxVQUFLLEdBQWdDLGtDQUFrQyxDQUFDO1FBR2hGLGNBQVMsR0FBRyx1Q0FBdUMsQ0FBQztRQUNwRCxjQUFTLEdBQUcsdUNBQXVDLENBQUM7UUFNcEQsYUFBUSxxQkFPRCwrQkFBK0IsQ0FBQyxlQUFlLENBQUMsRUFDaEQsK0JBQStCLENBQUMsZUFBZSxFQUFFLENBQUMsRUFDckQ7Ozs7Ozs7Ozs7UUFxTHFCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDOzs7Ozs7Ozs7O1FBVzFDLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO0lBK0J2RCxDQUFDOzs7Ozs7Ozs7O0lBdE5DLElBQThCLFlBQVksQ0FBQyxLQUFhO1FBQ3RELElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBRTNCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEUsQ0FBQzs7OztJQUVELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDOzs7Ozs7Ozs7Ozs7SUFvQkQsSUFBMkIsU0FBUyxDQUFDLEtBQWE7UUFDaEQsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLElBQUksbUNBQW1DLENBQUM7UUFDL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQzNELENBQUM7Ozs7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQzs7Ozs7Ozs7Ozs7OztJQVlELElBQXFCLElBQUksQ0FBQyxLQUFrQztRQUMxRCxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsbUJBQUssTUFBTSxFQUFBLENBQUMsQ0FBQyxNQUFNLENBQUMsMkJBQTJCLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsa0NBQWtDLENBQUM7SUFDOUgsQ0FBQzs7OztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDOzs7Ozs7SUEySk8sMEJBQTBCLENBQUMsS0FBYTs7Y0FDeEMsdUJBQXVCLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyx5QkFBeUI7UUFFdkUsT0FBTyxLQUFLLElBQUksS0FBSyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyx1QkFBdUIsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGFBQWEsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsdUJBQXVCLENBQUM7SUFDakksQ0FBQzs7OzJCQXBOQSxLQUFLLFNBQUMsaUJBQWlCO3dCQWlCdkIsS0FBSyxTQUFDLGNBQWM7d0JBV3BCLEtBQUssU0FBQyxjQUFjO21CQW1CcEIsS0FBSyxTQUFDLFFBQVE7MEJBa0hkLEtBQUssU0FBQyxnQkFBZ0I7eUJBV3RCLE1BQU0sU0FBQyxlQUFlO3FCQVd0QixNQUFNLFNBQUMsVUFBVTs7Ozs7OztJQXJObEIsNkRBQThCOzs7OztJQUM5QiwwREFBeUQ7Ozs7O0lBQ3pELHFEQUFnRjs7SUFFaEYscURBQWM7O0lBQ2QseURBQW9EOztJQUNwRCx5REFBb0Q7O0lBQ3BELDRFQUFzQzs7SUFDdEMscURBQWM7O0lBQ2QsdURBQWdCOztJQUNoQixtRUFBNEI7O0lBRTVCLHdEQVNJOzs7Ozs7Ozs7SUEwQkoseURBQXlDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFnSnpDLDJEQUE4Qzs7Ozs7Ozs7Ozs7SUFXOUMsMERBQThEOzs7Ozs7Ozs7OztJQVc5RCxzREFBcUQ7Ozs7Ozs7OztJQVFyRCwyRUFBMkI7Ozs7OztJQUszQixzRUFBc0I7Ozs7OztJQUt0QixrRkFBa0M7Ozs7OztJQUtsQyw2RUFBNkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IGJyb3dzZXJMYW5ndWFnZSwgcG9Mb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi4vLi4vdXRpbHMvdXRpbCc7XHJcblxyXG5pbXBvcnQgeyBwb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzIH0gZnJvbSAnLi9saXRlcmFscy9pMThuL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxpdGVyYWxzJztcclxuaW1wb3J0IHsgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlIH0gZnJvbSAnLi9lbnVtcy9wby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeS10eXBlLmVudW0nO1xyXG5cclxuY29uc3QgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0TWF4TGVuZ3RoID0gMTU7XHJcbmNvbnN0IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1pbkxlbmd0aCA9IDE1O1xyXG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRQaG9uZSA9ICcoOTkpIDk5OTk5LTk5OTknO1xyXG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0OiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWw7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIE8gY29tcG9uZW50ZSBgcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnlgIMOpIHV0aWxpemFkbyBjb21vIHRlbXBsYXRlIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cclxuICpcclxuICogw4kgY29tcG9zdG8gcG9yIHVtYSBtb2RhbCBxdWUgcG9zc3VpIHRyw6pzIHRlbGFzLCBjYWRhIHVtYSBjb20gYXMgc2VndWludGVzIGNhcmFjdGVyw61zdGljYXM6XHJcbiAqXHJcbiAqIC0gQSBwcmltZWlyYSBwb3NzdWkgY2FtcG9zIHBhcmEgcHJlZW5jaGltZW50byBkZSBlbWFpbCBvdSBuw7ptZXJvIGRlIHRlbGVmb25lO1xyXG4gKiAtIFRlbGEgY29tIGNhbXBvIHBhcmEgcHJlZW5jaGltZW50byBkZSBjw7NkaWdvIFNNUyBlbnZpYWRvIHBhcmEgbyBuw7ptZXJvIGRlIHRlbGVmb25lIGVudmlhZG87XHJcbiAqIC0gQSB0ZXJjZWlyYSBzZSB0cmF0YSBkZSB1bWEgY29uZmlybWHDp8OjbyBkZSBlbnZpbyBkZSBsaW5rIHBhcmEgYSBjYWl4YSBkZSBlbWFpbCBkbyB1c3XDoXJpby5cclxuICpcclxuICpcclxuICogQSBwcm9wcmllZGFkZSBgcC11cmwtcmVjb3ZlcnlgIGF1dG9tYXRpemEgYSByb3RpbmEgZG8gY29tcG9uZW50ZSBlIHNpbXBsaWZpY2EgbyBwcm9jZXNzb1xyXG4gKiBwYXJhIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEsIGJhc3RhbmRvIGRlZmluaXIgdW1hIHVybCBwYXJhIHJlcXVpc2nDp8OjbyBkb3MgcmVjdXJzb3MuXHJcbiAqIFNldSBkZXRhbGhhbWVudG8gcGFyYSB1c28gcG9kZSBzZXIgdmlzdG8gbG9nbyBhYmFpeG8gZW0gKnByb3ByaWVkYWRlcyouXHJcbiAqIENhc28ganVsZ3VlIG5lY2Vzc8OhcmlvLCBwb2RlLXNlIHRhbWLDqW0gZGVmaW5pciBtYW51YWxtZW50ZSBhIHJvdGluYSBkbyBjb21wb25lbnRlLlxyXG4gKlxyXG4gKlxyXG4gKiBQYXJhIGEgbW9kYWwgZGUgZGlnaXRhw6fDo28gZGUgY8OzZGlnbyBTTVMsIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtYSBtZW5zYWdlbSBkZSBlcnJvXHJcbiAqIGN1c3RvbWl6YWRhIGNvbSBhIHByb3ByaWVkYWRlIGBwLWNvZGUtZXJyb3JgIGUgaMOhIHVtIGxpbmsgcGFyYVxyXG4gKiByZWVudmlvIGRlIGPDs2RpZ28gcG9yIFNNUy4gQW8gcmVlbnZpYXIsIG8gZXZlbnRvIGBwLWNvZGUtc3VibWl0YCBlbnZpYSB1bSBvYmpldG8gY29tIG8gdGVsZWZvbmUgZG8gdXN1w6FyaW8gZSBhIHF1YW50aWRhZGVcclxuICogZGUgdmV6ZXMgZW0gcXVlIG8gdXN1w6FyaW8gZmV6IGEgc29saWNpdGHDp8OjbyBkZSByZWVudmlvLlxyXG4gKlxyXG4gKiA+IMOJIGluZGljYWRhIGEgdXRpbGl6YcOnw6NvIGRhIHRlbGEgZGUgZGlnaXRhw6fDo28gcGFyYSBlbnZpbyBkZSBjw7NkaWdvIFNNUyBhcGVuYXNcclxuICogc2UgYSBvcMOnw6NvIHBvciBlbnZpbyBTTVMgZm9yIGRpc3BvbmliaWxpemFkYSBwYXJhIG8gdXN1w6FyaW8uXHJcbiAqXHJcbiAqXHJcbiAqIEEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBjb250w6ltIHVtYSBhw6fDo28gZGUgcmVlbnZpbyBlIG8gZXZlbnRvIGBwLXN1Ym1pdGBcclxuICogw6kgcXVlbSBwYXNzYSBvIG9iamV0byBjb250ZW5kbyBvIGVtYWlsIGVtIGNvbmp1bnRvIGNvbSBhIHF1YW50aWRhZGUgZGUgdGVudGF0aXZhcyBkZSByZWVudmlvLlxyXG4gKlxyXG4gKiA+IEEgdGVsYSBkZSBjb25maXJtYcOnw6NvIMOpIGluZGljYWRhIHBhcmEgcXVhbmRvIG8gdXN1w6FyaW8gc29saWNpdGFyIGEgdHJvY2EgYXRyYXbDqXMgZG8gZW1haWwuXHJcbiAqXHJcbiAqID4gT3MgdGV4dG9zIGRhcyBtb2RhbHMgc8OjbyBwcsOpLWRlZmluaWRvcywgaW11dMOhdmVpcyBlIHPDo28gdHJhZHV6aWRvcyBkZSBhY29yZG8gY29tIG8gaWRpb21hIGRvICpicm93c2VyKiAocHQsIGVuIGUgZXMpXHJcbiAqXHJcbiAqIFBhcmEgcXVlIGFzIGltYWdlbnMgc2VqYW0gZXhpYmlkYXMgY29ycmV0YW1lbnRlLCDDqSBuZWNlc3PDoXJpbyBpbmNsdWlyIG8gY2FtaW5obyBkZWxhcyBhbyBwcm9qZXRvLiBQYXJhIGlzc28sIGVkaXRlXHJcbiAqIG8gKmFzc2V0cyogbm8gYXJxdWl2byAqKmFuZ3VsYXIuanNvbioqIGRhIGFwbGljYcOnw6NvIG5hIHNlZ3VpbnRlIG9yZGVtOlxyXG4gKiBgYGBcclxuICogICBcImFzc2V0c1wiOiBbXHJcbiAqICAgICBcInNyYy9hc3NldHNcIixcclxuICogICAgIFwic3JjL2Zhdmljb24uaWNvXCIsXHJcbiAqICAgICB7XHJcbiAqICAgICAgIFwiZ2xvYlwiOiBcIioqXFwvKlwiLFxyXG4gKiAgICAgICBcImlucHV0XCI6IFwibm9kZV9tb2R1bGVzL0Bwb3J0aW5hcmkvc3R5bGUvaW1hZ2VzXCIsXHJcbiAqICAgICAgIFwib3V0cHV0XCI6IFwiYXNzZXRzL2ltYWdlc1wiXHJcbiAqICAgICB9XHJcbiAqICAgXVxyXG4gKiBgYGBcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeUJhc2VDb21wb25lbnQge1xyXG5cclxuICBwcml2YXRlIF9jb250YWN0RW1haWw6IHN0cmluZztcclxuICBwcml2YXRlIF9waG9uZU1hc2sgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRQaG9uZTtcclxuICBwcml2YXRlIF90eXBlOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0O1xyXG5cclxuICBlbWFpbDogc3RyaW5nO1xyXG4gIG1heExlbmd0aCA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdE1heExlbmd0aDtcclxuICBtaW5MZW5ndGggPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRNaW5MZW5ndGg7XHJcbiAgbW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZUFsbDogYm9vbGVhbjtcclxuICBwaG9uZTogc3RyaW5nO1xyXG4gIHNtc0NvZGU6IHN0cmluZztcclxuICBzbXNDb2RlRXJyb3JNZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gIGxpdGVyYWxzOiB7IGNhbmNlbEJ1dHRvbjogc3RyaW5nLCBjbG9zZUJ1dHRvbjogc3RyaW5nLCBjb250aW51ZUJ1dHRvbjogc3RyaW5nLCBlbWFpbDogc3RyaW5nLCBlbWFpbEVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nLFxyXG4gICAgZW1haWxTZW50Q29uZmlybWF0aW9uUGhyYXNlOiBzdHJpbmcsIGVtYWlsU2VudFRpdGxlOiBzdHJpbmcsIGZvcmdvdFBhc3N3b3JkVGl0bGU6IHN0cmluZyxcclxuICAgIGluc2VydENvZGU6IHN0cmluZywgaW5zZXJ0RW1haWw6IHN0cmluZywgaW5zZXJ0UGhvbmU6IHN0cmluZywgcGhvbmVFcnJvck1lc3NhZ2VQaHJhc2U6IHN0cmluZyxcclxuICAgIHByZXBvc2l0aW9uSW46IHN0cmluZywgcHJlcG9zaXRpb25Pcjogc3RyaW5nLCByZWNvdmVyeVBhc3N3b3JkUGhyYXNlOiBzdHJpbmcsIHJlc2VuZEVtYWlsQnV0dG9uOiBzdHJpbmcsXHJcbiAgICByZXNlbmRTbXNDb2RlUGhyYXNlOiBzdHJpbmcsIHNlbmRBZ2Fpbjogc3RyaW5nLCBzZW5kQWdhaW5QaHJhc2U6IHN0cmluZywgc2VuZEJ1dHRvbjogc3RyaW5nLCBzbXM6IHN0cmluZywgc21zQ29kZTogc3RyaW5nLFxyXG4gICAgc21zQ29kZUVycm9yTWVzc2FnZVBocmFzZTogc3RyaW5nLCBzZW50U21zQ29kZVBocmFzZTogc3RyaW5nLCBzdXBwb3J0Q29udGFjdDogc3RyaW5nLCB0ZWxlcGhvbmU6IHN0cmluZywgdHlwZUNvZGVUaXRsZTogc3RyaW5nIH0gPVxyXG4gICAge1xyXG4gICAgICAuLi5wb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzW3BvTG9jYWxlRGVmYXVsdF0sXHJcbiAgICAgIC4uLnBvTW9kYWxQYXNzd29yZFJlY292ZXJ5TGl0ZXJhbHNbYnJvd3Nlckxhbmd1YWdlKCldLFxyXG4gICAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluacOnw6NvIGRvIGUtbWFpbCBxdWUgw6kgZXhpYmlkbyBuYSBtZW5zYWdlbSBwYXJhIGNvbnRhdG8gZGUgc3Vwb3J0ZS5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtY29udGFjdC1lbWFpbCcpIHNldCBjb250YWN0RW1haWwodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fY29udGFjdEVtYWlsID0gdmFsdWU7XHJcblxyXG4gICAgdGhpcy5zbXNDb2RlRXJyb3JNZXNzYWdlID0gdGhpcy5jb25jYXRlbmF0ZVNNU0Vycm9yTWVzc2FnZSh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXQgY29udGFjdEVtYWlsKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhY3RFbWFpbDtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBEZWZpbmnDp8OjbyBkZSBtZW5zYWdlbSBkZSBlcnJvIGN1c3RvbWl6YWRhIHBhcmEgcXVhbmRvIG8gdXN1w6FyaW8gcGFzc2FyIHVtIGPDs2RpZ28gU01TIGludsOhbGlkbyBvdSBlcnJhZG8uXHJcbiAgICovXHJcbiAgQElucHV0KCdwLWNvZGUtZXJyb3InKSBjb2RlRXJyb3I6IHN0cmluZztcclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluacOnw6NvIGRhIG1hc2NhcmEgZG8gY2FtcG8gZGUgdGVsZWZvbmUuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBgKDk5KSA5OTk5OS05OTk5YFxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1waG9uZS1tYXNrJykgc2V0IHBob25lTWFzayh2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9waG9uZU1hc2sgPSB2YWx1ZSB8fCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRQaG9uZTtcclxuICAgIHRoaXMubWluTGVuZ3RoID0gdGhpcy5tYXhMZW5ndGggPSB0aGlzLl9waG9uZU1hc2subGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHBob25lTWFzaygpIHtcclxuICAgIHJldHVybiB0aGlzLl9waG9uZU1hc2s7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogRGVmaW5lIG8gdGlwbyBkZSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhIHF1ZSBzZXLDoSBleGliaWRvLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5FbWFpbGBcclxuICAgKlxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC10eXBlJykgc2V0IHR5cGUodmFsdWU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSkge1xyXG4gICAgdGhpcy5fdHlwZSA9ICg8YW55Pk9iamVjdCkudmFsdWVzKFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSkuaW5jbHVkZXModmFsdWUpID8gdmFsdWUgOiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVxdWlzacOnw6NvIGRvIHJlY3Vyc28uIFF1YW5kbyBwcmVlbmNoaWRvLFxyXG4gICAqIG8gbcOpdG9kb3MgYHAtc3VibWl0YCBlIGBwLXN1Ym1pdC1jb2RlYCBzZXLDo28gaWdub3JhZG9zIGUgbyBjb21wb25lbnRlIGFkcXVpcmlyw6EgYXV0b21hdGl6YcOnw6NvXHJcbiAgICogcGFyYSBvIHByb2Nlc3NvIGRlIHNvbGljaXRhw6fDo28gZGUgdHJvY2EgZGUgc2VuaGEuXHJcbiAgICpcclxuICAgKiAjIyMgUHJvY2Vzc29zXHJcbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vIGNhbXBvIGRlIGVtYWlsL3RlbGVmb25lIGUgcHJlc3Npb25hciAqKmVudmlhcioqLFxyXG4gICAqIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBuYSB1cmwgZXNwZWNpZmljYWRhIG5lc3RhIHByb3ByaWVkYWRlIHBhc3NhbmRvIG8gb2JqZXRvIGNvbnRlbmRvIG8gdmFsb3IgZGVmaW5pZG8gcGVsbyB1c3XDoXJpby5cclxuICAgKlxyXG4gICAqIGBgYFxyXG4gICAqIGJvZHkge1xyXG4gICAqICBlbWFpbDogZW1haWwsXHJcbiAgICogIHJldHJ5PzogcmV0cnlcclxuICAgKiB9XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKlxyXG4gICAqICMjIyMgUmVjdXBlcmHDp8OjbyBwb3IgZW1haWxcclxuICAgKiBQYXJhIGEgcmVjdXBlcmHDp8OjbyBkZSBzZW5oYSBwb3IgKiplbWFpbCoqLCBvIGPDs2RpZ28gZGUgcmVzcG9zdGEgSFRUUCBkZSBzdGF0dXMgZXNwZXJhZG8gw6kgYDIwNGAuXHJcbiAgICpcclxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBzZXLDoSBleGliaWRhIGEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBkZSBlLW1haWwgcGFyYSBvIHVzdcOhcmlvLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiA+IEEgYcOnw6NvICoqUmVlbnZpYXIqKiBuYSB0ZWxhIGRlIGNvbmZpcm1hw6fDo28gZWZldHVhIHVtYSBub3ZhIHJlcXVpc2nDp8Ojb1xyXG4gICAqIHBhc3NhbmRvLXNlIG8gb2JqZXRvIGNvbSBpbmNyZW1lbnRvIHBhcmEgbyB2YWxvciBkYSBwcm9wcmllZGFkZSAqKnJldHJ5KiouXHJcbiAgICpcclxuICAgKiAqUHJvY2Vzc28gZmluYWxpemFkby4qXHJcbiAgICpcclxuICAgKlxyXG4gICAqICMjIyMgUmVjdXBlcmHDp8OjbyBwb3IgU01TXHJcbiAgICogU2UgYSBvcMOnw6NvIGRlIHJlY3VwZXJhw6fDo28gZm9yIHBvciAqKlNNUyoqLCBvIGPDs2RpZ28gZGUgc3RhdHVzIGRlIHN1Y2Vzc28gZGV2ZSBzZXIgYDIwMGAuXHJcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgYWJyZS1zZSBhIG1vZGFsIGRlIGRpZ2l0YcOnw6NvIGRlIGPDs2RpZ28gU01TIGUgYSByZXNwb3N0YVxyXG4gICAqIGRlc3RhIHJlcXVpc2nDp8OjbyBkZXZlIHJldG9ybmFyIHVtYSBkZWZpbmnDp8OjbyBkZSBkYWRvcyBhYmFpeG86XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiAyMDA6XHJcbiAgICogIHtcclxuICAgKiAgICBoYXNoOiBoYXNoLFxyXG4gICAqICAgIHVybFZhbGlkYXRpb25Db2RlPzogdXJsXHJcbiAgICogIH1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqXHJcbiAgICogLSBPICoqaGFzaCoqIHNlcsOhIG8gY8OzZGlnbyBkZSB2YWxpZGHDp8OjbyBkYSBzb2xpY2l0YcOnw6NvIGRvIFNNUyBwYXJhIHNlciBlbnZpYWRvIGp1bnRhbWVudGUgY29tIG8gY8OzZGlnbyBkZSB2ZXJpZmljYcOnw6NvIGRvIFNNUztcclxuICAgKiAtICoqdXJsVmFsaWRhdGlvbkNvZGUqKiDDqSBhIHVybCB1c2FkYSBwYXJhIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gZW52aWFkbyBwb3IgU01TLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiA+IENhc28gbsOjbyBzZWphIHBhc3NhZG8gdXJsVmFsaWRhdGlvbkNvZGUsIG8gZW5kcG9pbnQgdXNhZG8gcGFyYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIHNlcsOhIGA8cC11cmwtcmVjb3Zlcnk+L3ZhbGlkYXRpb25gLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiAjIyMjIFZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gU01TXHJcbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vIGNhbXBvIGRlIGPDs2RpZ28gU01TIGUgcHJlc3Npb25hciAqKmNvbnRpbnVhcioqLCBvIGNvbXBvbmVudGUgZmFyw6EgdW1hIHJlcXVpc2nDp8OjbyBgUE9TVGAgY29udGVuZG86XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiBQT1NUIC88cC11cmwtcmVjb3Zlcnk+L3ZhbGlkYXRpb24gT1UgLzx1cmxWYWxpZGF0aW9uQ29kZT5cclxuICAgKiBCb2R5IHtcclxuICAgKiAgaGFzaDogaGFzaCxcclxuICAgKiAgY29kZTogY29kZVxyXG4gICAqIH1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqXHJcbiAgICogTyBjw7NkaWdvIGRlIHJlc3Bvc3RhIEhUVFAgZGUgc3RhdHVzIGVzcGVyYWRvIMOpIGAyMDBgLlxyXG4gICAqXHJcbiAgICogRW0gY2FzbyBkZSAqKmVycm8qKiBuYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIFNNUywgYSBtb2RhbCBzZSBtYW50w6ltIGNvbSBvIGNhbXBvIHBhcmEgZGlnaXRhw6fDo29cclxuICAgKiBkZSBjw7NkaWdvIFNNU1xyXG4gICAqXHJcbiAgICpcclxuICAgKiA+IFBvZGUtc2UgYXRyaWJ1aXIgYSBtZW5zYWdlbSBkZSBlcnJvIChtZXNzYWdlKSBwYXJhIG8gYXRyaWJ1dG8gYHAtY29kZS1lcnJvcmAgY29uZm9ybWUgcmV0b3JubyBhYmFpeG86XHJcbiAgICpcclxuICAgKiBgYGBcclxuICAgKiA0MDBcclxuICAgKiAge1xyXG4gICAqICAgIGVycm9yIHtcclxuICAgKiAgICAgIG1lc3NhZ2U6ICdFcnJvciBNZXNzYWdlJ1xyXG4gICAqICAgIH1cclxuICAgKiAgfVxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICpcclxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBlc3BlcmEtc2UgYSByZXNwb3N0YSBkZXN0YSByZXF1aXNpw6fDo28gcmV0b3JuYW5kbyBhIHNlZ3VpbnRlIGRlZmluacOnw6NvOlxyXG4gICAqXHJcbiAgICogYGBgXHJcbiAgICogMjAwOlxyXG4gICAqICB7XHJcbiAgICogICAgdG9rZW46IHRva2VuLFxyXG4gICAqICAgIHVybENoYW5nZVBhc3N3b3JkPzogdXJsXHJcbiAgICogIH1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqXHJcbiAgICogLSAqKnRva2VuKio6IFRva2VuIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhO1xyXG4gICAqIC0gKip1cmxDaGFuZ2VQYXNzd29yZCoqOiB1cmwgcGFyYSBvIGZvcm11bMOhcmlvIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxyXG4gICAqXHJcbiAgICpcclxuICAgKiBPIGNvbXBvbmVudGUgZXN0w6EgY29uZmlndXJhZG8gcGFyYSByZWRpcmVjaW9uYXIgcGFyYSBhIHVybCBlc3RhYmVsZWNpZGEgZW0gYHVybENoYW5nZVBhc3N3b3JkYC5cclxuICAgKlxyXG4gICAqID4gQ2FzbyBuw6NvIHNlamEgcGFzc2FkbyB2YWxvciBwYXJhIHVybENoYW5nZVBhc3N3b3JkLFxyXG4gICAqIGEgdXJsIHVzYWRhIHBhcmEgdmFsaWRhw6fDo28gc2Vyw6EgYSBgPHAtdXJsLXJlY292ZXJ5Pi9jaGFuZ2VQYXNzd29yZD90b2tlbj08dG9rZW4+YC5cclxuICAgKlxyXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcclxuICAgKi9cclxuICBASW5wdXQoJ3AtdXJsLXJlY292ZXJ5JykgdXJsUmVjb3Zlcnk/OiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBBw6fDo28gY29udGVuZG8gY29tbyBwYXLDom1ldHJvIG8gY8OzZGlnbyBlbnZpYWRvIHBvciBTTVMgZSBkaWdpdGFkbyBwZWxvIHVzdcOhcmlvLlxyXG4gICAqXHJcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLXJlY292ZXJ5YC5cclxuICAgKi9cclxuICBAT3V0cHV0KCdwLWNvZGUtc3VibWl0JykgY29kZVN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogQcOnw6NvIGNvbnRlbmRvIG8gZW1haWwgY29tbyBwYXLDom1ldHJvIGUgcXVlIMOpIGV4ZWN1dGFkYSBxdWFuZG8gbyB1c3XDoXJpbyBjbGljYSBzb2JyZXMgb3MgYm90w7VlcyBkZSAnZW52aWFyJyBlICdyZWVudmlhcicgZS1tYWlsLlxyXG4gICAqXHJcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLXJlY292ZXJ5YC5cclxuICAgKi9cclxuICBAT3V0cHV0KCdwLXN1Ym1pdCcpIHN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAvKipcclxuICAgKiBBY8OjbyBwYXJhIGNvbmNsdXPDo28gZGUgcHJvY2Vzc28gZSBmZWNoYW1lbnRvIGRhIG1vZGFsLiBJbmRpY2Etc2Ugc3VhIHV0aWxpemHDp8Ojb1xyXG4gICAqIHBhcmEgYXDDs3MgbyBlbnZpbyBlIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gU01TIGVudmlhZG8gcGVsbyB1c3XDoXJpby5cclxuICAgKlxyXG4gICAqID4gTmFzIG1vZGFscyBlbSBxdWUgaMOhIGEgYcOnw6NvIGRlICdjYW5jZWxhcicgZGlzcGVuc2Etc2UgbyB1c28gZGVzdGEgYcOnw6NvIHBvaXMgbyBjb21wb25lbnRlIGrDoSB0cmF0YSBvIGZlY2hhbWVudG8gZGEgbW9kYWwuXHJcbiAgICovXHJcbiAgYWJzdHJhY3QgY29tcGxldGVkKCk6IHZvaWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIEFicmUgYSBtb2RhbCBkZSBwcmVlbmNoaW1lbnRvIGRlIGVtYWlsIG91IG7Dum1lcm8gZGUgdGVsZWZvbmUgcGFyYSBzb2xpY2l0YcOnw6NvIGRlIHRyb2NhIGRlIHNlbmhhLlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IG9wZW4oKTogdm9pZDtcclxuXHJcbiAgLyoqXHJcbiAgICogQWJyZSBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gZGUgZW52aW8gZGUgZW1haWwuXHJcbiAgICovXHJcbiAgYWJzdHJhY3Qgb3BlbkNvbmZpcm1hdGlvbigpOiB2b2lkO1xyXG5cclxuICAvKipcclxuICAgKiBBYnJlIGEgbW9kYWwgZGUgcHJlZW5jaGltZW50byBkbyBjw7NkaWdvIFNNUyBlbnZpYWRvIGFvIHVzdcOhcmlvLlxyXG4gICAqL1xyXG4gIGFic3RyYWN0IG9wZW5TbXNDb2RlKCk6IHZvaWQ7XHJcblxyXG4gIHByaXZhdGUgY29uY2F0ZW5hdGVTTVNFcnJvck1lc3NhZ2UodmFsdWU6IHN0cmluZykge1xyXG4gICAgY29uc3QgbGl0ZXJhbENvZGVFcnJvck1lc3NhZ2UgPSB0aGlzLmxpdGVyYWxzLnNtc0NvZGVFcnJvck1lc3NhZ2VQaHJhc2U7XHJcblxyXG4gICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlICE9PSAnJyA/IGAke2xpdGVyYWxDb2RlRXJyb3JNZXNzYWdlfSAke3RoaXMubGl0ZXJhbHMucHJlcG9zaXRpb25Jbn0gJHt2YWx1ZX0uYCA6IGxpdGVyYWxDb2RlRXJyb3JNZXNzYWdlO1xyXG4gIH1cclxuXHJcbn1cclxuIl19